function findPos(n){var t=0,i=0;if(n.offsetParent)do t+=n.offsetLeft,i+=n.offsetTop;while(n=n.offsetParent);return[t,i]}function info_dialog(n,t,i,r){var u={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,caption:"<b>"+n+"<\/b>",left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},e,o,f;if(jQuery.extend(u,r||{}),e=u.jqModal,jQuery.fn.jqm&&!e&&(e=!1),o="",u.buttons.length>0)for(f=0;f<u.buttons.length;f++)typeof u.buttons[f].id=="undefined"&&(u.buttons[f].id="info_button_"+f),o+="<a href='javascript:void(0)' id='"+u.buttons[f].id+"' class='fm-button ui-state-default ui-corner-all'>"+u.buttons[f].text+"<\/a>";var h=isNaN(u.dataheight)?u.dataheight:u.dataheight+"px",c="text-align:"+u.align+";",s="<div id='info_id'>";s+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+h+";"+c+"'>"+t+"<\/div>";s+=i?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+u.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+i+"<\/a>"+o+"<\/div>":o!=""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+u.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+o+"<\/div>":"";s+="<\/div>";try{jQuery("#info_dialog").attr("aria-hidden")=="false"&&hideModal("#info_dialog",{jqm:e});jQuery("#info_dialog").remove()}catch(l){}createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},s,u,"","",!0);o&&jQuery.each(u.buttons,function(n){jQuery("#"+this.id,"#info_id").bind("click",function(){return u.buttons[n].onClick.call(jQuery("#info_dialog")),!1})});jQuery("#closedialog","#info_id").click(function(){return hideModal("#info_dialog",{jqm:e}),!1});jQuery(".fm-button","#info_dialog").hover(function(){jQuery(this).addClass("ui-state-hover")},function(){jQuery(this).removeClass("ui-state-hover")});viewModal("#info_dialog",{onHide:function(n){n.w.hide().remove();n.o&&n.o.remove()},modal:u.modal,jqm:e});try{$("#info_dialog").focus()}catch(l){}}function createEl(n,t,i,r,u){function l(n,t){return jQuery.isFunction(t.dataInit)&&(n.id=t.id,t.dataInit(n),delete t.id,delete t.dataInit),t.dataEvents&&(jQuery.each(t.dataEvents,function(){this.data!==undefined?jQuery(n).bind(this.type,this.data,this.fn):jQuery(n).bind(this.type,this.fn)}),delete t.dataEvents),t}var f="",w,y,s,e,p,k,h,o,a,c,d,v;t.defaultValue&&delete t.defaultValue;switch(n){case"textarea":f=document.createElement("textarea");r?t.cols||jQuery(f).css({width:"98%"}):t.cols||(t.cols=20);t.rows||(t.rows=2);(i=="&nbsp;"||i=="&#160;"||i.length==1&&i.charCodeAt(0)==160)&&(i="");f.value=i;t=l(f,t);jQuery(f).attr(t).attr({role:"textbox",multiline:"true"});break;case"checkbox":if(f=document.createElement("input"),f.type="checkbox",t.value){y=t.value.split(":");i===y[0]&&(f.checked=!0,f.defaultChecked=!0);f.value=y[0];jQuery(f).attr("offval",y[1]);try{delete t.value}catch(b){}}else w=i.toLowerCase(),w.search(/(false|0|no|off|undefined)/i)<0&&w!==""?(f.checked=!0,f.defaultChecked=!0,f.value=i):f.value="on",jQuery(f).attr("offval","off");t=l(f,t);jQuery(f).attr(t).attr("role","checkbox");break;case"select":if(f=document.createElement("select"),f.setAttribute("role","select"),e=[],t.multiple===!0?(s=!0,f.multiple="multiple",$(f).attr("aria-multiselectable","true")):s=!1,typeof t.dataUrl!="undefined")jQuery.ajax(jQuery.extend({url:t.dataUrl,type:"GET",complete:function(n){var r,u;try{delete t.dataUrl;delete t.value}catch(o){}typeof t.buildSelect!="undefined"?(u=t.buildSelect(n),r=jQuery(u).html(),delete t.buildSelect):r=jQuery(n.responseText).html();r&&(jQuery(f).append(r),t=l(f,t),typeof t.size=="undefined"&&(t.size=s?3:1),s?(e=i.split(","),e=jQuery.map(e,function(n){return jQuery.trim(n)})):e[0]=jQuery.trim(i),jQuery(f).attr(t),setTimeout(function(){jQuery("option",f).each(function(n){return n===0&&(this.selected=""),$(this).attr("role","option"),(jQuery.inArray(jQuery.trim(jQuery(this).text()),e)>-1||jQuery.inArray(jQuery.trim(jQuery(this).val()),e)>-1)&&(this.selected="selected",!s)?!1:void 0})},0))}},u||{}));else if(t.value){if(s?(e=i.split(","),e=jQuery.map(e,function(n){return jQuery.trim(n)}),typeof t.size=="undefined"&&(t.size=3)):t.size=1,typeof t.value=="function"&&(t.value=t.value()),typeof t.value=="string")for(k=t.value.split(";"),p=0;p<k.length;p++)h=k[p].split(":"),h.length>2&&(h[1]=jQuery.map(h,function(n,t){if(t>0)return n}).join(":")),o=document.createElement("option"),o.setAttribute("role","option"),o.value=h[0],o.innerHTML=h[1],s||jQuery.trim(h[0])!=jQuery.trim(i)&&jQuery.trim(h[1])!=jQuery.trim(i)||(o.selected="selected"),s&&(jQuery.inArray(jQuery.trim(h[1]),e)>-1||jQuery.inArray(jQuery.trim(h[0]),e)>-1)&&(o.selected="selected"),f.appendChild(o);else if(typeof t.value=="object"){a=t.value;for(c in a)a.hasOwnProperty(c)&&(o=document.createElement("option"),o.setAttribute("role","option"),o.value=c,o.innerHTML=a[c],s||jQuery.trim(c)!=jQuery.trim(i)&&jQuery.trim(a[c])!=jQuery.trim(i)||(o.selected="selected"),s&&(jQuery.inArray(jQuery.trim(a[c]),e)>-1||jQuery.inArray(jQuery.trim(c),e)>-1)&&(o.selected="selected"),f.appendChild(o))}t=l(f,t);try{delete t.value}catch(b){}jQuery(f).attr(t)}break;case"text":case"password":case"button":d=n=="button"?"button":"textbox";f=document.createElement("input");f.type=n;f.value=i;t=l(f,t);n!="button"&&(r?t.size||jQuery(f).css({width:"98%"}):t.size||(t.size=20));jQuery(f).attr(t).attr("role",d);break;case"image":case"file":f=document.createElement("input");f.type=n;t=l(f,t);jQuery(f).attr(t);break;case"custom":f=document.createElement("span");try{if(jQuery.isFunction(t.custom_element))if(v=t.custom_element.call(this,i,t),v)v=jQuery(v).addClass("customelement").attr({id:t.id,name:t.name}),jQuery(f).empty().append(v);else throw"e2";else throw"e1";}catch(b){b=="e1"&&info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_element' "+jQuery.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);b=="e2"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_element' "+jQuery.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,b.message,jQuery.jgrid.edit.bClose)}}return f}function daysInFebruary(n){return n%4==0&&(n%100!=0||n%400==0)?29:28}function DaysArray(n){for(var t=1;t<=n;t++)this[t]=31,(t==4||t==6||t==9||t==11)&&(this[t]=30),t==2&&(this[t]=29);return this}function checkDate(n,t){var i={},h,r,c,l,s;if(n=n.toLowerCase(),h=n.indexOf("/")!=-1?"/":n.indexOf("-")!=-1?"-":n.indexOf(".")!=-1?".":"/",n=n.split(h),t=t.split(h),t.length!=3)return!1;var u=-1,f,e=-1,o=-1;for(r=0;r<n.length;r++)c=isNaN(t[r])?0:parseInt(t[r],10),i[n[r]]=c,f=n[r],f.indexOf("y")!=-1&&(u=r),f.indexOf("m")!=-1&&(o=r),f.indexOf("d")!=-1&&(e=r);return(f=n[u]=="y"||n[u]=="yyyy"?4:n[u]=="yy"?2:-1,l=DaysArray(12),u===-1)?!1:(s=i[n[u]].toString(),f==2&&s.length==1&&(f=1),s.length!=f||i[n[u]]===0&&t[u]!="00")?!1:o===-1?!1:(s=i[n[o]].toString(),s.length<1||i[n[o]]<1||i[n[o]]>12)?!1:e===-1?!1:(s=i[n[e]].toString(),s.length<1||i[n[e]]<1||i[n[e]]>31||i[n[o]]==2&&i[n[e]]>daysInFebruary(i[n[u]])||i[n[e]]>l[i[n[o]]])?!1:!0}function isEmpty(n){return n.match(/^s+$/)||n==""?!0:!1}function checkTime(n){var t;if(!isEmpty(n))if(t=n.match(/^(\d{1,2}):(\d{2})([ap]m)?$/),t){if(t[3]){if(t[1]<1||t[1]>12)return!1}else if(t[1]>23)return!1;if(t[2]>59)return!1}else return!1;return!0}function checkValues(n,t,i){var r,e,u,f,o,s,h;if(typeof t=="string"){for(e=0,len=i.p.colModel.length;e<len;e++)if(i.p.colModel[e].name==t){r=i.p.colModel[e].editrules;t=e;try{u=i.p.colModel[e].formoptions.label}catch(c){}break}}else t>=0&&(r=i.p.colModel[t].editrules);if(r){if(u||(u=i.p.colNames[t]),r.required===!0&&(n.match(/^s+$/)||n==""))return[!1,u+": "+jQuery.jgrid.edit.msg.required,""];if(f=r.required===!1?!1:!0,r.number===!0&&!(f===!1&&isEmpty(n))&&isNaN(n))return[!1,u+": "+jQuery.jgrid.edit.msg.number,""];if(typeof r.minValue!="undefined"&&!isNaN(r.minValue)&&parseFloat(n)<parseFloat(r.minValue))return[!1,u+": "+jQuery.jgrid.edit.msg.minValue+" "+r.minValue,""];if(typeof r.maxValue!="undefined"&&!isNaN(r.maxValue)&&parseFloat(n)>parseFloat(r.maxValue))return[!1,u+": "+jQuery.jgrid.edit.msg.maxValue+" "+r.maxValue,""];if(r.email===!0&&!(f===!1&&isEmpty(n))&&(o=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,!o.test(n)))return[!1,u+": "+jQuery.jgrid.edit.msg.email,""];if(r.integer===!0&&!(f===!1&&isEmpty(n))){if(isNaN(n))return[!1,u+": "+jQuery.jgrid.edit.msg.integer,""];if(n%1!=0||n.indexOf(".")!=-1)return[!1,u+": "+jQuery.jgrid.edit.msg.integer,""]}if(r.date===!0&&!(f===!1&&isEmpty(n))&&(s=i.p.colModel[t].datefmt||"Y-m-d",!checkDate(s,n)))return[!1,u+": "+jQuery.jgrid.edit.msg.date+" - "+s,""];if(r.time===!0&&!(f===!1&&isEmpty(n))&&!checkTime(n))return[!1,u+": "+jQuery.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(r.url===!0&&!(f===!1&&isEmpty(n))&&(o=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!o.test(n)))return[!1,u+": "+jQuery.jgrid.edit.msg.url,""];if(r.custom===!0&&!(f===!1&&isEmpty(n)))return jQuery.isFunction(r.custom_func)?(h=r.custom_func.call(i,n,u),jQuery.isArray(h)?h:[!1,jQuery.jgrid.edit.msg.customarray,""]):[!1,jQuery.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}function tableToGrid(n,t){jQuery(n).each(function(){var n,i;if(!this.grid){jQuery(this).width("99%");var a=jQuery(this).width(),h=jQuery("input[type=checkbox]:first",jQuery(this)),c=jQuery("input[type=radio]:first",jQuery(this)),f=h.length>0,v=!f&&c.length>0,l=f||v,y=h.attr("name")||c.attr("name"),r=[],e=[];jQuery("th",jQuery(this)).each(function(){r.length===0&&l?(r.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),e.push("__selection__")):(r.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),e.push(jQuery(this).html()))});var u=[],o=[],s=[];for(jQuery("tbody > tr",jQuery(this)).each(function(){var t={},n=0;jQuery("td",jQuery(this)).each(function(){if(n===0&&l){var i=jQuery("input",jQuery(this)),f=i.attr("value");o.push(f||u.length);i.attr("checked")&&s.push(f);t[r[n].name]=i.attr("value")}else t[r[n].name]=jQuery(this).html();n++});n>0&&u.push(t)}),jQuery(this).empty(),jQuery(this).addClass("scroll"),jQuery(this).jqGrid($.extend({datatype:"local",width:a,colNames:e,colModel:r,multiselect:f},t||{})),n=0;n<u.length;n++)i=null,o.length>0&&(i=o[n],i&&i.replace&&(i=encodeURIComponent(i).replace(/[.\-%]/g,"_"))),i===null&&(i=n+1),jQuery(this).jqGrid("addRowData",i,u[n]);for(n=0;n<s.length;n++)jQuery(this).jqGrid("setSelection",s[n])}})}var createModal,viewModal,xmlJsonClass;(function($){$.jgrid=$.jgrid||{};$.extend($.jgrid,{htmlDecode:function(n){return n=="&nbsp;"||n=="&#160;"||n.length==1&&n.charCodeAt(0)==160?"":n?String(n).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"'):n},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\"/g,"&quot;"):n},format:function(n){var t=$.makeArray(arguments).slice(1);return n===undefined&&(n=""),n.replace(/\{(\d+)\}/g,function(n,i){return t[i]})},getCellIndex:function(n){return(n=$(n),n=(!n.is("td")&&!n.is("th")?n.closest("td,th"):n)[0],$.browser.msie)?$.inArray(n,n.parentNode.cells):n.cellIndex},stripHtml:function(n){n=n+"";return n?(n=n.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),n&&n!=="&nbsp;"&&n!=="&#160;"?n.replace(/\"/g,"'"):""):n},stringToDoc:function(n){var t,i;if(typeof n!="string")return n;try{i=new DOMParser;t=i.parseFromString(n,"text/xml")}catch(r){t=new ActiveXObject("Microsoft.XMLDOM");t.async=!1;t.loadXML(n)}return t&&t.documentElement&&t.documentElement.tagName!="parsererror"?t:null},parse:function(jsonString){var js=jsonString;return js.substr(0,9)=="while(1);"&&(js=js.substr(9)),js.substr(0,2)=="/*"&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&typeof JSON=="object"&&typeof JSON.parse=="function"?JSON.parse(js):eval("("+js+")")},jqID:function(n){return n=n+"",n.replace(/([\.\:\[\]])/g,"\\$1")},ajaxOptions:{},extend:function(n){$.extend($.fn.jqGrid,n);this.no_legacy_api||$.fn.extend(n)}});$.fn.jqGrid=function(n){var t,i;if(typeof n=="string"){if(t=$.fn.jqGrid[n],!t)throw"jqGrid - No such method: "+n;return i=$.makeArray(arguments).slice(1),t.apply(this,i)}return this.each(function(){var r,i,u,e,t,p,ci,ft,et,pt,ot,wt,a,v,st,li;if(!this.grid){if(r=$.extend(!0,{url:"",height:150,page:1,rowNum:20,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:200},$.jgrid.defaults,n||{}),i={headers:[],cols:[],footers:[],dragStart:function(n,t,i){this.resizing={idx:n,startX:t.clientX,sOL:i[0]};this.hDiv.style.cursor="col-resize";this.curGbox=$("#rs_m"+r.id,"#gbox_"+r.id);this.curGbox.css({display:"block",left:i[0],top:i[1],height:i[2]});$.isFunction(r.resizeStart)&&r.resizeStart.call(this,t,n);document.onselectstart=function(){return!1}},dragMove:function(n){if(this.resizing){var t=n.clientX-this.resizing.startX,i=this.headers[this.resizing.idx],f=r.direction==="ltr"?i.width+t:i.width-t,u,e;f>33&&(this.curGbox.css({left:this.resizing.sOL+t}),r.forceFit===!0?(u=this.headers[this.resizing.idx+r.nv],e=r.direction==="ltr"?u.width-t:u.width+t,e>33&&(i.newWidth=f,u.newWidth=e)):(this.newWidth=r.direction==="ltr"?r.tblwidth+t:r.tblwidth-t,i.newWidth=f))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var n=this.resizing.idx,t=this.headers[n].newWidth||this.headers[n].width;t=parseInt(t,10);this.resizing=!1;$("#rs_m"+r.id).css("display","none");r.colModel[n].width=t;this.headers[n].width=t;this.headers[n].el.style.width=t+"px";this.cols.length>0&&(this.cols[n].style.width=t+"px");this.footers.length>0&&(this.footers[n].style.width=t+"px");r.forceFit===!0?(t=this.headers[n+r.nv].newWidth||this.headers[n+r.nv].width,this.headers[n+r.nv].width=t,this.headers[n+r.nv].el.style.width=t+"px",this.cols.length>0&&(this.cols[n+r.nv].style.width=t+"px"),this.footers.length>0&&(this.footers[n+r.nv].style.width=t+"px"),r.colModel[n+r.nv].width=t):(r.tblwidth=this.newWidth||r.tblwidth,$("table:first",this.bDiv).css("width",r.tblwidth+"px"),$("table:first",this.hDiv).css("width",r.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,r.footerrow&&($("table:first",this.sDiv).css("width",r.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));$.isFunction(r.resizeStop)&&r.resizeStop.call(this,t,n)}this.curGbox=null;document.onselectstart=function(){return!0}},populateVisible:function(){var o;if(i.timer&&clearTimeout(i.timer),i.timer=null,o=$(i.bDiv).height(),o){var s=$("table:first",i.bDiv),a=$("> tbody > tr:visible:first",s),c=a.outerHeight()||i.prevRowHeight;if(c){i.prevRowHeight=c;var v=r.rowNum,t=i.scrollTop=i.bDiv.scrollTop,u=Math.round(s.position().top)-t,h=u+s.height(),n=c*v,f,e,l;if(u<=0&&(r.lastpage===undefined||parseInt((h+t+n-1)/n,10)<=r.lastpage)&&(e=parseInt((o-h+n-1)/n,10),h>=0||e<2||r.scroll===!0?(f=Math.round((h+t)/n)+1,u=-1):u=1),u>0&&(f=parseInt(t/n,10)+1,e=parseInt((t+o)/n,10)+2-f,l=!0),e){if(r.lastpage&&f>r.lastpage)return;i.hDiv.loading?i.timer=setTimeout(i.populateVisible,r.scrollTimeout):(r.page=f,l&&(i.selectionPreserver(s[0]),i.emptyRows(i.bDiv,!1)),i.populate(e))}}}},scrollGrid:function(){if(r.scroll){var n=i.bDiv.scrollTop;n!=i.scrollTop&&(i.scrollTop=n,i.timer&&clearTimeout(i.timer),i.timer=setTimeout(i.populateVisible,200))}i.hDiv.scrollLeft=i.bDiv.scrollLeft;r.footerrow&&(i.sDiv.scrollLeft=i.bDiv.scrollLeft)},selectionPreserver:function(n){var t=n.p,r=t.selrow,i=t.selarrrow?$.makeArray(t.selarrrow):null,f=n.grid.bDiv.scrollLeft,u=t.gridComplete;t.gridComplete=function(){if(t.selrow=null,t.selarrrow=[],t.multiselect&&i&&i.length>0)for(var e=0;e<i.length;e++)i[e]!=r&&$(n).jqGrid("setSelection",i[e],!1);r&&$(n).jqGrid("setSelection",r,!1);n.grid.bDiv.scrollLeft=f;t.gridComplete=u;t.gridComplete&&u()}}},this.p=r,this.p.colNames.length===0)for(u=0;u<this.p.colModel.length;u++)this.p.colNames[u]=this.p.colModel[u].label||this.p.colModel[u].name;if(this.p.colNames.length!==this.p.colModel.length){alert($.jgrid.errors.model);return}var y=$("<div class='ui-jqgrid-view'><\/div>"),bt,tt=$.browser.msie?!0:!1,ht=$.browser.safari?!0:!1;t=this;t.p.direction=$.trim(t.p.direction.toLowerCase());$.inArray(t.p.direction,["ltr","rtl"])==-1&&(t.p.direction="ltr");e=t.p.direction;$(y).insertBefore(this);$(this).appendTo(y).removeClass("scroll");p=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'><\/div>");$(p).insertBefore(y).attr({id:"gbox_"+this.id,dir:e});$(y).appendTo(p).attr("id","gview_"+this.id);bt=tt&&$.browser.version<=6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"><\/iframe>':"";$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'><\/div>").append(bt).insertBefore(y);$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"<\/div>").insertBefore(y);$(this).attr({cellSpacing:"0",cellPadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var w=function(n,t){return n=parseInt(n,10),isNaN(n)?t?t:0:n},b=function(n,r,u){var f=t.p.colModel[n],o=f.align,e='style="',s=f.classes,h=f.name;return o&&(e+="text-align:"+o+";"),f.hidden===!0&&(e+="display:none;"),r===0&&(e+="width: "+i.headers[n].width+"px;"),e+='"'+(s!==undefined?' class="'+s+'"':"")+(f.title&&u?' title="'+$.jgrid.stripHtml(u)+'"':""),e+(' aria-describedby="'+t.p.id+"_"+h+'"')},kt=function(n){return n===undefined||n===null||n===""?"&#160;":t.p.autoencode?$.jgrid.htmlEncode(n):n+""},dt=function(n,i,r,u,f){var o=t.p.colModel[r],s,l=(t.p.rownumbers?1:0)+(t.p.multiselect?1:0),c,h,e;if(typeof o.formatter!="undefined")if(c={rowId:n,colModel:o,gid:t.p.id},$.isFunction(o.formatter)){for(h={},e=0;e<t.p.colModel.length-l;e++)h[t.p.colModel[e+l].name]=u[e],h[e]=u[e];s=o.formatter.call(t,i,c,h,f)}else s=$.fmatter?$.fn.fmatter(o.formatter,i,c,u,f):kt(i);else s=kt(i);return s},ct=function(n,t,i,r,u){var f,e;return f=dt(n,t,i,u,"add"),e=b(i,r,f),'<td role="gridcell" '+e+">"+f+"<\/td>"},gt=function(n,i,r){var u='<input role="checkbox" type="checkbox" id="jqg_'+n+'" class="cbox" name="jqg_'+n+'"/>',f=b(i,r,"");return'<td role="gridcell" aria-describedby="'+t.p.id+'_cb" '+f+">"+u+"<\/td>"},ni=function(n,i,r,u){var f=(parseInt(r,10)-1)*parseInt(u,10)+1+i,e=b(n,i,"");return'<td role="gridcell" aria-describedby="'+t.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+e+">"+f+"<\/td>"},ti=function(n){for(var i,u=[],f=0,r=0;r<t.p.colModel.length;r++)i=t.p.colModel[r],i.name!=="cb"&&i.name!=="subgrid"&&i.name!=="rn"&&(u[f]=n=="xml"?i.xmlmap||i.name:i.jsonmap||i.name,f++);return u},ii=function(n){var i=t.p.remapColumns;return i&&i.length||(i=$.map(t.p.colModel,function(n,t){return t})),n&&(i=$.map(i,function(t){return t<n?null:t-n})),i},k=function(n,i){t.p.deepempty?$("tbody:first tr",n).remove():$("tbody:first",n).empty();i&&t.p.scroll&&($(">div:first",n).css({height:"auto"}).children("div:first").css({height:0,display:"none"}),n.scrollTop=0)},h=function(n,t){var i,f,r,u;if(typeof t=="function")return t(n);if(i=n[t],i===undefined){typeof t=="string"&&(r=t.split("."));try{if(u=r.length,u)for(i=n;i&&u--;)f=r.shift(),i=i[f]}catch(e){}}return i},lt=function(n,i,r,u,f){var yt=new Date,tt,ht,lt,at,vt;if(t.p.reccount=0,$.isXMLDoc(n))t.p.treeANode!==-1||t.p.scroll?r=r>0?r:0:(k(i,!1),r=0);else return;var v,et,g=0,y,nt,c=0,p=0,h=0,s,ot,w=[],rt,d={},pt=t.rows.length,a,b,e=[],l=0,wt=t.p.altRows===!0?" "+t.p.altclass:"",st;t.p.xmlReader.repeatitems||(w=ti("xml"));s=t.p.keyIndex===!1?t.p.xmlReader.id:t.p.keyIndex;w.length>0&&!isNaN(s)&&(t.p.remapColumns&&t.p.remapColumns.length&&(s=$.inArray(s,t.p.remapColumns)),s=w[s]);ot=(s+"").indexOf("[")===-1?w.length?function(n,t){return $(s,n).text()||t}:function(n,i){return $(t.p.xmlReader.cell,n).eq(s).text()||i}:function(n,t){return n.getAttribute(s.replace(/[\[\]]/g,""))||t};t.p.userData={};$(t.p.xmlReader.page,n).each(function(){t.p.page=this.textContent||this.text||0});$(t.p.xmlReader.total,n).each(function(){t.p.lastpage=this.textContent||this.text;t.p.lastpage===undefined&&(t.p.lastpage=1)});$(t.p.xmlReader.records,n).each(function(){t.p.records=this.textContent||this.text||0});$(t.p.xmlReader.userdata,n).each(function(){t.p.userData[this.getAttribute("name")]=this.textContent||this.text});var ut=$(t.p.xmlReader.root+" "+t.p.xmlReader.row,n),ft=ut.length,o=0;if(ut&&ft)for(tt=parseInt(t.p.rowNum,10),ht=t.p.scroll?(parseInt(t.p.page,10)-1)*tt+1:1,f&&(tt*=f+1),at=$.isFunction(t.p.afterInsertRow);o<ft;){if(a=ut[o],b=ot(a,ht+o),lt=r===0?0:r+1,st=(lt+o)%2==1?wt:"",e[l++]='<tr id="'+b+'" role="row" class ="ui-widget-content jqgrow ui-row-'+t.p.direction+""+st+'">',t.p.rownumbers===!0&&(e[l++]=ni(0,o,t.p.page,t.p.rowNum),h=1),t.p.multiselect===!0&&(e[l++]=gt(b,h,o),c=1),t.p.subGrid===!0&&(e[l++]=$(t).jqGrid("addSubGridCell",c+h,o+r),p=1),t.p.xmlReader.repeatitems)rt||(rt=ii(c+p+h)),vt=$(t.p.xmlReader.cell,a),$.each(rt,function(n){var i=vt[this];if(!i)return!1;y=i.textContent||i.text;d[t.p.colModel[n+c+p+h].name]=y;e[l++]=ct(b,y,n+c+p+h,o+r,a)});else for(v=0;v<w.length;v++)y=$(w[v],a).text(),d[t.p.colModel[v+c+p+h].name]=y,e[l++]=ct(b,y,v+c+p+h,o+r,a);if(e[l++]="<\/tr>",t.p.gridview===!1){if(t.p.treeGrid===!0){et=t.p.treeANode>=-1?t.p.treeANode:0;nt=$(e.join(""))[0];try{$(t).jqGrid("setTreeNode",d,nt)}catch(bt){}pt===0?$("tbody:first",i).append(nt):$(t.rows[o+et+r]).after(nt)}else $("tbody:first",i).append(e.join(""));if(t.p.subGrid===!0)try{$(t).jqGrid("addSubGrid",t.rows[t.rows.length-1],c+h)}catch(kt){}at&&t.p.afterInsertRow.call(t,b,d,a);e=[];l=0}if(d={},g++,o++,g==tt)break}t.p.gridview===!0&&$("tbody:first",i).append(e.join(""));t.p.totaltime=new Date-yt;g>0&&(t.grid.cols=t.rows[0].cells,t.p.records===0&&(t.p.records=ft));e=null;t.p.treeGrid||t.p.scroll||(t.grid.bDiv.scrollTop=0);t.p.reccount=g;t.p.treeANode=-1;t.p.userDataOnFooter&&$(t).jqGrid("footerData","set",t.p.userData,!0);u||it(!1,!0)},at=function(n,i,r,u,f){var pt=new Date,ut,at,vt,yt,st;if(t.p.reccount=0,n)t.p.treeANode!==-1||t.p.scroll?r=r>0?r:0:(k(i,!1),r=0);else return;var b=0,ft,e,y,d,g=[],w,c,p=0,nt=0,a=0,et,tt,l,rt={},ht,wt=t.rows.length,s,o=[],v=0,bt=t.p.altRows===!0?" "+t.p.altclass:"",lt,ot;if(t.p.page=h(n,t.p.jsonReader.page)||0,ot=h(n,t.p.jsonReader.total),t.p.lastpage=ot===undefined?1:ot,t.p.records=h(n,t.p.jsonReader.records)||0,t.p.userData=h(n,t.p.jsonReader.userdata)||{},t.p.jsonReader.repeatitems||(w=g=ti("json")),l=t.p.keyIndex===!1?t.p.jsonReader.id:t.p.keyIndex,g.length>0&&!isNaN(l)&&(t.p.remapColumns&&t.p.remapColumns.length&&(l=$.inArray(l,t.p.remapColumns)),l=g[l]),tt=h(n,t.p.jsonReader.root),tt){for(et=tt.length,e=0,ut=parseInt(t.p.rowNum,10),at=t.p.scroll?(parseInt(t.p.page,10)-1)*ut+1:1,f&&(ut*=f+1),yt=$.isFunction(t.p.afterInsertRow);e<et;){for(c=tt[e],s=h(c,l),s===undefined&&(s=at+e,g.length===0&&t.p.jsonReader.cell&&(st=c[t.p.jsonReader.cell],s=st[l]||s,st=null)),vt=r===0?0:r+1,lt=(vt+e)%2==1?bt:"",o[v++]='<tr id="'+s+'" role="row" class= "ui-widget-content jqgrow ui-row-'+t.p.direction+""+lt+'">',t.p.rownumbers===!0&&(o[v++]=ni(0,e,t.p.page,t.p.rowNum),a=1),t.p.multiselect&&(o[v++]=gt(s,a,e),p=1),t.p.subGrid&&(o[v++]=$(t).jqGrid("addSubGridCell",p+a,e+r),nt=1),t.p.jsonReader.repeatitems&&(t.p.jsonReader.cell&&(c=h(c,t.p.jsonReader.cell)),w||(w=ii(p+nt+a))),y=0;y<w.length;y++)ft=h(c,w[y]),o[v++]=ct(s,ft,y+p+nt+a,e+r,c),rt[t.p.colModel[y+p+nt+a].name]=ft;if(o[v++]="<\/tr>",t.p.gridview===!1){if(t.p.treeGrid===!0){ht=t.p.treeANode>=-1?t.p.treeANode:0;d=$(o.join(""))[0];try{$(t).jqGrid("setTreeNode",rt,d)}catch(kt){}wt===0?$("tbody:first",i).append(d):$(t.rows[e+ht+r]).after(d)}else $("tbody:first",i).append(o.join(""));if(t.p.subGrid===!0)try{$(t).jqGrid("addSubGrid",t.rows[t.rows.length-1],p+a)}catch(dt){}yt&&t.p.afterInsertRow.call(t,s,rt,c);o=[];v=0}if(rt={},b++,e++,b==ut)break}t.p.gridview===!0&&$("tbody:first",i).append(o.join(""));t.p.totaltime=new Date-pt;b>0&&(t.grid.cols=t.rows[0].cells,t.p.records===0&&(t.p.records=et))}t.p.treeGrid||t.p.scroll||(t.grid.bDiv.scrollTop=0);t.p.reccount=b;t.p.treeANode=-1;t.p.userDataOnFooter&&$(t).jqGrid("footerData","set",t.p.userData,!0);u||it(!1,!0)},it=function(n,i){var f,s,r,h,e,c,o,u="",a,l,v,y;r=parseInt(t.p.page,10)-1;r<0&&(r=0);r=r*parseInt(t.p.rowNum,10);e=r+t.p.reccount;t.p.scroll&&(a=$("tbody:first > tr",t.grid.bDiv),r=e-a.length,l=a.outerHeight(),l&&(v=r*l,y=parseInt(t.p.records,10)*l,$(">div:first",t.grid.bDiv).css({height:y}).children("div:first").css({height:v,display:v?"":"none"})));u=t.p.pager?t.p.pager:"";u+=t.p.toppager?u?","+t.p.toppager:t.p.toppager:"";u&&(o=$.jgrid.formatter.integer||{},t.p.loadonce?(f=s=1,t.p.lastpage=t.page=1,$(".selbox",u).attr("disabled",!0)):(f=w(t.p.page),s=w(t.p.lastpage),$(".selbox",u).attr("disabled",!1)),t.p.pginput===!0&&($(".ui-pg-input",u).val(t.p.page),$("#sp_1",u).html($.fmatter?$.fmatter.util.NumberFormat(t.p.lastpage,o):t.p.lastpage)),t.p.viewrecords&&(t.p.reccount===0?$(".ui-paging-info",u).html(t.p.emptyrecords):(h=r+1,c=t.p.records,$.fmatter&&(h=$.fmatter.util.NumberFormat(h,o),e=$.fmatter.util.NumberFormat(e,o),c=$.fmatter.util.NumberFormat(c,o)),$(".ui-paging-info",u).html($.jgrid.format(t.p.recordtext,h,e,c)))),t.p.pgbuttons===!0&&(f<=0&&(f=s=0),f==1||f===0?($("#first, #prev",t.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover"),t.p.toppager&&$("#first_t, #prev_t",t.p.toppager).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#first, #prev",t.p.pager).removeClass("ui-state-disabled"),t.p.toppager&&$("#first_t, #prev_t",t.p.toppager).removeClass("ui-state-disabled")),f==s||f===0?($("#next, #last",t.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover"),t.p.toppager&&$("#next_t, #last_t",t.p.toppager).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#next, #last",t.p.pager).removeClass("ui-state-disabled"),t.p.toppager&&$("#next_t, #last_t",t.p.toppager).removeClass("ui-state-disabled"))));n===!0&&t.p.rownumbers===!0&&$("td.jqgrid-rownum",t.rows).each(function(n){$(this).html(r+1+n)});i&&t.p.jqgdnd&&$(t).jqGrid("gridDnD","updateDnD");$.isFunction(t.p.gridComplete)&&t.p.gridComplete.call(t)},c=function(n){var f,e,s,h;if(!t.grid.hDiv.loading){var l=t.p.scroll&&n===!1,r={},o,u,i=t.p.prmNames;if(t.p.page<=0&&(t.p.page=1),i.search!==null&&(r[i.search]=t.p.search),i.nd!==null&&(r[i.nd]=(new Date).getTime()),i.rows!==null&&(r[i.rows]=t.p.rowNum),i.page!==null&&(r[i.page]=t.p.page),i.sort!==null&&(r[i.sort]=t.p.sortname),i.order!==null&&(r[i.order]=t.p.sortorder),f=t.p.loadComplete,e=$.isFunction(f),e||(f=null),s=0,n=n||1,n>1?i.npage!==null?(r[i.npage]=n,s=n-1,n=1):f=function(i){e&&t.p.loadComplete.call(t,i);t.grid.hDiv.loading=!1;t.p.page++;c(n-1)}:i.npage!==null&&delete t.p.postData[i.npage],$.extend(t.p.postData,r),h=t.p.scroll?t.rows.length-1:0,$.isFunction(t.p.datatype)){t.p.datatype.call(t,t.p.postData,"load_"+t.p.id);return}$.isFunction(t.p.beforeRequest)&&t.p.beforeRequest.call(t);o=t.p.datatype.toLowerCase();switch(o){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:t.p.url,type:t.p.mtype,dataType:o,data:$.isFunction(t.p.serializeGridData)?t.p.serializeGridData.call(t,t.p.postData):t.p.postData,success:function(i){t&&t.grid&&(o==="xml"?lt(i,t.grid.bDiv,h,n>1,s):at(i,t.grid.bDiv,h,n>1,s),f&&f.call(t,i),l&&t.grid.populateVisible(),(t.p.loadonce||t.p.treeGrid)&&(t.p.datatype="local"));i=null;d()},error:function(n,i,r){$.isFunction(t.p.loadError)&&t.p.loadError.call(t,n,i,r);d();n=null},beforeSend:function(n){rt();$.isFunction(t.p.loadBeforeSend)&&t.p.loadBeforeSend.call(t,n)}},$.jgrid.ajaxOptions,t.p.ajaxGridOptions));break;case"xmlstring":rt();u=$.jgrid.stringToDoc(t.p.datastr);e&&t.p.loadComplete.call(t,u);lt(u,t.grid.bDiv);t.p.datatype="local";t.p.datastr=null;d();break;case"jsonstring":rt();u=typeof t.p.datastr=="string"?$.jgrid.parse(t.p.datastr):t.p.datastr;e&&t.p.loadComplete.call(t,u);at(u,t.grid.bDiv);t.p.datatype="local";t.p.datastr=null;d();break;case"local":case"clientside":rt();t.p.datatype="local";e&&t.p.loadComplete.call(t,"");ai();it(!0,!0);d()}}},rt=function(){if(t.grid.hDiv.loading=!0,!t.p.hiddengrid)switch(t.p.loadui){case"enable":$("#load_"+t.p.id).show();break;case"block":$("#lui_"+t.p.id).show();$("#load_"+t.p.id).show()}},d=function(){if(t&&t.grid&&t.p){t.grid.hDiv.loading=!1;switch(t.p.loadui){case"enable":$("#load_"+t.p.id).hide();break;case"block":$("#lui_"+t.p.id).hide();$("#load_"+t.p.id).hide()}}},ai=function(){var s=/[\$,%]/g,r=[],u=0,n,e,h,o=t.p.sortorder=="asc"?1:-1,c=!1,l,f;$.each(t.p.colModel,function(i){if(this.index==t.p.sortname||this.name==t.p.sortname)return t.p.lastsort==i&&(c=!0),u=i,n=this.sorttype,!1});h=n=="float"||n=="number"||n=="currency"?function(n){var t=parseFloat(n.replace(s,""));return isNaN(t)?0:t}:n=="int"||n=="integer"?function(n){return w(n.replace(s,""),0)}:n=="date"||n=="datetime"?function(n){var i=t.p.colModel[u].datefmt||"Y-m-d";return vi(i,n).getTime()}:$.isFunction(n)?n:function(n){return $.trim(n.toUpperCase())};l=t.p.colModel[u];$.each(t.rows,function(n,t){try{e=$.unformat($(t).children("td").eq(u),{rowId:t.id,colModel:l},u,!0)}catch(i){e=$(t).children("td").eq(u).text()}t.sortKey=h(e);r[n]=this});t.p.treeGrid?$(t).jqGrid("SortTree",o):(c?r.reverse():r.sort(function(n,t){return n.sortKey<t.sortKey?-o:n.sortKey>t.sortKey?o:0}),r[0]&&($("td",r[0]).each(function(n){$(this).css("width",i.headers[n].width+"px")}),t.grid.cols=r[0].cells),f="",t.p.altRows&&(f=t.p.altclass),$.each(r,function(n,i){f&&(n%2==1?$(i).addClass(f):$(i).removeClass(f));$("tbody",t.grid.bDiv).append(i);i.sortKey=null}));t.grid.bDiv.scrollTop=0},vi=function(n,t){var r={m:1,d:1,y:1970,h:0,i:0,s:0},i,o,u,f;if(t=$.trim(t),t){t=t.split(/[\\\/:_;.\t\T\s-]/);n=n.split(/[\\\/:_;.\t\T\s-]/);var s=$.jgrid.formatter.date.monthNames,e=$.jgrid.formatter.date.AmPm,h=function(n,t){return n===0?t==12&&(t=0):t!=12&&(t+=12),t};for(i=0,o=n.length;i<o;i++)n[i]=="M"&&(u=$.inArray(t[i],s),u!==-1&&u<12&&(t[i]=u+1)),n[i]=="F"&&(u=$.inArray(t[i],s),u!==-1&&u>11&&(t[i]=u+1-12)),n[i]=="a"&&(u=$.inArray(t[i],e),u!==-1&&u<2&&t[i]==e[u]&&(t[i]=u,r.h=h(t[i],r.h))),n[i]=="A"&&(u=$.inArray(t[i],e),u!==-1&&u>1&&t[i]==e[u]&&(t[i]=u-2,r.h=h(t[i],r.h))),r[n[i].toLowerCase()]=parseInt(t[i],10);r.m=parseInt(r.m,10)-1;f=r.y;f>=70&&f<=99?r.y=1900+r.y:f>=0&&f<=69&&(r.y=2e3+r.y)}return new Date(r.y,r.m,r.d,r.h,r.i,r.s,0)},ri=function(n,i){var v="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'><\/span><\/td>",f="",r="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",o="",u,y,p,b,s,k,h,a=function(n){var i;return($.isFunction(t.p.onPaging)&&(i=t.p.onPaging.call(t,n)),t.p.selrow=null,t.p.multiselect&&(t.p.selarrrow=[],$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.hDiv).attr("checked",!1)),t.p.savedRow=[],i=="stop")?!1:!0},l;if(n=n.substr(1),u="pg_"+n,y=n+"_left",p=n+"_center",b=n+"_right",$("#"+n).append("<div id='"+u+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;' role='row'><tbody><tr><td id='"+y+"' align='left'><\/td><td id='"+p+"' align='center' style='white-space:pre;'><\/td><td id='"+b+"' align='right'><\/td><\/tr><\/tbody><\/table><\/div>").attr("dir","ltr"),t.p.rowList.length>0){for(o="<td dir='"+e+"'>",o+="<select class='ui-pg-selbox' role='listbox'>",h=0;h<t.p.rowList.length;h++)o+="<option role='option' value='"+t.p.rowList[h]+"'"+(t.p.rowNum==t.p.rowList[h]?" selected":"")+">"+t.p.rowList[h]+"<\/option>";o+="<\/select><\/td>"}e=="rtl"&&(r+=o);t.p.pginput===!0&&(f="<td dir='"+e+"'>"+$.jgrid.format(t.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1'><\/span>")+"<\/td>");t.p.pgbuttons===!0?(l=["first"+i,"prev"+i,"next"+i,"last"+i],e=="rtl"&&l.reverse(),r+="<td id='"+l[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'><\/span><\/td>",r+="<td id='"+l[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'><\/span><\/td>",r+=f!=""?v+f+v:"",r+="<td id='"+l[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'><\/span><\/td>",r+="<td id='"+l[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'><\/span><\/td>"):f!=""&&(r+=f);e=="ltr"&&(r+=o);r+="<\/tr><\/tbody><\/table>";t.p.viewrecords===!0&&$("td#"+n+"_"+t.p.recordpos,"#"+u).append("<div dir='"+e+"' style='text-align:"+t.p.recordpos+"' class='ui-paging-info'><\/div>");$("td#"+n+"_"+t.p.pagerpos,"#"+u).append(r);k=$(".ui-jqgrid").css("font-size")||"11px";$("body").append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+k+";visibility:hidden;' ><\/div>");s=$(r).clone().appendTo("#testpg").width();$("#testpg").remove();s>0&&(f!=""&&(s+=50),$("td#"+n+"_"+t.p.pagerpos,"#"+u).width(s));t.p._nvtd=[];t.p._nvtd[0]=s?Math.floor((t.p.width-s)/2):Math.floor(t.p.width/3);t.p._nvtd[1]=0;r=null;$(".ui-pg-selbox","#"+u).bind("change",function(){return(t.p.page=Math.round(t.p.rowNum*(t.p.page-1)/this.value-.5)+1,t.p.rowNum=this.value,i?$(".ui-pg-selbox",t.p.pager).val(this.value):t.p.toppager&&$(".ui-pg-selbox",t.p.toppager).val(this.value),!a("records"))?!1:(c(),!1)});t.p.pgbuttons===!0&&($(".ui-pg-button","#"+u).hover(function(){$(this).hasClass("ui-state-disabled")?this.style.cursor="default":($(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){$(this).hasClass("ui-state-disabled")||($(this).removeClass("ui-state-hover"),this.style.cursor="default")}),$("#first"+i+", #prev"+i+", #next"+i+", #last"+i,"#"+n).click(function(){var n=w(t.p.page,1),r=w(t.p.lastpage,1),u=!1,o=!0,s=!0,f=!0,e=!0;if(r===0||r===1?(o=!1,s=!1,f=!1,e=!1):r>1&&n>=1?n===1?(o=!1,s=!1):n>1&&n<r||n===r&&(f=!1,e=!1):r>1&&n===0&&(f=!1,e=!1,n=r-1),this.id==="first"+i&&o&&(t.p.page=1,u=!0),this.id==="prev"+i&&s&&(t.p.page=n-1,u=!0),this.id==="next"+i&&f&&(t.p.page=n+1,u=!0),this.id==="last"+i&&e&&(t.p.page=r,u=!0),u){if(!a(this.id))return!1;c()}return!1}));t.p.pginput===!0&&$("input.ui-pg-input","#"+u).keypress(function(n){var i=n.charCode?n.charCode:n.keyCode?n.keyCode:0;return i==13?(t.p.page=$(this).val()>0?$(this).val():t.p.page,!a("user"))?!1:(c(),!1):this})},ui=function(n,i,r,u){var e,f;if(t.p.colModel[i].sortable&&!(t.p.savedRow.length>0)){if(r||(t.p.lastsort==i?t.p.sortorder=="asc"?t.p.sortorder="desc":t.p.sortorder=="desc"&&(t.p.sortorder="asc"):t.p.sortorder=t.p.colModel[i].firstsortorder||"asc",t.p.page=1),u)if(t.p.lastsort!=i||t.p.sortorder!=u||r)t.p.sortorder=u;else return;if(f=$("thead:first",t.grid.hDiv).get(0),$("tr th:eq("+t.p.lastsort+") span.ui-grid-ico-sort",f).addClass("ui-state-disabled"),$("tr th:eq("+t.p.lastsort+")",f).attr("aria-selected","false"),$("tr th:eq("+i+") span.ui-icon-"+t.p.sortorder,f).removeClass("ui-state-disabled"),$("tr th:eq("+i+")",f).attr("aria-selected","true"),t.p.viewsortcols[0]||t.p.lastsort!=i&&($("tr th:eq("+t.p.lastsort+") span.s-ico",f).hide(),$("tr th:eq("+i+") span.s-ico",f).show()),n=n.substring(5),t.p.sortname=t.p.colModel[i].index||n,e=t.p.sortorder,$.isFunction(t.p.onSortCol)&&t.p.onSortCol.call(t,n,i,e)=="stop"){t.p.lastsort=i;return}t.p.datatype=="local"?t.p.deselectAfterSort&&$(t).jqGrid("resetSelection"):(t.p.selrow=null,t.p.multiselect&&$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.hDiv).attr("checked",!1),t.p.selarrrow=[],t.p.savedRow=[],t.p.scroll&&k(t.grid.bDiv,!0));t.p.subGrid&&t.p.datatype=="local"&&$("td.sgexpanded","#"+t.p.id).each(function(){$(this).trigger("click")});c();t.p.lastsort=i;t.p.sortname!=n&&i&&(t.p.lastsort=i)}},yi=function(){var n=0,r=t.p.cellLayout,u=0,o,s=t.p.scrollOffset,h,c=!1,l,a=0,f=0,v=0,e;ht&&(r=0);$.each(t.p.colModel,function(){typeof this.hidden=="undefined"&&(this.hidden=!1);this.hidden===!1&&(n+=w(this.width,0),this.fixed?(a+=this.width,f+=this.width+r):u++,v++)});isNaN(t.p.width)?t.p.width=i.width=n:i.width=t.p.width;t.p.tblwidth=n;t.p.shrinkToFit===!1&&t.p.forceFit===!0&&(t.p.forceFit=!1);t.p.shrinkToFit===!0&&u>0&&(l=i.width-r*u-f,isNaN(t.p.height)||(l-=s,c=!0),n=0,$.each(t.p.colModel,function(i){this.hidden!==!1||this.fixed||(h=Math.round(l*this.width/(t.p.tblwidth-a)),this.width=h,n+=h,o=i)}),e=0,c?i.width-f-(n+r*u)!==s&&(e=i.width-f-(n+r*u)-s):c||Math.abs(i.width-f-(n+r*u))===1||(e=i.width-f-(n+r*u)),t.p.colModel[o].width+=e,t.p.tblwidth=n+e+a+v*r,t.p.tblwidth>t.p.width&&(t.p.colModel[o].width-=t.p.tblwidth-parseInt(t.p.width,10),t.p.tblwidth=t.p.width))},pi=function(n){for(var u=n,r=n,i=n+1;i<t.p.colModel.length;i++)if(t.p.colModel[i].hidden!==!0){r=i;break}return r-u},wi=function(n){var r,i={},u=ht?0:t.p.cellLayout;for(i[0]=i[1]=i[2]=0,r=0;r<=n;r++)t.p.colModel[r].hidden===!1&&(i[0]+=t.p.colModel[r].width+u);return t.p.direction=="rtl"&&(i[0]=t.p.width-i[0]),i[0]=i[0]-t.grid.bDiv.scrollLeft,$(t.grid.cDiv).is(":visible")&&(i[1]+=$(t.grid.cDiv).height()+parseInt($(t.grid.cDiv).css("padding-top"),10)+parseInt($(t.grid.cDiv).css("padding-bottom"),10)),t.p.toolbar[0]===!0&&(t.p.toolbar[1]=="top"||t.p.toolbar[1]=="both")&&(i[1]+=$(t.grid.uDiv).height()+parseInt($(t.grid.uDiv).css("border-top-width"),10)+parseInt($(t.grid.uDiv).css("border-bottom-width"),10)),t.p.toppager&&(i[1]+=$(t.grid.topDiv).height()+parseInt($(t.grid.topDiv).css("border-bottom-width"),10)),i[2]+=$(t.grid.bDiv).height()+$(t.grid.hDiv).height(),i};for(this.p.id=this.id,$.inArray(t.p.multikey,["shiftKey","altKey","ctrlKey"])==-1&&(t.p.multikey=!1),t.p.keyIndex=!1,u=0;u<t.p.colModel.length;u++)if(t.p.colModel[u].key===!0){t.p.keyIndex=u;break}if(t.p.sortorder=t.p.sortorder.toLowerCase(),this.p.treeGrid===!0)try{$(this).jqGrid("setTreeGrid")}catch(ki){}if(this.p.subGrid)try{$(t).jqGrid("setSubGrid")}catch(ki){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:ht?t.p.multiselectWidth+t.p.cellLayout:t.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:t.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));t.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},t.p.xmlReader);t.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},t.p.jsonReader);t.p.scroll&&(t.p.pgbuttons=!1,t.p.pginput=!1,t.p.rowList=[]);var l="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",fi,ei,vt,g,ut,o,f,oi,yt,si="",hi="";if(t.p.shrinkToFit===!0&&t.p.forceFit===!0)for(u=t.p.colModel.length-1;u>=0;u--)if(!t.p.colModel[u].hidden){t.p.colModel[u].resizable=!1;break}for(t.p.viewsortcols[1]=="horizontal"&&(si=" ui-i-asc",hi=" ui-i-desc"),fi=tt?"class='ui-th-div-ie'":"",yt="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+si+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+e+"'><\/span>",yt+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+hi+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+e+"'><\/span><\/span>",u=0;u<this.p.colNames.length;u++)ci=t.p.headertitles?' title="'+$.jgrid.stripHtml(t.p.colNames[u])+'"':"",l+="<th id='"+t.p.id+"_"+t.p.colModel[u].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+e+"'"+ci+">",ei=t.p.colModel[u].index||t.p.colModel[u].name,l+="<div id='jqgh_"+t.p.colModel[u].name+"' "+fi+">"+t.p.colNames[u],t.p.colModel[u].width=t.p.colModel[u].width?parseInt(t.p.colModel[u].width,10):150,typeof t.p.colModel[u].title!="boolean"&&(t.p.colModel[u].title=!0),ei==t.p.sortname&&(t.p.lastsort=u),l+=yt+"<\/div><\/th>";if(l+="<\/tr><\/thead>",$(this).append(l),$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),this.p.multiselect&&(ft=[],$("#cb_"+$.jgrid.jqID(t.p.id),this).bind("click",function(){this.checked?($("[id^=jqg_]",t.rows).attr("checked",!0),$(t.rows).each(function(n){$(this).hasClass("subgrid")||($(this).addClass("ui-state-highlight").attr("aria-selected","true"),t.p.selarrrow[n]=t.p.selrow=this.id)}),et=!0,ft=[]):($("[id^=jqg_]",t.rows).attr("checked",!1),$(t.rows).each(function(n){$(this).hasClass("subgrid")||($(this).removeClass("ui-state-highlight").attr("aria-selected","false"),ft[n]=this.id)}),t.p.selarrrow=[],t.p.selrow=null,et=!1);$.isFunction(t.p.onSelectAll)&&t.p.onSelectAll.call(t,et?t.p.selarrrow:ft,et)})),t.p.autowidth===!0&&(pt=$(p).innerWidth(),t.p.width=pt>0?pt:"nw"),yi(),$(p).css("width",i.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+t.p.id+"'>&#160;<\/div>"),$(y).css("width",i.width+"px"),l=$("thead:first",t).get(0),ot="<table role='grid' style='width:"+t.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+e+"'>",wt=$("tr:first",l),t.p.disableClick=!1,$("th",wt).each(function(n){vt=t.p.colModel[n].width;typeof t.p.colModel[n].resizable=="undefined"&&(t.p.colModel[n].resizable=!0);t.p.colModel[n].resizable?(g=document.createElement("span"),$(g).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+e),$.browser.opera||$(g).css("cursor","col-resize"),$(this).addClass(t.p.resizeclass)):g="";$(this).css("width",vt+"px").prepend(g);t.p.colModel[n].hidden&&$(this).css("display","none");i.headers[n]={width:vt,el:this};ut=t.p.colModel[n].sortable;typeof ut!="boolean"&&(t.p.colModel[n].sortable=!0,ut=!0);var r=t.p.colModel[n].name;r=="cb"||r=="subgrid"||r=="rn"||t.p.viewsortcols[2]&&$("div",this).addClass("ui-jqgrid-sortable");ut&&(t.p.viewsortcols[0]?($("div span.s-ico",this).show(),n==t.p.lastsort&&$("div span.ui-icon-"+t.p.sortorder,this).removeClass("ui-state-disabled")):n==t.p.lastsort&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+t.p.sortorder,this).removeClass("ui-state-disabled")));ot+="<td role='gridcell' "+b(n,0,"")+">&#160;<\/td>"}).mousedown(function(n){if($(n.target).closest("th>span.ui-jqgrid-resize").length==1){var r=$.jgrid.getCellIndex(this);return t.p.forceFit===!0&&(t.p.nv=pi(r)),i.dragStart(r,n,wi(r)),!1}}).click(function(n){var i,u,f,r,e;return t.p.disableClick?(t.p.disableClick=!1,!1):(i="th>div.ui-jqgrid-sortable",t.p.viewsortcols[2]||(i="th>div>span>span.ui-grid-ico-sort"),r=$(n.target).closest(i),r.length!=1)?void 0:(e=$.jgrid.getCellIndex(this),t.p.viewsortcols[2]||(u=!0,f=r.attr("sort")),ui($("div",this)[0].id,e,u,f),!1)}),t.p.sortable&&$.fn.sortable)try{$(t).jqGrid("sortableColumns",wt)}catch(di){}ot+="<\/tr><\/tbody><\/table>";oi=document.createElement("tbody");this.appendChild(oi);$(this).addClass("ui-jqgrid-btable");var bi=$("<table class='ui-jqgrid-htable' style='width:"+t.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'><\/table>").append(l),s=t.p.caption&&t.p.hiddengrid===!0?!0:!1,nt=$("<div class='ui-jqgrid-hbox"+(e=="rtl"?"-rtl":"")+"'><\/div>");i.hDiv=document.createElement("div");$(i.hDiv).css({width:i.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(nt);$(nt).append(bi);s&&$(i.hDiv).hide();t.p.pager&&(typeof t.p.pager=="string"?t.p.pager.substr(0,1)!="#"&&(t.p.pager="#"+t.p.pager):t.p.pager="#"+$(t.p.pager).attr("id"),$(t.p.pager).css({width:i.width+"px"}).appendTo(p).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),s&&$(t.p.pager).hide(),ri(t.p.pager,""));t.p.cellEdit===!1&&t.p.hoverrows===!0&&$(t).bind("mouseover",function(n){return f=$(n.target).closest("tr.jqgrow"),$(f).attr("class")!=="subgrid"&&$(f).addClass("ui-state-hover"),!1}).bind("mouseout",function(n){return f=$(n.target).closest("tr.jqgrow"),$(f).removeClass("ui-state-hover"),!1});$(t).before(i.hDiv).click(function(n){var i,r;if((o=n.target,i=$(o).hasClass("cbox"),f=$(o,t.rows).closest("tr.jqgrow"),$(f).length===0)||(r=!0,$.isFunction(t.p.beforeSelectRow)&&(r=t.p.beforeSelectRow.call(t,f[0].id,n)),o.tagName=="A"||(o.tagName=="INPUT"||o.tagName=="TEXTAREA"||o.tagName=="OPTION"||o.tagName=="SELECT")&&!i))return this;if(r===!0){if(t.p.cellEdit===!0)if(t.p.multiselect&&i)$(t).jqGrid("setSelection",f[0].id,!0);else{a=f[0].rowIndex;v=$.jgrid.getCellIndex(o);try{$(t).jqGrid("editCell",a,v,!0)}catch(u){}}else t.p.multikey?n[t.p.multikey]?$(t).jqGrid("setSelection",f[0].id,!0):t.p.multiselect&&i&&(i=$("[id^=jqg_]",f).attr("checked"),$("[id^=jqg_]",f).attr("checked",!i)):t.p.multiselect&&t.p.multiboxonly?i?$(t).jqGrid("setSelection",f[0].id,!0):($(t.p.selarrrow).each(function(n,i){var r=t.rows.namedItem(i);$(r).removeClass("ui-state-highlight");$("#jqg_"+$.jgrid.jqID(i),r).attr("checked",!1)}),t.p.selarrrow=[],$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.hDiv).attr("checked",!1),$(t).jqGrid("setSelection",f[0].id,!0)):$(t).jqGrid("setSelection",f[0].id,!0);$.isFunction(t.p.onCellSelect)&&(a=f[0].id,v=$.jgrid.getCellIndex(o),t.p.onCellSelect.call(t,a,v,$(o).html(),n));n.stopPropagation()}else return this}).bind("reloadGrid",function(n,i){if(t.p.treeGrid===!0&&(t.p.datatype=t.p.treedatatype),i&&i.current&&t.grid.selectionPreserver(t),t.p.datatype=="local"?$(t).jqGrid("resetSelection"):t.p.treeGrid||(t.p.selrow=null,t.p.multiselect&&(t.p.selarrrow=[],$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.hDiv).attr("checked",!1)),t.p.savedRow=[],t.p.scroll&&k(t.grid.bDiv,!0)),i&&i.page){var r=i.page;r>t.p.lastpage&&(r=t.p.lastpage);r<1&&(r=1);t.p.page=r;t.grid.bDiv.scrollTop=t.grid.prevRowHeight?(r-1)*t.grid.prevRowHeight*t.p.rowNum:0}return t.grid.prevRowHeight&&t.p.scroll?(delete t.p.lastpage,t.grid.populateVisible()):t.grid.populate(),!1});$.isFunction(this.p.ondblClickRow)&&$(this).dblclick(function(n){return(o=n.target,f=$(o,t.rows).closest("tr.jqgrow"),$(f).length===0)?!1:(a=f[0].rowIndex,v=$.jgrid.getCellIndex(o),t.p.ondblClickRow.call(t,$(f).attr("id"),a,v,n),!1)});$.isFunction(this.p.onRightClickRow)&&$(this).bind("contextmenu",function(n){return(o=n.target,f=$(o,t.rows).closest("tr.jqgrow"),$(f).length===0)?!1:(t.p.multiselect||$(t).jqGrid("setSelection",f[0].id,!0),a=f[0].rowIndex,v=$.jgrid.getCellIndex(o),t.p.onRightClickRow.call(t,$(f).attr("id"),a,v,n),!1)});i.bDiv=document.createElement("div");$(i.bDiv).append($('<div style="position:relative;'+(tt&&$.browser.version<8?"height:0.01%;":"")+'"><\/div>').append("<div><\/div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:t.p.height+(isNaN(t.p.height)?"":"px"),width:i.width+"px"}).scroll(i.scrollGrid);$("table:first",i.bDiv).css({width:t.p.tblwidth+"px"});tt?($("tbody",this).size()==2&&$("tbody:first",this).remove(),t.p.multikey&&$(i.bDiv).bind("selectstart",function(){return!1})):t.p.multikey&&$(i.bDiv).bind("mousedown",function(){return!1});s&&$(i.bDiv).hide();i.cDiv=document.createElement("div");st=t.p.hidegrid===!0?$("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){st.addClass("ui-state-hover")},function(){st.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'><\/span>").css(e=="rtl"?"left":"right","0px"):"";$(i.cDiv).append(st).append("<span class='ui-jqgrid-title"+(e=="rtl"?"-rtl":"")+"'>"+t.p.caption+"<\/span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");$(i.cDiv).insertBefore(i.hDiv);t.p.toolbar[0]&&(i.uDiv=document.createElement("div"),t.p.toolbar[1]=="top"?$(i.uDiv).insertBefore(i.hDiv):t.p.toolbar[1]=="bottom"&&$(i.uDiv).insertAfter(i.hDiv),t.p.toolbar[1]=="both"?(i.ubDiv=document.createElement("div"),$(i.uDiv).insertBefore(i.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),$(i.ubDiv).insertAfter(i.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id),s&&$(i.ubDiv).hide()):$(i.uDiv).width(i.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),s&&$(i.uDiv).hide());t.p.toppager&&(t.p.toppager=t.p.id+"_toppager",i.topDiv=$("<div id='"+t.p.toppager+"'><\/div>")[0],t.p.toppager="#"+t.p.toppager,$(i.topDiv).insertBefore(i.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(i.width),ri(t.p.toppager,"_t"));t.p.footerrow&&(i.sDiv=$("<div class='ui-jqgrid-sdiv'><\/div>")[0],nt=$("<div class='ui-jqgrid-hbox"+(e=="rtl"?"-rtl":"")+"'><\/div>"),$(i.sDiv).append(nt).insertAfter(i.hDiv).width(i.width),$(nt).append(ot),i.footers=$(".ui-jqgrid-ftable",i.sDiv)[0].rows[0].cells,t.p.rownumbers&&(i.footers[0].className="ui-state-default jqgrid-rownum"),s&&$(i.sDiv).hide());t.p.caption?(li=t.p.datatype,t.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",i.cDiv).click(function(n){var r=$.isFunction(t.p.onHeaderClick);return t.p.gridstate=="visible"?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+t.p.id).slideUp("fast"),t.p.pager&&$(t.p.pager).slideUp("fast"),t.p.toppager&&$(t.p.toppager).slideUp("fast"),t.p.toolbar[0]===!0&&(t.p.toolbar[1]=="both"&&$(i.ubDiv).slideUp("fast"),$(i.uDiv).slideUp("fast")),t.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+t.p.id).slideUp("fast"),$("span",this).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),t.p.gridstate="hidden",$("#gbox_"+t.p.id).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+t.p.id).hide(),r&&(s||t.p.onHeaderClick.call(t,t.p.gridstate,n))):t.p.gridstate=="hidden"&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+t.p.id).slideDown("fast"),t.p.pager&&$(t.p.pager).slideDown("fast"),t.p.toppager&&$(t.p.toppager).slideDown("fast"),t.p.toolbar[0]===!0&&(t.p.toolbar[1]=="both"&&$(i.ubDiv).slideDown("fast"),$(i.uDiv).slideDown("fast")),t.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+t.p.id).slideDown("fast"),$("span",this).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),s&&(t.p.datatype=li,c(),s=!1),t.p.gridstate="visible",$("#gbox_"+t.p.id).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+t.p.id).show(),r&&t.p.onHeaderClick.call(t,t.p.gridstate,n)),!1}),s&&(t.p.datatype="local",$(".ui-jqgrid-titlebar-close",i.cDiv).trigger("click")))):$(i.cDiv).hide();$(i.hDiv).after(i.bDiv).mousemove(function(n){if(i.resizing)return i.dragMove(n),!1});$(".ui-jqgrid-labels",i.hDiv).bind("selectstart",function(){return!1});$(document).mouseup(function(){return i.resizing?(i.dragEnd(),!1):!0});this.updateColumns=function(){var n=this.rows[0],t=this;return n&&($("td",n).each(function(n){$(this).css("width",t.grid.headers[n].width+"px")}),this.grid.cols=n.cells),this};t.formatCol=b;t.sortData=ui;t.updatepager=it;t.formatter=function(n,t,i,r,u){return dt(n,t,i,r,u)};$.extend(i,{populate:c,emptyRows:k});this.grid=i;t.addXmlData=function(n){lt(n,t.grid.bDiv)};t.addJSONData=function(n){at(n,t.grid.bDiv)};c();t.p.hiddengrid=!1;$(window).unload(function(){t=null})}})};$.jgrid.extend({getGridParam:function(n){var t=this[0];if(t.grid)return n?typeof t.p[n]!="undefined"?t.p[n]:null:t.p},setGridParam:function(n){return this.each(function(){this.grid&&typeof n=="object"&&$.extend(!0,this.p,n)})},getDataIDs:function(){var i=[],n=0,t;return this.each(function(){if(t=this.rows.length,t&&t>0)while(n<t)i[n]=this.rows[n].id,n++}),i},setSelection:function(n,t){return this.each(function(){function s(n){var u=$(i.grid.bDiv)[0].clientHeight,t=$(i.grid.bDiv)[0].scrollTop,r=i.rows[n].offsetTop,f=i.rows[n].clientHeight;r+f>=u+t?$(i.grid.bDiv)[0].scrollTop=r-(u+t)+f+t:r<u+t&&r<t&&($(i.grid.bDiv)[0].scrollTop=r)}var i=this,u,r,f,e,o;n!==undefined&&(t=t===!1?!1:!0,r=i.rows.namedItem(n+""),r)&&(i.p.scrollrows===!0&&(f=i.rows.namedItem(n).rowIndex,f>=0&&s(f)),i.p.multiselect?(i.p.selrow=r.id,e=$.inArray(i.p.selrow,i.p.selarrrow),e===-1?(r.className!=="ui-subgrid"&&$(r).addClass("ui-state-highlight").attr("aria-selected","true"),u=!0,$("#jqg_"+$.jgrid.jqID(i.p.selrow),i.rows[r.rowIndex]).attr("checked",u),i.p.selarrrow.push(i.p.selrow),i.p.onSelectRow&&t&&i.p.onSelectRow.call(i,i.p.selrow,u)):(r.className!=="ui-subgrid"&&$(r).removeClass("ui-state-highlight").attr("aria-selected","false"),u=!1,$("#jqg_"+$.jgrid.jqID(i.p.selrow),i.rows[r.rowIndex]).attr("checked",u),i.p.selarrrow.splice(e,1),i.p.onSelectRow&&t&&i.p.onSelectRow.call(i,i.p.selrow,u),o=i.p.selarrrow[0],i.p.selrow=o===undefined?null:o)):r.className!=="ui-subgrid"&&(i.p.selrow&&$(i.rows.namedItem(i.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),i.p.selrow=r.id,$(r).addClass("ui-state-highlight").attr("aria-selected","true"),i.p.onSelectRow&&t&&i.p.onSelectRow.call(i,i.p.selrow,!0)))})},resetSelection:function(){return this.each(function(){var n=this,t;n.p.multiselect?($(n.p.selarrrow).each(function(i,r){t=n.rows.namedItem(r);$(t).removeClass("ui-state-highlight").attr("aria-selected","false");$("#jqg_"+$.jgrid.jqID(r),t).attr("checked",!1)}),$("#cb_"+$.jgrid.jqID(n.p.id),n.grid.hDiv).attr("checked",!1),n.p.selarrrow=[]):n.p.selrow&&($("tr#"+$.jgrid.jqID(n.p.selrow),n.grid.bDiv).removeClass("ui-state-highlight").attr("aria-selected","false"),n.p.selrow=null);n.p.savedRow=[]})},getRowData:function(n){var t={},i,r=!1,u,f=0;return this.each(function(){var e=this,o,s;if(typeof n=="undefined")r=!0,i=[],u=e.rows.length;else{if(s=e.rows.namedItem(n),!s)return t;u=1}while(f<u)r&&(s=e.rows[f]),$("td",s).each(function(n){if(o=e.p.colModel[n].name,o!=="cb"&&o!=="subgrid")if(e.p.treeGrid===!0&&o==e.p.ExpandColumn)t[o]=$.jgrid.htmlDecode($("span:first",this).html());else try{t[o]=$.unformat(this,{rowId:s.id,colModel:e.p.colModel[n]},n)}catch(i){t[o]=$.jgrid.htmlDecode($(this).html())}}),f++,r&&(i.push(t),t={})}),i?i:t},delRowData:function(n){var t=!1,i,r,u;return this.each(function(){var f=this,e;if(i=f.rows.namedItem(n),i)u=i.rowIndex,$(i).remove(),f.p.records--,f.p.reccount--,f.updatepager(!0,!1),t=!0,f.p.multiselect&&(r=$.inArray(n,f.p.selarrrow),r!=-1&&f.p.selarrrow.splice(r,1)),n==f.p.selrow&&(f.p.selrow=null);else return!1;u===0&&t&&f.updateColumns();f.p.altRows===!0&&t&&(e=f.p.altclass,$(f.rows).each(function(n){n%2==1?$(this).addClass(e):$(this).removeClass(e)}))}),t},setRowData:function(n,t,i){var r,f=!1,u;return this.each(function(){var o=this,s,e,h=typeof i;if(!o.grid||(e=o.rows.namedItem(n),!e))return!1;t&&$(this.p.colModel).each(function(i){r=this.name;t[r]!==undefined&&(s=o.formatter(n,t[r],i,t,"edit"),u=this.title?{title:$.jgrid.stripHtml(s)}:{},o.p.treeGrid===!0&&r==o.p.ExpandColumn?$("td:eq("+i+") > span:first",e).html(s).attr(u):$("td:eq("+i+")",e).html(s).attr(u),f=!0)});h==="string"?$(e).addClass(i):h==="object"&&$(e).css(i)}),f},addRowData:function(n,t,i,r){i||(i="last");var b=!1,w,u,o,p,e,f,s,l,h="",a,v,y,c;return t&&($.isArray(t)?(a=!0,i="last",v=n):(t=[t],a=!1),this.each(function(){var k=this,nt=t.length;e=k.p.rownumbers===!0?1:0;o=k.p.multiselect===!0?1:0;p=k.p.subGrid===!0?1:0;a||(typeof n!="undefined"?n=n+"":(n=k.p.records+1+"",k.p.keyIndex!==!1&&(v=k.p.colModel[k.p.keyIndex+o+p+e].name,typeof t[0][v]!="undefined"&&(n=t[0][v]))));y=k.p.altclass;for(var d=0,g="",tt=$.isFunction(k.p.afterInsertRow)?!0:!1;d<nt;){if(c=t[d],u="",a){try{n=c[v]}catch(it){n=k.p.records+1}g=k.p.altRows===!0?(k.rows.length-1)%2==0?y:"":""}for(e&&(h=k.formatCol(e,1,""),u+='<td role="gridcell" aria-describedby="'+k.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+h+">0<\/td>"),o&&(l='<input role="checkbox" type="checkbox" id="jqg_'+n+'" class="cbox"/>',h=k.formatCol(e,1,""),u+='<td role="gridcell" aria-describedby="'+k.p.id+'_cb" '+h+">"+l+"<\/td>"),p&&(u+=$(k).jqGrid("addSubGridCell",o+e,1)),s=o+p+e;s<this.p.colModel.length;s++)w=this.p.colModel[s].name,l=k.formatter(n,c[w],s,c,"add"),h=k.formatCol(s,1,l),u+='<td role="gridcell" aria-describedby="'+k.p.id+"_"+w+'" '+h+">"+l+"<\/td>";if(u='<tr id="'+n+'" role="row" class="ui-widget-content jqgrow ui-row-'+k.p.direction+" "+g+'">'+u+"<\/tr>",k.p.subGrid===!0&&(u=$(u)[0],$(k).jqGrid("addSubGrid",u,o+e)),k.rows.length===0)$("table:first",k.grid.bDiv).append(u);else switch(i){case"last":$(k.rows[k.rows.length-1]).after(u);break;case"first":$(k.rows[0]).before(u);break;case"after":f=k.rows.namedItem(r);f&&($(k.rows[f.rowIndex+1]).hasClass("ui-subgrid")?$(k.rows[f.rowIndex+1]).after(u):$(f).after(u));break;case"before":f=k.rows.namedItem(r);f&&($(f).before(u),f=f.rowIndex)}k.p.records++;k.p.reccount++;k.grid.cols&&k.grid.cols.length||(k.grid.cols=k.rows[0].cells);(i==="first"||i==="before"&&f<=1||k.rows.length===1)&&k.updateColumns();tt&&k.p.afterInsertRow.call(k,n,c,c);d++}k.p.altRows!==!0||a||(i=="last"?(k.rows.length-1)%2==1&&$(k.rows[k.rows.length-1]).addClass(y):$(k.rows).each(function(n){n%2==1?$(this).addClass(y):$(this).removeClass(y)}));k.updatepager(!0,!0);b=!0})),b},footerData:function(n,t,i){function o(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}var r,u=!1,f={},e;return typeof n=="undefined"&&(n="get"),typeof i!="boolean"&&(i=!0),n=n.toLowerCase(),this.each(function(){var s=this,h;if(!s.grid||!s.p.footerrow||n=="set"&&o(t))return!1;u=!0;$(this.p.colModel).each(function(o){r=this.name;n=="set"?t[r]!==undefined&&(h=i?s.formatter("",t[r],o,t,"edit"):t[r],e=this.title?{title:$.jgrid.stripHtml(h)}:{},$("tr.footrow td:eq("+o+")",s.grid.sDiv).html(h).attr(e),u=!0):n=="get"&&(f[r]=$("tr.footrow td:eq("+o+")",s.grid.sDiv).html())})}),n=="get"?f:u},ShowHideCol:function(n,t){return this.each(function(){var i=this,u=!1,r;i.grid&&(typeof n=="string"&&(n=[n]),t=t!="none"?"":"none",r=t==""?!0:!1,$(this.p.colModel).each(function(f){$.inArray(this.name,n)!==-1&&this.hidden===r&&($("tr",i.grid.hDiv).each(function(){$("th:eq("+f+")",this).css("display",t)}),$(i.rows).each(function(n){$("td:eq("+f+")",i.rows[n]).css("display",t)}),i.p.footerrow&&$("td:eq("+f+")",i.grid.sDiv).css("display",t),t=="none"?i.p.tblwidth-=this.width:i.p.tblwidth+=this.width,this.hidden=!r,u=!0)}),u===!0&&($("table:first",i.grid.hDiv).width(i.p.tblwidth),$("table:first",i.grid.bDiv).width(i.p.tblwidth),i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft,i.p.footerrow&&($("table:first",i.grid.sDiv).width(i.p.tblwidth),i.grid.sDiv.scrollLeft=i.grid.bDiv.scrollLeft)))})},hideCol:function(n){return this.each(function(){$(this).jqGrid("ShowHideCol",n,"none")})},showCol:function(n){return this.each(function(){$(this).jqGrid("ShowHideCol",n,"")})},remapColumns:function(n,t,i){function u(t){var i;i=t.length?$.makeArray(t):$.extend({},t);$.each(n,function(n){t[n]=i[this]})}function f(t,i){$(">tr"+(i||""),t).each(function(){var t=this,i=$.makeArray(t.cells);$.each(n,function(){var n=i[this];n&&t.appendChild(n)})})}var r=this.get(0);u(r.p.colModel);u(r.p.colNames);u(r.grid.headers);f($("thead:first",r.grid.hDiv),i&&":not(.ui-jqgrid-labels)");t&&f($("tbody:first",r.grid.bDiv),".jqgrow");r.p.footerrow&&f($("tbody:first",r.grid.sDiv));r.p.remapColumns&&(r.p.remapColumns.length?u(r.p.remapColumns):r.p.remapColumns=$.makeArray(n));r.p.lastsort=$.inArray(r.p.lastsort,n);r.p.treeGrid&&(r.p.expColInd=$.inArray(r.p.expColInd,n))},setGridWidth:function(n,t){return this.each(function(){var i=this,r,u=0,e=i.p.cellLayout,f,o=0,y=!1,c=i.p.scrollOffset,l,s=0,a=0,p=0,h,v,w;if(i.grid&&(typeof t!="boolean"&&(t=i.p.shrinkToFit),!isNaN(n))&&(n=parseInt(n,10),i.grid.width=i.p.width=n,$("#gbox_"+i.p.id).css("width",n+"px"),$("#gview_"+i.p.id).css("width",n+"px"),$(i.grid.bDiv).css("width",n+"px"),$(i.grid.hDiv).css("width",n+"px"),i.p.pager&&$(i.p.pager).css("width",n+"px"),i.p.toppager&&$(i.p.toppager).css("width",n+"px"),i.p.toolbar[0]===!0&&($(i.grid.uDiv).css("width",n+"px"),i.p.toolbar[1]=="both"&&$(i.grid.ubDiv).css("width",n+"px")),i.p.footerrow&&$(i.grid.sDiv).css("width",n+"px"),t===!1&&i.p.forceFit===!0&&(i.p.forceFit=!1),t===!0)){if($.browser.safari&&(e=0),$.each(i.p.colModel,function(){this.hidden===!1&&(u+=parseInt(this.width,10),this.fixed?(a+=this.width,s+=this.width+e):o++,p++)}),o===0)return;i.p.tblwidth=u;l=n-e*o-s;isNaN(i.p.height)||$(i.grid.bDiv)[0].clientHeight<$(i.grid.bDiv)[0].scrollHeight&&(y=!0,l-=c);u=0;v=i.grid.cols.length>0;$.each(i.p.colModel,function(n){if(this.hidden===!1&&!this.fixed){if(r=Math.round(l*this.width/(i.p.tblwidth-a)),r<0)return;this.width=r;u+=r;i.grid.headers[n].width=r;i.grid.headers[n].el.style.width=r+"px";i.p.footerrow&&(i.grid.footers[n].style.width=r+"px");v&&(i.grid.cols[n].style.width=r+"px");f=n}});h=0;y?n-s-(u+e*o)!==c&&(h=n-s-(u+e*o)-c):Math.abs(n-s-(u+e*o))!==1&&(h=n-s-(u+e*o));i.p.colModel[f].width+=h;i.p.tblwidth=u+h+a+e*p;i.p.tblwidth>n?(w=i.p.tblwidth-parseInt(n,10),i.p.tblwidth=n,r=i.p.colModel[f].width=i.p.colModel[f].width-w):r=i.p.colModel[f].width;i.grid.headers[f].width=r;i.grid.headers[f].el.style.width=r+"px";v&&(i.grid.cols[f].style.width=r+"px");$("table:first",i.grid.bDiv).css("width",i.p.tblwidth+"px");$("table:first",i.grid.hDiv).css("width",i.p.tblwidth+"px");i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft;i.p.footerrow&&(i.grid.footers[f].style.width=r+"px",$("table:first",i.grid.sDiv).css("width",i.p.tblwidth+"px"))}})},setGridHeight:function(n){return this.each(function(){var t=this;t.grid&&($(t.grid.bDiv).css({height:n+(isNaN(n)?"":"px")}),t.p.height=n,t.p.scroll&&t.grid.populateVisible())})},setCaption:function(n){return this.each(function(){this.p.caption=n;$("span.ui-jqgrid-title",this.grid.cDiv).html(n);$(this.grid.cDiv).show()})},setLabel:function(n,t,i,r){return this.each(function(){var e=this,f=-1,u,o;e.grid&&(isNaN(n)?$(e.p.colModel).each(function(t){if(this.name==n)return f=t,!1}):f=parseInt(n,10),f>=0&&(u=$("tr.ui-jqgrid-labels th:eq("+f+")",e.grid.hDiv),t&&(o=$(".s-ico",u),$("[id^=jqgh_]",u).empty().html(t).append(o),e.p.colNames[f]=t),i&&(typeof i=="string"?$(u).addClass(i):$(u).css(i)),typeof r=="object"&&$(u).attr(r)))})},setCell:function(n,t,i,r,u,f){return this.each(function(){var o=this,s=-1,h,l,c,e;o.grid&&(isNaN(t)?$(o.p.colModel).each(function(n){if(this.name==t)return s=n,!1}):s=parseInt(t,10),s>=0&&(c=o.rows.namedItem(n),c&&(e=$("td:eq("+s+")",c),(i!==""||f===!0)&&(h=o.formatter(n,i,s,c,"edit"),l=o.p.colModel[s].title?{title:$.jgrid.stripHtml(h)}:{},o.p.treeGrid&&$(".tree-wrap",$(e)).length>0?$("span",$(e)).html(h).attr(l):$(e).html(h).attr(l)),typeof r=="string"?$(e).addClass(r):r&&$(e).css(r),typeof u=="object"&&$(e).attr(u))))})},getCell:function(n,t){var i=!1;return this.each(function(){var f=this,r=-1,u;if(f.grid&&(isNaN(t)?$(f.p.colModel).each(function(n){if(this.name===t)return r=n,!1}):r=parseInt(t,10),r>=0&&(u=f.rows.namedItem(n),u)))try{i=$.unformat($("td:eq("+r+")",u),{rowId:u.id,colModel:f.p.colModel[r]},r)}catch(e){i=$.jgrid.htmlDecode($("td:eq("+r+")",u).html())}}),i},getCol:function(n,t,i){var r=[],u,f=0;return t=typeof t!="boolean"?!1:t,typeof i=="undefined"&&(i=!1),this.each(function(){var e=this,s=-1,h,o;if(e.grid&&(isNaN(n)?$(e.p.colModel).each(function(t){if(this.name===n)return s=t,!1}):s=parseInt(n,10),s>=0&&(h=e.rows.length,o=0,h&&h>0))){while(o<h){try{u=$.unformat($(e.rows[o].cells[s]),{rowId:e.rows[o].id,colModel:e.p.colModel[s]},s)}catch(c){u=$.jgrid.htmlDecode(e.rows[o].cells[s].innerHTML)}i?f+=parseFloat(u):t?r.push({id:e.rows[o].id,value:u}):r[o]=u;o++}if(i)switch(i.toLowerCase()){case"sum":r=f;break;case"avg":r=f/h;break;case"count":r=h}}}),r},clearGridData:function(n){return this.each(function(){var t=this;t.grid&&(typeof n!="boolean"&&(n=!1),$("tbody:first tr",t.grid.bDiv).remove(),t.p.footerrow&&n&&$(".ui-jqgrid-ftable td",t.grid.sDiv).html("&#160;"),t.p.selrow=null,t.p.selarrrow=[],t.p.savedRow=[],t.p.records=0,t.p.page="0",t.p.lastpage="0",t.p.reccount=0,t.updatepager(!0,!1))})},getInd:function(n,t){var r=!1,i;return this.each(function(){i=this.rows.namedItem(n);i&&(r=t===!0?i:i.rowIndex)}),r}})})(jQuery);var showModal=function(n){n.w.show()},closeModal=function(n){n.w.hide().attr("aria-hidden","true");n.o&&n.o.remove()},hideModal=function(n,t){if(t=jQuery.extend({jqm:!0,gb:""},t||{}),t.onClose){var i=t.onClose(n);if(typeof i=="boolean"&&!i)return}if(jQuery.fn.jqm&&t.jqm===!0)jQuery(n).attr("aria-hidden","true").jqmHide();else{if(t.gb!="")try{jQuery(".jqgrid-overlay:first",t.gb).hide()}catch(r){}jQuery(n).hide().attr("aria-hidden","true")}};createModal=function(n,t,i,r,u,f){var e=document.createElement("div"),a,o,h,c,s,l,v;if(a=jQuery(i.gbox).attr("dir")=="rtl"?!0:!1,e.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",e.id=n.themodal,o=document.createElement("div"),o.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",o.id=n.modalhead,jQuery(o).append("<span class='ui-jqdialog-title'>"+i.caption+"<\/span>"),h=jQuery("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'><\/a>").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'><\/span>"),jQuery(o).append(h),a?(e.dir="rtl",jQuery(".ui-jqdialog-title",o).css("float","right"),jQuery(".ui-jqdialog-titlebar-close",o).css("left",.3+"em")):(e.dir="ltr",jQuery(".ui-jqdialog-title",o).css("float","left"),jQuery(".ui-jqdialog-titlebar-close",o).css("right",.3+"em")),c=document.createElement("div"),jQuery(c).addClass("ui-jqdialog-content ui-widget-content").attr("id",n.modalcontent),jQuery(c).append(t),e.appendChild(c),jQuery(e).prepend(o),f===!0?jQuery("body").append(e):jQuery(e).insertBefore(r),typeof i.jqModal=="undefined"&&(i.jqModal=!0),s={},jQuery.fn.jqm&&i.jqModal===!0?(i.left===0&&i.top===0&&(l=[],l=findPos(u),i.left=l[0]+4,i.top=l[1]+4),s.top=i.top+"px",s.left=i.left):(i.left!==0||i.top!==0)&&(s.left=i.left,s.top=i.top+"px"),jQuery("a.ui-jqdialog-titlebar-close",o).click(function(){var t=jQuery("#"+n.themodal).data("onClose")||i.onClose,r=jQuery("#"+n.themodal).data("gbox")||i.gbox;return hideModal("#"+n.themodal,{gb:r,jqm:i.jqModal,onClose:t}),!1}),i.width!==0&&i.width||(i.width=300),i.height!==0&&i.height||(i.height=200),i.zIndex||(i.zIndex=950),v=0,a&&s.left&&!f&&(v=jQuery(i.gbox).width()-(isNaN(i.width)?0:parseInt(i.width,10))-8,s.left=parseInt(s.left,10)+parseInt(v,10)),s.left&&(s.left+="px"),jQuery(e).css(jQuery.extend({width:isNaN(i.width)?"auto":i.width+"px",height:isNaN(i.height)?"auto":i.height+"px",zIndex:i.zIndex,overflow:"hidden"},s)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":n.modalhead,"aria-hidden":"true"}),typeof i.drag=="undefined"&&(i.drag=!0),typeof i.resize=="undefined"&&(i.resize=!0),i.drag)if(jQuery(o).css("cursor","move"),jQuery.fn.jqDrag)jQuery(e).jqDrag(o);else try{jQuery(e).draggable({handle:jQuery("#"+o.id)})}catch(y){}if(i.resize)if(jQuery.fn.jqResize)jQuery(e).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'><\/div>"),jQuery("#"+n.themodal).jqResize(".jqResize",n.scrollelm?"#"+n.scrollelm:!1);else try{jQuery(e).resizable({handles:"se, sw",alsoResize:n.scrollelm?"#"+n.scrollelm:!1})}catch(y){}i.closeOnEscape===!0&&jQuery(e).keydown(function(t){if(t.which==27){var r=jQuery("#"+n.themodal).data("onClose")||i.onClose;hideModal(this,{gb:i.gbox,jqm:i.jqModal,onClose:r})}})};viewModal=function(n,t){if(t=jQuery.extend({toTop:!0,overlay:10,modal:!1,onShow:showModal,onHide:closeModal,gbox:"",jqm:!0,jqM:!0},t||{}),jQuery.fn.jqm&&t.jqm===!0)t.jqM?jQuery(n).attr("aria-hidden","false").jqm(t).jqmShow():jQuery(n).attr("aria-hidden","false").jqmShow();else{t.gbox!=""&&(jQuery(".jqgrid-overlay:first",t.gbox).show(),jQuery(n).data("gbox",t.gbox));jQuery(n).show().attr("aria-hidden","false");try{jQuery(":input:visible",n)[0].focus()}catch(i){}}},function(n){var t=null;n.jgrid.extend({searchGrid:function(t){return t=n.extend({recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,multipleSearch:!1,cloneSearchRowOnAdd:!0,sopt:null,stringResult:undefined,onClose:null,useDataProxy:!1,overlay:!0},n.jgrid.search,t||{}),this.each(function(){function a(t,i){var r=t.p.postData[i.sFilter];if(typeof r=="string"&&(r=n.jgrid.parse(r)),r&&(r.groupOp&&t.SearchFilter.setGroupOp(r.groupOp),r.rules))for(var u,f=0,o=r.rules.length,e=!1;f<o;f++)u=r.rules[f],u.field!==undefined&&u.op!==undefined&&u.data!==undefined&&(e=t.SearchFilter.setFilter({sfref:t.SearchFilter.$.find(".sf:last"),filter:n.extend({},u)}),e&&t.SearchFilter.add())}function p(r){var o=r!==undefined,e=n("#"+u.p.id),f={};t.multipleSearch===!1?(f[t.sField]=r.rules[0].field,f[t.sValue]=r.rules[0].data,f[t.sOper]=r.rules[0].op):f[t.sFilter]=r;e[0].p.search=o;n.extend(e[0].p.postData,f);e.trigger("reloadGrid",[{page:1}]);t.closeAfterSearch&&s(n("#"+i))}function w(r){var o=r!==undefined,e=n("#"+u.p.id),f=[];e[0].p.search=o;t.multipleSearch===!1?f[t.sField]=f[t.sValue]=f[t.sOper]="":f[t.sFilter]="";n.extend(e[0].p.postData,f);e.trigger("reloadGrid",[{page:1}]);t.closeAfterReset&&s(n("#"+i))}function s(i){if(t.onClose){var r=t.onClose(i);if(typeof r=="boolean"&&!r)return}i.hide();t.overlay===!0&&n(".jqgrid-overlay:first","#gbox_"+u.p.id).hide()}function l(){var r=n(".ui-searchFilter").length,f;r>1&&(f=n("#"+i).css("zIndex"),n("#"+i).css({zIndex:parseInt(f,10)+r}));n("#"+i).show();t.overlay===!0&&n(".jqgrid-overlay:first","#gbox_"+u.p.id).show();try{n(":input:visible","#"+i)[0].focus()}catch(e){}}var u=this,i;if(u.grid&&n.fn.searchFilter)if(i="fbox_"+u.p.id,t.recreateFilter===!0&&n("#"+i).remove(),n("#"+i).html()!=null)n.isFunction(t.beforeShowSearch)&&t.beforeShowSearch(n("#"+i)),l(),n.isFunction(t.afterShowSearch)&&t.afterShowSearch(n("#"+i));else{var h=[],v=n("#"+u.p.id).jqGrid("getGridParam","colNames"),y=n("#"+u.p.id).jqGrid("getGridParam","colModel"),e=["eq","ne","lt","le","gt","ge","bw","bn","in","ni","ew","en","cn","nc"],r,o,f,c=[];if(t.sopt!==null)for(f=0,r=0;r<t.sopt.length;r++)(o=n.inArray(t.sopt[r],e))!=-1&&(c[f]={op:t.sopt[r],text:t.odata[o]},f++);else for(r=0;r<e.length;r++)c[r]={op:e[r],text:t.odata[r]};if(n.each(y,function(i,u){var p=typeof u.search=="undefined"?!0:u.search,w=u.hidden===!0,s=n.extend({},{text:v[i],itemval:u.index||u.name},this.searchoptions),b=s.searchhidden===!0,c,a,y,l;if(typeof s.sopt!="undefined"&&(f=0,s.ops=[],s.sopt.length>0))for(r=0;r<s.sopt.length;r++)(o=n.inArray(s.sopt[r],e))!=-1&&(s.ops[f]={op:s.sopt[r],text:t.odata[o]},f++);if(typeof this.stype=="undefined"&&(this.stype="text"),this.stype=="select"&&s.dataUrl===undefined&&(s.value?c=s.value:this.editoptions&&(c=this.editoptions.value),c))if(s.dataValues=[],typeof c=="string")for(a=c.split(";"),r=0;r<a.length;r++)y=a[r].split(":"),s.dataValues[r]={value:y[0],text:y[1]};else if(typeof c=="object"){r=0;for(l in c)c.hasOwnProperty(l)&&(s.dataValues[r]={value:l,text:c[l]},r++)}(b&&p||p&&!w)&&h.push(s)}),h.length>0){if(n("<div id='"+i+"' role='dialog' tabindex='-1'><\/div>").insertBefore("#gview_"+u.p.id),t.stringResult===undefined&&(t.stringResult=t.multipleSearch),u.SearchFilter=n("#"+i).searchFilter(h,{groupOps:t.groupOps,operators:c,onClose:s,resetText:t.Reset,searchText:t.Find,windowTitle:t.caption,rulesText:t.rulesText,matchText:t.matchText,onSearch:p,onReset:w,stringResult:t.stringResult,ajaxSelectOptions:n.extend({},n.jgrid.ajaxOptions,u.p.ajaxSelectOptions||{}),clone:t.cloneSearchRowOnAdd}),n(".ui-widget-overlay","#"+i).remove(),u.p.direction=="rtl"&&n(".ui-closer","#"+i).css("float","left"),t.drag===!0)if(n("#"+i+" table thead tr:first td:first").css("cursor","move"),jQuery.fn.jqDrag)n("#"+i).jqDrag(n("#"+i+" table thead tr:first td:first"));else try{n("#"+i).draggable({handle:n("#"+i+" table thead tr:first td:first")})}catch(b){}if(t.multipleSearch===!1&&(n(".ui-del, .ui-add, .ui-del, .ui-add-last, .matchText, .rulesText","#"+i).hide(),n("select[name='groupOp']","#"+i).hide()),t.multipleSearch===!0&&t.loadDefaults===!0&&a(u,t),n.isFunction(t.onInitializeSearch))t.onInitializeSearch(n("#"+i));n.isFunction(t.beforeShowSearch)&&t.beforeShowSearch(n("#"+i));l();n.isFunction(t.afterShowSearch)&&t.afterShowSearch(n("#"+i));t.closeOnEscape===!0&&n("#"+i).keydown(function(t){t.which==27&&s(n("#"+i))})}}})},editGridRow:function(i,r){return r=n.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:!1,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0},n.jgrid.edit,r||{}),t=r,this.each(function(){function vt(t,i){t===0?n("#pData","#"+f+"_2").addClass("ui-state-disabled"):n("#pData","#"+f+"_2").removeClass("ui-state-disabled");t==i?n("#nData","#"+f+"_2").addClass("ui-state-disabled"):n("#nData","#"+f+"_2").removeClass("ui-state-disabled")}function yt(){var t=n(e).jqGrid("getDataIDs"),i=n("#id_g","#"+f).val(),r=n.inArray(i,t);return[r,t]}function l(){var i=!0;return n("#FormError","#"+f).hide(),t.checkOnUpdate&&(u={},c={},dt(),d=n.extend({},u,c),g=gt(d,t._savedData),g&&(n("#"+o).data("disabled",!0),n(".confirm","#"+s.themodal).show(),i=!1)),i}function dt(){return n(".FormElement","#"+f).each(function(){var r=n(".customelement",this),o,t,s,i;if(r.length)o=r[0],t=o.name,n.each(e.p.colModel,function(){if(this.name==t&&this.editoptions&&n.isFunction(this.editoptions.custom_value)){try{if(u[t]=this.editoptions.custom_value(n("#"+t,"#"+f),"get"),u[t]===undefined)throw"e1";}catch(i){i=="e1"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,i.message,jQuery.jgrid.edit.bClose)}return!0}});else{switch(n(this).get(0).type){case"checkbox":n(this).attr("checked")?u[this.name]=n(this).val():(s=n(this).attr("offval"),u[this.name]=s);break;case"select-one":u[this.name]=n("option:selected",this).val();c[this.name]=n("option:selected",this).text();break;case"select-multiple":u[this.name]=n(this).val();u[this.name]=u[this.name]?u[this.name].join(","):"";i=[];n("option:selected",this).each(function(t,r){i[t]=n(r).text()});c[this.name]=i.join(",");break;case"password":case"text":case"textarea":case"button":u[this.name]=n(this).val()}e.p.autoencode&&(u[this.name]=n.jgrid.htmlEncode(u[this.name]))}}),!0}function ri(i,r,u,f){for(var y,s,v,h,c=0,o,p,l,w=[],a=!1,b="",k=1;k<=f;k++)b+="<td class='CaptionTD ui-widget-content'>&#160;<\/td><td class='DataTD ui-widget-content' style='white-space:pre'>&#160;<\/td>";return i!="_empty"&&(a=n(r).jqGrid("getInd",i)),n(r.p.colModel).each(function(y){var nt;if(s=this.name,v=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,p=v?"style='display:none'":"",s!=="cb"&&s!=="subgrid"&&this.editable===!0&&s!=="rn"){if(a===!1)o="";else if(s==r.p.ExpandColumn&&r.p.treeGrid===!0)o=n("td:eq("+y+")",r.rows[a]).text();else try{o=n.unformat(n("td:eq("+y+")",r.rows[a]),{rowId:i,colModel:this},y)}catch(it){o=n("td:eq("+y+")",r.rows[a]).html()}var d=n.extend({},this.editoptions||{},{id:s,name:s}),k=n.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),g=parseInt(k.rowpos,10)||c+1,tt=parseInt((parseInt(k.colpos,10)||1)*2,10);i=="_empty"&&d.defaultValue&&(o=n.isFunction(d.defaultValue)?d.defaultValue():d.defaultValue);this.edittype||(this.edittype="text");e.p.autoencode&&(o=n.jgrid.htmlDecode(o));l=createEl(this.edittype,d,o,!1,n.extend({},n.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));o==""&&this.edittype=="checkbox"&&(o=n(l).attr("offval"));o==""&&this.edittype=="select"&&(o=n("option:eq(0)",l).text());(t.checkOnSubmit||t.checkOnUpdate)&&(t._savedData[s]=o);n(l).addClass("FormElement");h=n(u).find("tr[rowpos="+g+"]");k.rowabove&&(nt=n("<tr><td class='contentinfo' colspan='"+f*2+"'>"+k.rowcontent+"<\/td><\/tr>"),n(u).append(nt),nt[0].rp=g);h.length===0&&(h=n("<tr "+p+" rowpos='"+g+"'><\/tr>").addClass("FormData").attr("id","tr_"+s),n(h).append(b),n(u).append(h),h[0].rp=g);n("td:eq("+(tt-2)+")",h[0]).html(typeof k.label=="undefined"?r.p.colNames[y]:k.label);n("td:eq("+(tt-1)+")",h[0]).append(k.elmprefix).append(l).append(k.elmsuffix);w[c]=y;c++}}),c>0&&(y=n("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(f*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+r.p.id+"_id' value='"+i+"'/><\/td><\/tr>"),y[0].rp=c+999,n(u).append(y),(t.checkOnSubmit||t.checkOnUpdate)&&(t._savedData[r.p.id+"_id"]=i)),w}function ft(i,r,u){var o,p=0,s,h,a,l,v,c,y;if((t.checkOnSubmit||t.checkOnUpdate)&&(t._savedData={},t._savedData[r.p.id+"_id"]=i),c=r.p.colModel,i=="_empty"){n(c).each(function(){o=this.name;a=n.extend({},this.editoptions||{});h=n("#"+n.jgrid.jqID(o),"#"+u);h[0]!=null&&(l="",a.defaultValue?(l=n.isFunction(a.defaultValue)?a.defaultValue():a.defaultValue,h[0].type=="checkbox"?(v=l.toLowerCase(),v.search(/(false|0|no|off|undefined)/i)<0&&v!==""?(h[0].checked=!0,h[0].defaultChecked=!0,h[0].value=l):h.attr({checked:"",defaultChecked:""})):h.val(l)):h[0].type=="checkbox"?(h[0].checked=!1,h[0].defaultChecked=!1,l=n(h).attr("offval")):h[0].type.substr(0,6)=="select"?h[0].selectedIndex=0:h.val(l),(t.checkOnSubmit===!0||t.checkOnUpdate)&&(t._savedData[o]=l))});n("#id_g","#"+u).val(i);return}(y=n(r).jqGrid("getInd",i,!0),y)&&(n("td",y).each(function(f){var h,l,v;if(o=c[f].name,o!=="cb"&&o!=="subgrid"&&o!=="rn"&&c[f].editable===!0){if(o==r.p.ExpandColumn&&r.p.treeGrid===!0)s=n(this).text();else try{s=n.unformat(this,{rowId:i,colModel:c[f]},f)}catch(y){s=n(this).html()}e.p.autoencode&&(s=n.jgrid.htmlDecode(s));(t.checkOnSubmit===!0||t.checkOnUpdate)&&(t._savedData[o]=s);o=n.jgrid.jqID(o);switch(c[f].edittype){case"password":case"text":case"button":case"image":n("#"+o,"#"+u).val(s);break;case"textarea":(s=="&nbsp;"||s=="&#160;"||s.length==1&&s.charCodeAt(0)==160)&&(s="");n("#"+o,"#"+u).val(s);break;case"select":h=s.split(",");h=n.map(h,function(t){return n.trim(t)});n("#"+o+" option","#"+u).each(function(){this.selected=c[f].editoptions.multiple||h[0]!=n.trim(n(this).text())&&h[0]!=n.trim(n(this).val())?c[f].editoptions.multiple?n.inArray(n.trim(n(this).text()),h)>-1||n.inArray(n.trim(n(this).val()),h)>-1?!0:!1:!1:!0});break;case"checkbox":s=s+"";c[f].editoptions&&c[f].editoptions.value?(l=c[f].editoptions.value.split(":"),l[0]==s?(n("#"+o,"#"+u).attr("checked",!0),n("#"+o,"#"+u).attr("defaultChecked",!0)):(n("#"+o,"#"+u).attr("checked",!1),n("#"+o,"#"+u).attr("defaultChecked",""))):(s=s.toLowerCase(),s.search(/(false|0|no|off|undefined)/i)<0&&s!==""?(n("#"+o,"#"+u).attr("checked",!0),n("#"+o,"#"+u).attr("defaultChecked",!0)):(n("#"+o,"#"+u).attr("checked",!1),n("#"+o,"#"+u).attr("defaultChecked","")));break;case"custom":try{if(c[f].editoptions&&n.isFunction(c[f].editoptions.custom_value))v=c[f].editoptions.custom_value(n("#"+o,"#"+u),"set",s);else throw"e1";}catch(a){a=="e1"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,a.message,jQuery.jgrid.edit.bClose)}}p++}}),p>0&&n("#id_g","#"+f).val(i))}function et(){var b,i=[!0,"",""],k={},l=e.p.prmNames,a,v,y,p,w;n.isFunction(t.beforeCheckValues)&&(y=t.beforeCheckValues(u,n("#"+o),u[e.p.id+"_id"]=="_empty"?l.addoper:l.editoper),y&&typeof y=="object"&&(u=y));for(p in u)if(u.hasOwnProperty(p)&&(i=checkValues(u[p],p,e),i[0]===!1))break;i[0]&&(n.isFunction(t.onclickSubmit)&&(k=t.onclickSubmit(t,u)||{}),n.isFunction(t.beforeSubmit)&&(i=t.beforeSubmit(u,n("#"+o))));i[0]&&!t.processing&&(t.processing=!0,n("#sData","#"+f+"_2").addClass("ui-state-active"),v=l.oper,a=l.id,u[v]=n.trim(u[e.p.id+"_id"])=="_empty"?l.addoper:l.editoper,u[v]!=l.addoper?u[a]=u[e.p.id+"_id"]:u[a]===undefined&&(u[a]=u[e.p.id+"_id"]),delete u[e.p.id+"_id"],u=n.extend(u,t.editData,k),w=n.extend({url:t.url?t.url:n(e).jqGrid("getGridParam","editurl"),type:t.mtype,data:n.isFunction(t.serializeEditData)?t.serializeEditData(u):u,complete:function(y,p){if(p!="success"?(i[0]=!1,i[1]=n.isFunction(t.errorTextFormat)?t.errorTextFormat(y):p+" Status: '"+y.statusText+"'. Error code: "+y.status):n.isFunction(t.afterSubmit)&&(i=t.afterSubmit(y,u)),i[0]===!1?(n("#FormError>td","#"+f).html(i[1]),n("#FormError","#"+f).show()):(n.each(e.p.colModel,function(){if(c[this.name]&&this.formatter&&this.formatter=="select")try{delete c[this.name]}catch(n){}}),u=n.extend(u,c),e.p.autoencode&&n.each(u,function(t,i){u[t]=n.jgrid.htmlDecode(i)}),u[v]==l.addoper?(i[2]||(i[2]=parseInt(e.p.records,10)+1),u[a]=i[2],t.closeAfterAdd?(t.reloadAfterSubmit?n(e).trigger("reloadGrid"):(n(e).jqGrid("addRowData",i[2],u,r.addedrow),n(e).jqGrid("setSelection",i[2])),hideModal("#"+s.themodal,{gb:"#gbox_"+h,jqm:r.jqModal,onClose:t.onClose})):t.clearAfterAdd?(t.reloadAfterSubmit?n(e).trigger("reloadGrid"):n(e).jqGrid("addRowData",i[2],u,r.addedrow),ft("_empty",e,o)):t.reloadAfterSubmit?n(e).trigger("reloadGrid"):n(e).jqGrid("addRowData",i[2],u,r.addedrow)):(t.reloadAfterSubmit?(n(e).trigger("reloadGrid"),t.closeAfterEdit||setTimeout(function(){n(e).jqGrid("setSelection",u[a])},1e3)):e.p.treeGrid===!0?n(e).jqGrid("setTreeRow",u[a],u):n(e).jqGrid("setRowData",u[a],u),t.closeAfterEdit&&hideModal("#"+s.themodal,{gb:"#gbox_"+h,jqm:r.jqModal,onClose:t.onClose})),n.isFunction(t.afterComplete)&&(b=y,setTimeout(function(){t.afterComplete(b,u,n("#"+o));b=null},500))),t.processing=!1,(t.checkOnSubmit||t.checkOnUpdate)&&(n("#"+o).data("disabled",!1),t._savedData[e.p.id+"_id"]!="_empty"))for(var w in t._savedData)u[w]&&(t._savedData[w]=u[w]);n("#sData","#"+f+"_2").removeClass("ui-state-active");try{n(":input:visible","#"+o)[0].focus()}catch(k){}},error:function(i,r,u){n("#FormError>td","#"+f).html(r+" : "+u);n("#FormError","#"+f).show();t.processing=!1;n("#"+o).data("disabled",!1);n("#sData","#"+f+"_2").removeClass("ui-state-active")}},n.jgrid.ajaxOptions,t.ajaxEditOptions),w.url||t.useDataProxy||(n.isFunction(e.p.dataProxy)?t.useDataProxy=!0:(i[0]=!1,i[1]+=" "+n.jgrid.errors.nourl)),i[0]&&(t.useDataProxy?e.p.dataProxy.call(e,w,"set_"+e.p.id):n.ajax(w)));i[0]===!1&&(n("#FormError>td","#"+f).html(i[1]),n("#FormError","#"+f).show())}function gt(n,t){var i=!1;for(var r in n)if(n[r]!=t[r]){i=!0;break}return i}var e=this,a,rt,ct,lt,kt,ut,at;if(e.grid&&i){var h=e.p.id,o="FrmGrid_"+h,f="TblGrid_"+h,s={themodal:"editmod"+h,modalhead:"edithd"+h,modalcontent:"editcnt"+h,scrollelm:o},w=n.isFunction(t.beforeShowForm)?t.beforeShowForm:!1,b=n.isFunction(t.afterShowForm)?t.afterShowForm:!1,k=n.isFunction(t.beforeInitData)?t.beforeInitData:!1,pt=n.isFunction(t.onInitializeForm)?t.onInitializeForm:!1,p=1,ot=0,u,c,d,g;if(i=="new"?(i="_empty",r.caption=r.addCaption):r.caption=r.editCaption,r.recreateForm===!0&&n("#"+s.themodal).html()!=null&&n("#"+s.themodal).remove(),a=!0,r.checkOnUpdate&&r.jqModal&&!r.modal&&(a=!1),n("#"+s.themodal).html()!=null)n(".ui-jqdialog-title","#"+s.modalhead).html(r.caption),n("#FormError","#"+f).hide(),t.topinfo?(n(".topinfo","#"+f+"_2").html(t.topinfo),n(".tinfo","#"+f+"_2").show()):n(".tinfo","#"+f+"_2").hide(),t.bottominfo?(n(".bottominfo","#"+f+"_2").html(t.bottominfo),n(".binfo","#"+f+"_2").show()):n(".binfo","#"+f+"_2").hide(),k&&k(n("#"+o)),ft(i,e,o),i!="_empty"&&t.viewPagerButtons?n("#pData, #nData","#"+f+"_2").show():n("#pData, #nData","#"+f+"_2").hide(),t.processing===!0&&(t.processing=!1,n("#sData","#"+f+"_2").removeClass("ui-state-active")),n("#"+o).data("disabled")===!0&&(n(".confirm","#"+s.themodal).hide(),n("#"+o).data("disabled",!1)),w&&w(n("#"+o)),n("#"+s.themodal).data("onClose",t.onClose),viewModal("#"+s.themodal,{gbox:"#gbox_"+h,jqm:r.jqModal,jqM:!1,closeoverlay:a,modal:r.modal}),a||n(".jqmOverlay").click(function(){return l()?(hideModal("#"+s.themodal,{gb:"#gbox_"+h,jqm:r.jqModal,onClose:t.onClose}),!1):!1}),b&&b(n("#"+o));else{n(e.p.colModel).each(function(){var n=this.formoptions;p=Math.max(p,n?n.colpos||0:0);ot=Math.max(ot,n?n.rowpos||0:0)});var ni=isNaN(r.dataheight)?r.dataheight:r.dataheight+"px",v,wt=n("<form name='FormPost' id='"+o+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+ni+";'><\/form>").data("disabled",!1),y=n("<table id='"+f+"' class='EditTable' cellspacing='0' cellpading='0' border='0'><tbody><\/tbody><\/table>");n(wt).append(y);v=n("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+p*2+"'><\/td><\/tr>");v[0].rp=0;n(y).append(v);v=n("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+p*2+"'>"+t.topinfo+"<\/td><\/tr>");v[0].rp=0;n(y).append(v);k&&k(n("#"+o));var nt=e.p.direction=="rtl"?!0:!1,ti=nt?"nData":"pData",ii=nt?"pData":"nData",ui=ri(i,e,y,p),bt="<a href='javascript:void(0)' id='"+ti+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'><\/span><\/div>",tt="<a href='javascript:void(0)' id='"+ii+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'><\/span><\/div>",st="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+r.bSubmit+"<\/a>",ht="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+r.bCancel+"<\/a>",it="<table border='0' class='EditTable' id='"+f+"_2'><tbody><tr id='Act_Buttons'><td class='navButton ui-widget-content'>"+(nt?tt+bt:bt+tt)+"<\/td><td class='EditButton ui-widget-content'>"+st+ht+"<\/td><\/tr>";it+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+t.bottominfo+"<\/td><\/tr>";it+="<\/tbody><\/table>";ot>0&&(rt=[],n.each(n(y)[0].rows,function(n,t){rt[n]=t}),rt.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),n.each(rt,function(t,i){n("tbody",y).append(i)}));r.gbox="#gbox_"+h;ct=!1;r.closeOnEscape===!0&&(r.closeOnEscape=!1,ct=!0);lt=n("<span><\/span>").append(wt).append(it);createModal(s,lt,r,"#gview_"+e.p.id,n("#gview_"+e.p.id)[0]);nt&&(n("#pData, #nData","#"+f+"_2").css("float","right"),n(".EditButton","#"+f+"_2").css("text-align","left"));t.topinfo&&n(".tinfo","#"+f+"_2").show();t.bottominfo&&n(".binfo","#"+f+"_2").show();lt=null;it=null;n("#"+s.themodal).keydown(function(i){var u=i.target;if(n("#"+o).data("disabled")===!0)return!1;if(t.savekey[0]===!0&&i.which==t.savekey[1]&&u.tagName!="TEXTAREA")return n("#sData","#"+f+"_2").trigger("click"),!1;if(i.which===27)return l()?(ct&&hideModal(this,{gb:r.gbox,jqm:r.jqModal,onClose:t.onClose}),!1):!1;if(t.navkeys[0]===!0){if(n("#id_g","#"+f).val()=="_empty")return!0;if(i.which==t.navkeys[1])return n("#pData","#"+f+"_2").trigger("click"),!1;if(i.which==t.navkeys[2])return n("#nData","#"+f+"_2").trigger("click"),!1}});r.checkOnUpdate&&(n("a.ui-jqdialog-titlebar-close span","#"+s.themodal).removeClass("jqmClose"),n("a.ui-jqdialog-titlebar-close","#"+s.themodal).unbind("click").click(function(){return l()?(hideModal("#"+s.themodal,{gb:"#gbox_"+h,jqm:r.jqModal,onClose:t.onClose}),!1):!1}));r.saveicon=n.extend([!0,"left","ui-icon-disk"],r.saveicon);r.closeicon=n.extend([!0,"left","ui-icon-close"],r.closeicon);r.saveicon[0]===!0&&n("#sData","#"+f+"_2").addClass(r.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.saveicon[2]+"'><\/span>");r.closeicon[0]===!0&&n("#cData","#"+f+"_2").addClass(r.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.closeicon[2]+"'><\/span>");(t.checkOnSubmit||t.checkOnUpdate)&&(st="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bYes+"<\/a>",tt="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bNo+"<\/a>",ht="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bExit+"<\/a>",ut=r.zIndex||999,ut++,kt=n.browser.msie&&n.browser.version==6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"><\/iframe>':"",n("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+ut+";display:none;'>&#160;"+kt+"<\/div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(ut+1)+"'>"+r.saveData+"<br/><br/>"+st+tt+ht+"<\/div>").insertAfter("#"+o),n("#sNew","#"+s.themodal).click(function(){return et(),n("#"+o).data("disabled",!1),n(".confirm","#"+s.themodal).hide(),!1}),n("#nNew","#"+s.themodal).click(function(){return n(".confirm","#"+s.themodal).hide(),n("#"+o).data("disabled",!1),setTimeout(function(){n(":input","#"+o)[0].focus()},0),!1}),n("#cNew","#"+s.themodal).click(function(){return n(".confirm","#"+s.themodal).hide(),n("#"+o).data("disabled",!1),hideModal("#"+s.themodal,{gb:"#gbox_"+h,jqm:r.jqModal,onClose:t.onClose}),!1}));pt&&pt(n("#"+o));i!="_empty"&&t.viewPagerButtons?n("#pData,#nData","#"+f+"_2").show():n("#pData,#nData","#"+f+"_2").hide();w&&w(n("#"+o));n("#"+s.themodal).data("onClose",t.onClose);viewModal("#"+s.themodal,{gbox:"#gbox_"+h,jqm:r.jqModal,closeoverlay:a,modal:r.modal});a||n(".jqmOverlay").click(function(){return l()?(hideModal("#"+s.themodal,{gb:"#gbox_"+h,jqm:r.jqModal,onClose:t.onClose}),!1):!1});b&&b(n("#"+o));n(".fm-button","#"+s.themodal).hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")});n("#sData","#"+f+"_2").click(function(){return u={},c={},n("#FormError","#"+f).hide(),dt(),u[e.p.id+"_id"]=="_empty"?et():r.checkOnSubmit===!0?(d=n.extend({},u,c),g=gt(d,t._savedData),g?(n("#"+o).data("disabled",!0),n(".confirm","#"+s.themodal).show()):et()):et(),!1});n("#cData","#"+f+"_2").click(function(){return l()?(hideModal("#"+s.themodal,{gb:"#gbox_"+h,jqm:r.jqModal,onClose:t.onClose}),!1):!1});n("#nData","#"+f+"_2").click(function(){if(!l())return!1;n("#FormError","#"+f).hide();var t=yt();if(t[0]=parseInt(t[0],10),t[0]!=-1&&t[1][t[0]+1]){if(n.isFunction(r.onclickPgButtons))r.onclickPgButtons("next",n("#"+o),t[1][t[0]]);ft(t[1][t[0]+1],e,o);n(e).jqGrid("setSelection",t[1][t[0]+1]);n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons("next",n("#"+o),t[1][t[0]+1]);vt(t[0]+1,t[1].length-1)}return!1});n("#pData","#"+f+"_2").click(function(){if(!l())return!1;n("#FormError","#"+f).hide();var t=yt();if(t[0]!=-1&&t[1][t[0]-1]){if(n.isFunction(r.onclickPgButtons))r.onclickPgButtons("prev",n("#"+o),t[1][t[0]]);ft(t[1][t[0]-1],e,o);n(e).jqGrid("setSelection",t[1][t[0]-1]);n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons("prev",n("#"+o),t[1][t[0]-1]);vt(t[0]-1,t[1].length-1)}return!1})}at=yt();vt(at[0],at[1].length-1)}})},viewGridRow:function(t,i){return i=n.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:!1,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,viewPagerButtons:!0},n.jgrid.view,i||{}),this.each(function(){function l(){(i.closeOnEscape===!0||i.navkeys[0]===!0)&&setTimeout(function(){n(".ui-jqdialog-titlebar-close","#"+o.modalhead).focus()},0)}function b(t,i){t===0?n("#pData","#"+r+"_2").addClass("ui-state-disabled"):n("#pData","#"+r+"_2").removeClass("ui-state-disabled");t==i?n("#nData","#"+r+"_2").addClass("ui-state-disabled"):n("#nData","#"+r+"_2").removeClass("ui-state-disabled")}function k(){var t=n(u).jqGrid("getDataIDs"),i=n("#id_g","#"+r).val(),f=n.inArray(i,t);return[f,t]}function et(t,r,u,f){for(var b,e,s,o,h=0,c,k,d=[],l=!1,tt="<td class='CaptionTD form-view-label ui-widget-content' width='"+i.labelswidth+"'>&#160;<\/td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;<\/td>",g="",it=["integer","number","currency"],a=0,v=0,y,p,nt,w=1;w<=f;w++)g+=w==1?tt:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;<\/td><td class='DataTD form-view-data ui-widget-content'>&#160;<\/td>";return n(r.p.colModel).each(function(){s=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1;s||this.align!=="right"||(this.formatter&&n.inArray(this.formatter,it)!==-1?a=Math.max(a,parseInt(this.width,10)):v=Math.max(v,parseInt(this.width,10)))}),y=a!==0?a:v!==0?v:0,l=n(r).jqGrid("getInd",t),n(r.p.colModel).each(function(t){var w;if(e=this.name,p=!1,s=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,k=s?"style='display:none'":"",nt=typeof this.viewable!="boolean"?!0:this.viewable,e!=="cb"&&e!=="subgrid"&&e!=="rn"&&nt){c=l===!1?"":e==r.p.ExpandColumn&&r.p.treeGrid===!0?n("td:eq("+t+")",r.rows[l]).text():n("td:eq("+t+")",r.rows[l]).html();p=this.align==="right"&&y!==0?!0:!1;var b=n.extend({},this.editoptions||{},{id:e,name:e}),i=n.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),a=parseInt(i.rowpos,10)||h+1,v=parseInt((parseInt(i.colpos,10)||1)*2,10);i.rowabove&&(w=n("<tr><td class='contentinfo' colspan='"+f*2+"'>"+i.rowcontent+"<\/td><\/tr>"),n(u).append(w),w[0].rp=a);o=n(u).find("tr[rowpos="+a+"]");o.length===0&&(o=n("<tr "+k+" rowpos='"+a+"'><\/tr>").addClass("FormData").attr("id","trv_"+e),n(o).append(g),n(u).append(o),o[0].rp=a);n("td:eq("+(v-2)+")",o[0]).html("<b>"+(typeof i.label=="undefined"?r.p.colNames[t]:i.label)+"<\/b>");n("td:eq("+(v-1)+")",o[0]).append("<span>"+c+"<\/span>").attr("id","v_"+e);p&&n("td:eq("+(v-1)+") span",o[0]).css({"text-align":"right",width:y+"px"});d[h]=t;h++}}),h>0&&(b=n("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(f*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/><\/td><\/tr>"),b[0].rp=h+99,n(u).append(b)),d}function d(t,i){var u,f,s=0,e,h,o;(o=n(i).jqGrid("getInd",t,!0),o)&&(n("td",o).each(function(t){u=i.p.colModel[t].name;f=i.p.colModel[t].editrules&&i.p.colModel[t].editrules.edithidden===!0?!1:i.p.colModel[t].hidden===!0?!0:!1;u!=="cb"&&u!=="subgrid"&&u!=="rn"&&(e=u==i.p.ExpandColumn&&i.p.treeGrid===!0?n(this).text():n(this).html(),h=n.extend({},i.p.colModel[t].editoptions||{}),u=n.jgrid.jqID("v_"+u),n("#"+u+" span","#"+r).html(e),f&&n("#"+u,"#"+r).parents("tr:first").hide(),s++)}),s>0&&n("#id_g","#"+r).val(t))}var u=this,c,y,p,w;if(u.grid&&t){i.imgpath||(i.imgpath=u.p.imgpath);var f=u.p.id,e="ViewGrid_"+f,r="ViewTbl_"+f,o={themodal:"viewmod"+f,modalhead:"viewhd"+f,modalcontent:"viewcnt"+f,scrollelm:e},a=1,v=0;if(n("#"+o.themodal).html()!=null)n(".ui-jqdialog-title","#"+o.modalhead).html(i.caption),n("#FormError","#"+r).hide(),d(t,u),n.isFunction(i.beforeShowForm)&&i.beforeShowForm(n("#"+e)),viewModal("#"+o.themodal,{gbox:"#gbox_"+f,jqm:i.jqModal,jqM:!1,modal:i.modal}),l();else{n(u.p.colModel).each(function(){var n=this.formoptions;a=Math.max(a,n?n.colpos||0:0);v=Math.max(v,n?n.rowpos||0:0)});var it=isNaN(i.dataheight)?i.dataheight:i.dataheight+"px",g=n("<form name='FormPost' id='"+e+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+it+";'><\/form>"),s=n("<table id='"+r+"' class='EditTable' cellspacing='1' cellpading='2' border='0' style='table-layout:fixed'><tbody><\/tbody><\/table>");n(g).append(s);var ot=et(t,u,s,a),h=u.p.direction=="rtl"?!0:!1,rt=h?"nData":"pData",ut=h?"pData":"nData",nt="<a href='javascript:void(0)' id='"+rt+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'><\/span><\/div>",tt="<a href='javascript:void(0)' id='"+ut+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'><\/span><\/div>",ft="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+i.bClose+"<\/a>";v>0&&(c=[],n.each(n(s)[0].rows,function(n,t){c[n]=t}),c.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),n.each(c,function(t,i){n("tbody",s).append(i)}));i.gbox="#gbox_"+f;y=!1;i.closeOnEscape===!0&&(i.closeOnEscape=!1,y=!0);p=n("<span><\/span>").append(g).append("<table border='0' class='EditTable' id='"+r+"_2'><tbody><tr id='Act_Buttons'><td class='navButton ui-widget-content' width='"+i.labelswidth+"'>"+(h?tt+nt:nt+tt)+"<\/td><td class='EditButton ui-widget-content'>"+ft+"<\/td><\/tr><\/tbody><\/table>");createModal(o,p,i,"#gview_"+u.p.id,n("#gview_"+u.p.id)[0]);h&&(n("#pData, #nData","#"+r+"_2").css("float","right"),n(".EditButton","#"+r+"_2").css("text-align","left"));i.viewPagerButtons||n("#pData, #nData","#"+r+"_2").hide();p=null;n("#"+o.themodal).keydown(function(t){if(t.which===27)return y&&hideModal(this,{gb:i.gbox,jqm:i.jqModal,onClose:i.onClose}),!1;if(i.navkeys[0]===!0){if(t.which===i.navkeys[1])return n("#pData","#"+r+"_2").trigger("click"),!1;if(t.which===i.navkeys[2])return n("#nData","#"+r+"_2").trigger("click"),!1}});i.closeicon=n.extend([!0,"left","ui-icon-close"],i.closeicon);i.closeicon[0]===!0&&n("#cData","#"+r+"_2").addClass(i.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.closeicon[2]+"'><\/span>");n.isFunction(i.beforeShowForm)&&i.beforeShowForm(n("#"+e));viewModal("#"+o.themodal,{gbox:"#gbox_"+f,jqm:i.jqModal,modal:i.modal});n(".fm-button:not(.ui-state-disabled)","#"+r+"_2").hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")});l();n("#cData","#"+r+"_2").click(function(){return hideModal("#"+o.themodal,{gb:"#gbox_"+f,jqm:i.jqModal,onClose:i.onClose}),!1});n("#nData","#"+r+"_2").click(function(){n("#FormError","#"+r).hide();var t=k();if(t[0]=parseInt(t[0],10),t[0]!=-1&&t[1][t[0]+1]){if(n.isFunction(i.onclickPgButtons))i.onclickPgButtons("next",n("#"+e),t[1][t[0]]);d(t[1][t[0]+1],u);n(u).jqGrid("setSelection",t[1][t[0]+1]);n.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons("next",n("#"+e),t[1][t[0]+1]);b(t[0]+1,t[1].length-1)}return l(),!1});n("#pData","#"+r+"_2").click(function(){n("#FormError","#"+r).hide();var t=k();if(t[0]!=-1&&t[1][t[0]-1]){if(n.isFunction(i.onclickPgButtons))i.onclickPgButtons("prev",n("#"+e),t[1][t[0]]);d(t[1][t[0]-1],u);n(u).jqGrid("setSelection",t[1][t[0]-1]);n.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons("prev",n("#"+e),t[1][t[0]-1]);b(t[0]-1,t[1].length-1)}return l(),!1})}w=k();b(w[0],w[1].length-1)}})},delGridRow:function(i,r){return r=n.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},n.jgrid.del,r||{}),t=r,this.each(function(){var f=this,w,o,b,k;if(f.grid&&i){var a=typeof r.beforeShowForm=="function"?!0:!1,v=typeof r.afterShowForm=="function"?!0:!1,e=f.p.id,l={},u="DelTbl_"+e,h,y,c,p,s={themodal:"delmod"+e,modalhead:"delhd"+e,modalcontent:"delcnt"+e,scrollelm:u};jQuery.isArray(i)&&(i=i.join());n("#"+s.themodal).html()!=null?(n("#DelData>td","#"+u).text(i),n("#DelError","#"+u).hide(),t.processing===!0&&(t.processing=!1,n("#dData","#"+u).removeClass("ui-state-active")),a&&r.beforeShowForm(n("#"+u)),viewModal("#"+s.themodal,{gbox:"#gbox_"+e,jqm:r.jqModal,jqM:!1,modal:r.modal}),v&&r.afterShowForm(n("#"+u))):(w=isNaN(r.dataheight)?r.dataheight:r.dataheight+"px",o="<div id='"+u+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+w+";'>",o+="<table class='DelTable'><tbody>",o+="<tr id='DelError' style='display:none'><td class='ui-state-error'><\/td><\/tr>",o+="<tr id='DelData' style='display:none'><td >"+i+"<\/td><\/tr>",o+='<tr><td class="delmsg" style="white-space:pre;">'+r.msg+"<\/td><\/tr><tr><td >&#160;<\/td><\/tr>",o+="<\/tbody><\/table><\/div>",b="<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+r.bSubmit+"<\/a>",k="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+r.bCancel+"<\/a>",o+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+u+"_2'><tbody><tr><td class='DataTD ui-widget-content'><\/td><\/tr><tr style='display:block;height:3px;'><td><\/td><\/tr><tr><td class='DelButton EditButton'>"+b+"&#160;"+k+"<\/td><\/tr><\/tbody><\/table>",r.gbox="#gbox_"+e,createModal(s,o,r,"#gview_"+f.p.id,n("#gview_"+f.p.id)[0]),n(".fm-button","#"+u+"_2").hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),r.delicon=n.extend([!0,"left","ui-icon-scissors"],r.delicon),r.cancelicon=n.extend([!0,"left","ui-icon-cancel"],r.cancelicon),r.delicon[0]===!0&&n("#dData","#"+u+"_2").addClass(r.delicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.delicon[2]+"'><\/span>"),r.cancelicon[0]===!0&&n("#eData","#"+u+"_2").addClass(r.cancelicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.cancelicon[2]+"'><\/span>"),n("#dData","#"+u+"_2").click(function(){var i=[!0,""],o,a;return l={},o=n("#DelData>td","#"+u).text(),typeof r.onclickSubmit=="function"&&(l=r.onclickSubmit(t,o)||{}),typeof r.beforeSubmit=="function"&&(i=r.beforeSubmit(o)),i[0]&&!t.processing&&(t.processing=!0,n(this).addClass("ui-state-active"),c=f.p.prmNames,h=n.extend({},t.delData,l),p=c.oper,h[p]=c.deloper,y=c.id,h[y]=o,a=n.extend({url:t.url?t.url:n(f).jqGrid("getGridParam","editurl"),type:r.mtype,data:n.isFunction(r.serializeDelData)?r.serializeDelData(h):h,complete:function(c,l){var a,v;if(l!="success"?(i[0]=!1,i[1]=n.isFunction(t.errorTextFormat)?t.errorTextFormat(c):l+" Status: '"+c.statusText+"'. Error code: "+c.status):typeof t.afterSubmit=="function"&&(i=t.afterSubmit(c,h)),i[0]===!1)n("#DelError>td","#"+u).html(i[1]),n("#DelError","#"+u).show();else{if(t.reloadAfterSubmit)n(f).trigger("reloadGrid");else{if(a=[],a=o.split(","),f.p.treeGrid===!0)try{n(f).jqGrid("delTreeNode",a[0])}catch(y){}else for(v=0;v<a.length;v++)n(f).jqGrid("delRowData",a[v]);f.p.selrow=null;f.p.selarrrow=[]}n.isFunction(t.afterComplete)&&setTimeout(function(){t.afterComplete(c,o)},500)}t.processing=!1;n("#dData","#"+u+"_2").removeClass("ui-state-active");i[0]&&hideModal("#"+s.themodal,{gb:"#gbox_"+e,jqm:r.jqModal,onClose:t.onClose})},error:function(i,r,f){n("#DelError>td","#"+u).html(r+" : "+f);n("#DelError","#"+u).show();t.processing=!1;n("#dData","#"+u+"_2").removeClass("ui-state-active")}},n.jgrid.ajaxOptions,r.ajaxDelOptions),a.url||t.useDataProxy||(n.isFunction(f.p.dataProxy)?t.useDataProxy=!0:(i[0]=!1,i[1]+=" "+n.jgrid.errors.nourl)),i[0]&&(t.useDataProxy?f.p.dataProxy.call(f,a,"del_"+f.p.id):n.ajax(a))),i[0]===!1&&(n("#DelError>td","#"+u).html(i[1]),n("#DelError","#"+u).show()),!1}),n("#eData","#"+u+"_2").click(function(){return hideModal("#"+s.themodal,{gb:"#gbox_"+e,jqm:r.jqModal,onClose:t.onClose}),!1}),a&&r.beforeShowForm(n("#"+u)),viewModal("#"+s.themodal,{gbox:"#gbox_"+e,jqm:r.jqModal,modal:r.modal}),v&&r.afterShowForm(n("#"+u)));r.closeOnEscape===!0&&setTimeout(function(){n(".ui-jqdialog-titlebar-close","#"+s.modalhead).focus()},0)}})},navGrid:function(t,i,r,u,f,e,o){return i=n.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1},n.jgrid.nav,i||{}),this.each(function(){var y={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},s=this,p,w,v,d,b,k,h,c,g,a,l;if(s.grid&&typeof t=="string")for(n("#"+y.themodal).html()===null&&(typeof innerWidth!="undefined"?(p=window.innerWidth,w=window.innerHeight):typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0?(p=document.documentElement.clientWidth,w=document.documentElement.clientHeight):(p=1024,w=768),createModal(y,"<div>"+i.alerttext+"<\/div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'><\/span><\/span>",{gbox:"#gbox_"+s.p.id,jqModal:!0,drag:!0,resize:!0,caption:i.alertcap,top:w/2-25,left:p/2-100,width:200,height:"auto",closeOnEscape:i.closeOnEscape},"","",!0)),b=1,i.cloneToTop&&s.p.toppager&&(b=2),k=0;k<b;k++)c=n("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr><\/tr><\/tbody><\/table>"),g="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'><\/span><\/td>",k===0?(a=t,l=s.p.id,a==s.p.toppager&&(l+="_top",b=1)):(a=s.p.toppager,l=s.p.id+"_top"),s.p.direction=="rtl"&&n(c).attr("dir","rtl").css("float","right"),i.add&&(u=u||{},h=n("<td class='ui-pg-button ui-corner-all'><\/td>"),n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.addicon+"'><\/span>"+i.addtext+"<\/div>"),n("tr",c).append(h),n(h,c).attr({title:i.addtitle||"",id:u.id||"add_"+l}).click(function(){return n(this).hasClass("ui-state-disabled")||(typeof i.addfunc=="function"?i.addfunc():n(s).jqGrid("editGridRow","new",u)),!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),h=null),i.edit&&(h=n("<td class='ui-pg-button ui-corner-all'><\/td>"),r=r||{},n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.editicon+"'><\/span>"+i.edittext+"<\/div>"),n("tr",c).append(h),n(h,c).attr({title:i.edittitle||"",id:r.id||"edit_"+l}).click(function(){if(!n(this).hasClass("ui-state-disabled")){var t=s.p.selrow;t?typeof i.editfunc=="function"?i.editfunc(t):n(s).jqGrid("editGridRow",t,r):(viewModal("#"+y.themodal,{gbox:"#gbox_"+s.p.id,jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),h=null),i.view&&(h=n("<td class='ui-pg-button ui-corner-all'><\/td>"),o=o||{},n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.viewicon+"'><\/span>"+i.viewtext+"<\/div>"),n("tr",c).append(h),n(h,c).attr({title:i.viewtitle||"",id:o.id||"view_"+l}).click(function(){if(!n(this).hasClass("ui-state-disabled")){var t=s.p.selrow;t?n(s).jqGrid("viewGridRow",t,o):(viewModal("#"+y.themodal,{gbox:"#gbox_"+s.p.id,jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),h=null),i.del&&(h=n("<td class='ui-pg-button ui-corner-all'><\/td>"),f=f||{},n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.delicon+"'><\/span>"+i.deltext+"<\/div>"),n("tr",c).append(h),n(h,c).attr({title:i.deltitle||"",id:f.id||"del_"+l}).click(function(){if(!n(this).hasClass("ui-state-disabled")){var t;s.p.multiselect?(t=s.p.selarrrow,t.length===0&&(t=null)):t=s.p.selrow;t?"function"==typeof i.delfunc?i.delfunc(t):n(s).jqGrid("delGridRow",t,f):(viewModal("#"+y.themodal,{gbox:"#gbox_"+s.p.id,jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),h=null),(i.add||i.edit||i.del||i.view)&&n("tr",c).append(g),i.search&&(h=n("<td class='ui-pg-button ui-corner-all'><\/td>"),e=e||{},n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.searchicon+"'><\/span>"+i.searchtext+"<\/div>"),n("tr",c).append(h),n(h,c).attr({title:i.searchtitle||"",id:e.id||"search_"+l}).click(function(){return n(this).hasClass("ui-state-disabled")||n(s).jqGrid("searchGrid",e),!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),h=null),i.refresh&&(h=n("<td class='ui-pg-button ui-corner-all'><\/td>"),n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.refreshicon+"'><\/span>"+i.refreshtext+"<\/div>"),n("tr",c).append(h),n(h,c).attr({title:i.refreshtitle||"",id:"refresh_"+l}).click(function(){if(!n(this).hasClass("ui-state-disabled")){n.isFunction(i.beforeRefresh)&&i.beforeRefresh();s.p.search=!1;try{var t=s.p.id;n("#fbox_"+t).searchFilter().reset();n.isFunction(s.clearToolbar)&&s.clearToolbar(!1)}catch(r){}switch(i.refreshstate){case"firstpage":n(s).trigger("reloadGrid",[{page:1}]);break;case"current":n(s).trigger("reloadGrid",[{current:!0}])}n.isFunction(i.afterRefresh)&&i.afterRefresh()}return!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),h=null),d=n(".ui-jqgrid").css("font-size")||"11px",n("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+d+";visibility:hidden;' ><\/div>"),v=n(c).clone().appendTo("#testpg2").width(),n("#testpg2").remove(),n(a+"_"+i.position,a).append(c),s.p._nvtd&&(v>s.p._nvtd[0]&&(n(a+"_"+i.position,a).width(v),s.p._nvtd[0]=v),s.p._nvtd[1]=v),d=null,v=null,c=null})},navButtonAdd:function(t,i){return i=n.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},i||{}),this.each(function(){var u,f,r;this.grid&&(t.indexOf("#")!==0&&(t="#"+t),u=n(".navtable",t)[0],f=this,u&&(r=n("<td><\/td>"),i.buttonicon.toString().toUpperCase()=="NONE"?n(r).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+i.caption+"<\/div>"):n(r).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+i.buttonicon+"'><\/span>"+i.caption+"<\/div>"),i.id&&n(r).attr("id",i.id),i.position=="first"?u.rows[0].cells.length===0?n("tr",u).append(r):n("tr td:eq(0)",u).before(r):n("tr",u).append(r),n(r,u).attr("title",i.title||"").click(function(t){return n(this).hasClass("ui-state-disabled")||n.isFunction(i.onClickButton)&&i.onClickButton.call(f,t),!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")})))})},navSeparatorAdd:function(t,i){return i=n.extend({sepclass:"ui-separator",sepcontent:""},i||{}),this.each(function(){var r,u;this.grid&&(t.indexOf("#")!==0&&(t="#"+t),r=n(".navtable",t)[0],r&&(u="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+i.sepclass+"'><\/span>"+i.sepcontent+"<\/td>",n("tr",r).append(u)))})},GridToForm:function(t,i){return this.each(function(){var f=this,u,r;if(f.grid&&(u=n(f).jqGrid("getRowData",t),u))for(r in u)n("[name="+r+"]",i).is("input:radio")||n("[name="+r+"]",i).is("input:checkbox")?n("[name="+r+"]",i).each(function(){n(this).val()==u[r]?n(this).attr("checked","checked"):n(this).attr("checked","")}):n("[name="+r+"]",i).val(u[r])})},FormToGrid:function(t,i,r,u){return this.each(function(){var e=this,o,f;e.grid&&(r||(r="set"),u||(u="first"),o=n(i).serializeArray(),f={},n.each(o,function(n,t){f[t.name]=t.value}),r=="add"?n(e).jqGrid("addRowData",t,f,u):r=="set"&&n(e).jqGrid("setRowData",t,f))})}})}(jQuery),function(n){n.jgrid.extend({editRow:function(t,i,r,u,f,e,o,s,h){return this.each(function(){var c=this,a,y,b,k=0,p=null,w={},v,l;c.grid&&(v=n(c).jqGrid("getInd",t,!0),v!==!1)&&(b=n(v).attr("editable")||"0",b!="0"||n(v).hasClass("not-editable-row")||(l=c.p.colModel,n("td",v).each(function(i){var u,f,r;if(a=l[i].name,u=c.p.treeGrid===!0&&a==c.p.ExpandColumn,u)y=n("span:first",this).html();else try{y=n.unformat(this,{rowId:t,colModel:l[i]},i)}catch(e){y=n(this).html()}a!="cb"&&a!="subgrid"&&a!="rn"&&(c.p.autoencode&&(y=n.jgrid.htmlDecode(y)),w[a]=y,l[i].editable===!0&&(p===null&&(p=i),u?n("span:first",this).html(""):n(this).html(""),f=n.extend({},l[i].editoptions||{},{id:t+"_"+a,name:a}),l[i].edittype||(l[i].edittype="text"),r=createEl(l[i].edittype,f,y,!0,n.extend({},n.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{})),n(r).addClass("editable"),u?n("span:first",this).append(r):n(this).append(r),l[i].edittype=="select"&&l[i].editoptions.multiple===!0&&n.browser.msie&&n(r).width(n(r).width()),k++))}),k>0&&(w.id=t,c.p.savedRow.push(w),n(v).attr("editable","1"),n("td:eq("+p+") input",v).focus(),i===!0&&n(v).bind("keydown",function(i){if(i.keyCode===27&&n(c).jqGrid("restoreRow",t,h),i.keyCode===13){var r=i.target;return r.tagName=="TEXTAREA"?!0:(n(c).jqGrid("saveRow",t,u,f,e,o,s,h),!1)}i.stopPropagation()}),n.isFunction(r)&&r(t))))})},saveRow:function(t,i,r,u,f,e,o){return this.each(function(){var h=this,c,s={},p={},d,y,a,v,l,k,g,b,nt,tt,w;if(h.grid&&(v=n(h).jqGrid("getInd",t,!0),v!==!1)&&(d=n(v).attr("editable"),r=r?r:h.p.editurl,d==="1")){if(n("td",v).each(function(t){var i,f,r;if(l=h.p.colModel[t],c=l.name,c!="cb"&&c!="subgrid"&&l.editable===!0&&c!="rn"){switch(l.edittype){case"checkbox":i=["Yes","No"];l.editoptions&&(i=l.editoptions.value.split(":"));s[c]=n("input",this).attr("checked")?i[0]:i[1];break;case"text":case"password":case"textarea":case"button":s[c]=n("input, textarea",this).val();break;case"select":l.editoptions.multiple?(f=n("select",this),r=[],s[c]=n(f).val(),s[c]=s[c]?s[c].join(","):"",n("select > option:selected",this).each(function(t,i){r[t]=n(i).text()}),p[c]=r.join(",")):(s[c]=n("select>option:selected",this).val(),p[c]=n("select>option:selected",this).text());l.formatter&&l.formatter=="select"&&(p={});break;case"custom":try{if(l.editoptions&&n.isFunction(l.editoptions.custom_value)){if(s[c]=l.editoptions.custom_value(n(".customelement",this),"get"),s[c]===undefined)throw"e2";}else throw"e1";}catch(u){u=="e1"&&info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);u=="e2"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,u.message,jQuery.jgrid.edit.bClose)}}if(a=checkValues(s[c],t,h),a[0]===!1)return a[1]=s[c]+" "+a[1],!1;h.p.autoencode&&(s[c]=n.jgrid.htmlEncode(s[c]))}}),a[0]===!1){try{k=findPos(n("#"+t)[0]);info_dialog(n.jgrid.errors.errcap,a[1],n.jgrid.edit.bClose,{left:k[0],top:k[1]})}catch(it){alert(a[1])}return}if(s&&(b=h.p.prmNames,nt=b.oper,g=b.id,s[nt]=b.editoper,s[g]=t,typeof h.p.inlineData=="undefined"&&(h.p.inlineData={}),typeof u=="undefined"&&(u={}),s=n.extend({},s,h.p.inlineData,u)),r=="clientArray"){for(s=n.extend({},s,p),h.p.autoencode&&n.each(s,function(t,i){s[t]=n.jgrid.htmlDecode(i)}),tt=n(h).jqGrid("setRowData",t,s),n(v).attr("editable","0"),w=0;w<h.p.savedRow.length;w++)if(h.p.savedRow[w].id==t){y=w;break}y>=0&&h.p.savedRow.splice(y,1);n.isFunction(f)&&f(t,tt)}else n("#lui_"+h.p.id).show(),n.ajax(n.extend({url:r,data:n.isFunction(h.p.serializeRowData)?h.p.serializeRowData(s):s,type:"POST",complete:function(r,u){var c,e;if(n("#lui_"+h.p.id).hide(),u==="success")if(c=n.isFunction(i)?i(r):!0,c===!0){for(h.p.autoencode&&n.each(s,function(t,i){s[t]=n.jgrid.htmlDecode(i)}),s=n.extend({},s,p),n(h).jqGrid("setRowData",t,s),n(v).attr("editable","0"),e=0;e<h.p.savedRow.length;e++)if(h.p.savedRow[e].id==t){y=e;break}y>=0&&h.p.savedRow.splice(y,1);n.isFunction(f)&&f(t,r)}else n(h).jqGrid("restoreRow",t,o)},error:function(i,r){n("#lui_"+h.p.id).hide();n.isFunction(e)?e(t,i,r):alert("Error Row: "+t+" Result: "+i.status+":"+i.statusText+" Status: "+r)}},n.jgrid.ajaxOptions,h.p.ajaxRowOptions||{}));n(v).unbind("keydown")}})},restoreRow:function(t,i){return this.each(function(){var r=this,u,e,o={},f;if(r.grid&&(e=n(r).jqGrid("getInd",t,!0),e!==!1)){for(f=0;f<r.p.savedRow.length;f++)if(r.p.savedRow[f].id==t){u=f;break}if(u>=0){if(n.isFunction(n.fn.datepicker))try{n("input.hasDatepicker","#"+e.id).datepicker("hide")}catch(s){}n.each(r.p.colModel,function(){this.editable===!0&&this.name in r.p.savedRow[u]&&(o[this.name]=r.p.savedRow[u][this.name])});n(r).jqGrid("setRowData",t,o);n(e).attr("editable","0").unbind("keydown");r.p.savedRow.splice(u,1)}n.isFunction(i)&&i(t)}})}})}(jQuery),function(n){n.jgrid.extend({editCell:function(t,i,r){return this.each(function(){var u=this,e,f,o,s,c,h;if(u.grid&&u.p.cellEdit===!0){if(i=parseInt(i,10),u.p.selrow=u.rows[t].id,u.p.knv||n(u).jqGrid("GridNav"),u.p.savedRow.length>0){if(r===!0&&t==u.p.iRow&&i==u.p.iCol)return;n(u).jqGrid("saveCell",u.p.savedRow[0].id,u.p.savedRow[0].ic)}else window.setTimeout(function(){n("#"+u.p.knv).attr("tabindex","-1").focus()},0);if(e=u.p.colModel[i].name,e!="subgrid"&&e!="cb"&&e!="rn"){if(o=n("td:eq("+i+")",u.rows[t]),u.p.colModel[i].editable!==!0||r!==!0||o.hasClass("not-editable-cell")){if(parseInt(u.p.iCol,10)>=0&&parseInt(u.p.iRow,10)>=0&&(n("td:eq("+u.p.iCol+")",u.rows[u.p.iRow]).removeClass("edit-cell ui-state-highlight"),n(u.rows[u.p.iRow]).removeClass("selected-row ui-state-hover")),o.addClass("edit-cell ui-state-highlight"),n(u.rows[t]).addClass("selected-row ui-state-hover"),n.isFunction(u.p.onSelectCell)){f=o.html().replace(/\&#160\;/ig,"");u.p.onSelectCell(u.rows[t].id,e,f,t,i)}}else{parseInt(u.p.iCol,10)>=0&&parseInt(u.p.iRow,10)>=0&&(n("td:eq("+u.p.iCol+")",u.rows[u.p.iRow]).removeClass("edit-cell ui-state-highlight"),n(u.rows[u.p.iRow]).removeClass("selected-row ui-state-hover"));n(o).addClass("edit-cell ui-state-highlight");n(u.rows[t]).addClass("selected-row ui-state-hover");try{f=n.unformat(o,{rowId:u.rows[t].id,colModel:u.p.colModel[i]},i)}catch(l){f=n(o).html()}u.p.autoencode&&(f=n.jgrid.htmlDecode(f));u.p.colModel[i].edittype||(u.p.colModel[i].edittype="text");u.p.savedRow.push({id:t,ic:i,name:e,v:f});n.isFunction(u.p.formatCell)&&(s=u.p.formatCell(u.rows[t].id,e,f,t,i),s!==undefined&&(f=s));c=n.extend({},u.p.colModel[i].editoptions||{},{id:t+"_"+e,name:e});h=createEl(u.p.colModel[i].edittype,c,f,!0,n.extend({},n.jgrid.ajaxOptions,u.p.ajaxSelectOptions||{}));n.isFunction(u.p.beforeEditCell)&&u.p.beforeEditCell(u.rows[t].id,e,f,t,i);n(o).html("").append(h).attr("tabindex","0");window.setTimeout(function(){n(h).focus()},0);n("input, select, textarea",o).bind("keydown",function(r){if(r.keyCode===27&&(n("input.hasDatepicker",o).length>0?n(".ui-datepicker").is(":hidden")?n(u).jqGrid("restoreCell",t,i):n("input.hasDatepicker",o).datepicker("hide"):n(u).jqGrid("restoreCell",t,i)),r.keyCode===13&&n(u).jqGrid("saveCell",t,i),r.keyCode==9){if(u.grid.hDiv.loading)return!1;r.shiftKey?n(u).jqGrid("prevCell",t,i):n(u).jqGrid("nextCell",t,i)}r.stopPropagation()});n.isFunction(u.p.afterEditCell)&&u.p.afterEditCell(u.rows[t].id,e,f,t,i)}u.p.iCol=i;u.p.iRow=t}}})},saveCell:function(t,i){return this.each(function(){var r=this,y,p,w,a,k,d,l,s,g,nt,v;if(r.grid&&r.p.cellEdit===!0){if(y=r.p.savedRow.length>=1?0:null,y!==null){var e=n("td:eq("+i+")",r.rows[t]),u,f,o=r.p.colModel[i],h=o.name,c=n.jgrid.jqID(h);switch(o.edittype){case"select":o.editoptions.multiple?(p=n("#"+t+"_"+c,r.rows[t]),w=[],u=n(p).val(),u?u.join(","):u="",n("option:selected",p).each(function(t,i){w[t]=n(i).text()}),f=w.join(",")):(u=n("#"+t+"_"+c+">option:selected",r.rows[t]).val(),f=n("#"+t+"_"+c+">option:selected",r.rows[t]).text());o.formatter&&(f=u);break;case"checkbox":a=["Yes","No"];o.editoptions&&(a=o.editoptions.value.split(":"));u=n("#"+t+"_"+c,r.rows[t]).attr("checked")?a[0]:a[1];f=u;break;case"password":case"text":case"textarea":case"button":u=n("#"+t+"_"+c,r.rows[t]).val();f=u;break;case"custom":try{if(o.editoptions&&n.isFunction(o.editoptions.custom_value))if(u=o.editoptions.custom_value(n(".customelement",e),"get"),u===undefined)throw"e2";else f=u;else throw"e1";}catch(b){b=="e1"&&info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);b=="e2"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,b.message,jQuery.jgrid.edit.bClose)}}if(f!=r.p.savedRow[y].v)if(n.isFunction(r.p.beforeSaveCell)&&(k=r.p.beforeSaveCell(r.rows[t].id,h,u,t,i),k&&(u=k)),d=checkValues(u,i,r),d[0]===!0){if(l={},n.isFunction(r.p.beforeSubmitCell)&&(l=r.p.beforeSubmitCell(r.rows[t].id,h,u,t,i),l||(l={})),n("input.hasDatepicker",e).length>0&&n("input.hasDatepicker",e).datepicker("hide"),r.p.cellsubmit=="remote")if(r.p.cellurl)s={},r.p.autoencode&&(u=n.jgrid.htmlEncode(u)),s[h]=u,v=r.p.prmNames,g=v.id,nt=v.oper,s[g]=r.rows[t].id,s[nt]=v.editoper,s=n.extend(l,s),n("#lui_"+r.p.id).show(),r.grid.hDiv.loading=!0,n.ajax(n.extend({url:r.p.cellurl,data:n.isFunction(r.p.serializeCellData)?r.p.serializeCellData(s):s,type:"POST",complete:function(o,c){if(n("#lui_"+r.p.id).hide(),r.grid.hDiv.loading=!1,c=="success")if(n.isFunction(r.p.afterSubmitCell)){var l=r.p.afterSubmitCell(o,s.id,h,u,t,i);l[0]===!0?(n(e).empty(),n(r).jqGrid("setCell",r.rows[t].id,i,f,!1,!1,!0),n(e).addClass("dirty-cell"),n(r.rows[t]).addClass("edited"),n.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell(r.rows[t].id,h,u,t,i),r.p.savedRow.splice(0,1)):(info_dialog(n.jgrid.errors.errcap,l[1],n.jgrid.edit.bClose),n(r).jqGrid("restoreCell",t,i))}else n(e).empty(),n(r).jqGrid("setCell",r.rows[t].id,i,f,!1,!1,!0),n(e).addClass("dirty-cell"),n(r.rows[t]).addClass("edited"),n.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell(r.rows[t].id,h,u,t,i),r.p.savedRow.splice(0,1)},error:function(u,f){n("#lui_"+r.p.id).hide();r.grid.hDiv.loading=!1;n.isFunction(r.p.errorCell)?(r.p.errorCell(u,f),n(r).jqGrid("restoreCell",t,i)):(info_dialog(n.jgrid.errors.errcap,u.status+" : "+u.statusText+"<br/>"+f,n.jgrid.edit.bClose),n(r).jqGrid("restoreCell",t,i))}},n.jgrid.ajaxOptions,r.p.ajaxCellOptions||{}));else try{info_dialog(n.jgrid.errors.errcap,n.jgrid.errors.nourl,n.jgrid.edit.bClose);n(r).jqGrid("restoreCell",t,i)}catch(b){}r.p.cellsubmit=="clientArray"&&(n(e).empty(),n(r).jqGrid("setCell",r.rows[t].id,i,f,!1,!1,!0),n(e).addClass("dirty-cell"),n(r.rows[t]).addClass("edited"),n.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell(r.rows[t].id,h,u,t,i),r.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){info_dialog(n.jgrid.errors.errcap,u+" "+d[1],n.jgrid.edit.bClose)},100);n(r).jqGrid("restoreCell",t,i)}catch(b){}else n(r).jqGrid("restoreCell",t,i)}n.browser.opera?n("#"+r.p.knv).attr("tabindex","-1").focus():window.setTimeout(function(){n("#"+r.p.knv).attr("tabindex","-1").focus()},0)}})},restoreCell:function(t,i){return this.each(function(){var r=this,u,f;if(r.grid&&r.p.cellEdit===!0){if(u=r.p.savedRow.length>=1?0:null,u!==null){if(f=n("td:eq("+i+")",r.rows[t]),n.isFunction(n.fn.datepicker))try{n("input.hasDatepicker",f).datepicker("hide")}catch(e){}n(f).empty().attr("tabindex","-1");n(r).jqGrid("setCell",r.rows[t].id,i,r.p.savedRow[u].v,!1,!1,!0);r.p.savedRow.splice(0,1)}window.setTimeout(function(){n("#"+r.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(t,i){return this.each(function(){var r=this,f=!1,u;if(r.grid&&r.p.cellEdit===!0){for(u=i+1;u<r.p.colModel.length;u++)if(r.p.colModel[u].editable===!0){f=u;break}f!==!1?n(r).jqGrid("editCell",t,f,!0):r.p.savedRow.length>0&&n(r).jqGrid("saveCell",t,i)}})},prevCell:function(t,i){return this.each(function(){var r=this,f=!1,u;if(r.grid&&r.p.cellEdit===!0){for(u=i-1;u>=0;u--)if(r.p.colModel[u].editable===!0){f=u;break}f!==!1?n(r).jqGrid("editCell",t,f,!0):r.p.savedRow.length>0&&n(r).jqGrid("saveCell",t,i)}})},GridNav:function(){return this.each(function(){function u(i,r,u){if(u.substr(0,1)=="v"){var e=n(t.grid.bDiv)[0].clientHeight,o=n(t.grid.bDiv)[0].scrollTop,s=t.rows[i].offsetTop+t.rows[i].clientHeight,h=t.rows[i].offsetTop;u=="vd"&&s>=e&&(n(t.grid.bDiv)[0].scrollTop=n(t.grid.bDiv)[0].scrollTop+t.rows[i].clientHeight);u=="vu"&&h<o&&(n(t.grid.bDiv)[0].scrollTop=n(t.grid.bDiv)[0].scrollTop-t.rows[i].clientHeight)}if(u=="h"){var c=n(t.grid.bDiv)[0].clientWidth,f=n(t.grid.bDiv)[0].scrollLeft,l=t.rows[i].cells[r].offsetLeft+t.rows[i].cells[r].clientWidth,a=t.rows[i].cells[r].offsetLeft;l>=c+parseInt(f,10)?n(t.grid.bDiv)[0].scrollLeft=n(t.grid.bDiv)[0].scrollLeft+t.rows[i].cells[r].clientWidth:a<f&&(n(t.grid.bDiv)[0].scrollLeft=n(t.grid.bDiv)[0].scrollLeft-t.rows[i].cells[r].clientWidth)}}function e(n,i){var u,r;if(i=="lft")for(u=n+1,r=n;r>=0;r--)if(t.p.colModel[r].hidden!==!0){u=r;break}if(i=="rgt")for(u=n-1,r=n;r<t.p.colModel.length;r++)if(t.p.colModel[r].hidden!==!0){u=r;break}return u}var t=this,f,i,r;t.grid&&t.p.cellEdit===!0&&(t.p.knv=t.p.id+"_kn",f=n("<span style='width:0px;height:0px;background-color:black;' tabindex='0'><span tabindex='-1' style='width:0px;height:0px;background-color:grey' id='"+t.p.knv+"'><\/span><\/span>"),n(f).insertBefore(t.grid.cDiv),n("#"+t.p.knv).focus().keydown(function(f){r=f.keyCode;t.p.direction=="rtl"&&(r==37?r=39:r==39&&(r=37));switch(r){case 38:t.p.iRow-1>=0&&(u(t.p.iRow-1,t.p.iCol,"vu"),n(t).jqGrid("editCell",t.p.iRow-1,t.p.iCol,!1));break;case 40:t.p.iRow+1<=t.rows.length-1&&(u(t.p.iRow+1,t.p.iCol,"vd"),n(t).jqGrid("editCell",t.p.iRow+1,t.p.iCol,!1));break;case 37:t.p.iCol-1>=0&&(i=e(t.p.iCol-1,"lft"),u(t.p.iRow,i,"h"),n(t).jqGrid("editCell",t.p.iRow,i,!1));break;case 39:t.p.iCol+1<=t.p.colModel.length-1&&(i=e(t.p.iCol+1,"rgt"),u(t.p.iRow,i,"h"),n(t).jqGrid("editCell",t.p.iRow,i,!1));break;case 13:parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0&&n(t).jqGrid("editCell",t.p.iRow,t.p.iCol,!0)}return!1}))})},getChangedCells:function(t){var i=[];return t||(t="all"),this.each(function(){var r=this,u;r.grid&&r.p.cellEdit===!0&&n(r.rows).each(function(f){var e={};n(this).hasClass("edited")&&(n("td",this).each(function(i){if(u=r.p.colModel[i].name,u!=="cb"&&u!=="subgrid")if(t=="dirty"){if(n(this).hasClass("dirty-cell"))try{e[u]=n.unformat(this,{rowId:r.rows[f].id,colModel:r.p.colModel[i]},i)}catch(o){e[u]=n.jgrid.htmlDecode(n(this).html())}}else try{e[u]=n.unformat(this,{rowId:r.rows[f].id,colModel:r.p.colModel[i]},i)}catch(o){e[u]=n.jgrid.htmlDecode(n(this).html())}}),e.id=this.id,i.push(e))})}),i}})}(jQuery),function(n){n.jgrid.extend({setSubGrid:function(){return this.each(function(){var i=this,t,r;if(i.p.colNames.unshift(""),i.p.colModel.unshift({name:"subgrid",width:n.browser.safari?i.p.subGridWidth+i.p.cellLayout:i.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),t=i.p.subGridModel,t[0])for(t[0].align=n.extend([],t[0].align||[]),r=0;r<t[0].name.length;r++)t[0].align[r]=t[0].align[r]||"left"})},addSubGridCell:function(n,t){var i="",u,r;return this.each(function(){i=this.formatCol(n,t);u=this.p.gridview;r=this.p.id}),u===!1?'<td role="grid" aria-describedby="'+r+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+i+"><a href='javascript:void(0);'><span class='ui-icon ui-icon-plus'><\/span><\/a><\/td>":'<td role="grid" aria-describedby="'+r+'_subgrid" '+i+"><\/td>"},addSubGrid:function(t,i){return this.each(function(){var r=this,e,u,o,c,h,l,f;if(r.grid){n("td:eq("+i+")",t).click(function(){if(n(this).hasClass("sgcollapsed")){if(o=r.p.id,e=n(this).parent(),c=i>=1?"<td colspan='"+i+"'>&#160;<\/td>":"",u=n(e).attr("id"),f=!0,n.isFunction(r.p.subGridBeforeExpand)&&(f=r.p.subGridBeforeExpand(o+"_"+u,u)),f===!1)return!1;h=0;n.each(r.p.colModel,function(){(this.hidden===!0||this.name=="rn"||this.name=="cb")&&h++});l="<tr role='row' class='ui-subgrid'>"+c+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon ui-icon-carat-1-sw'/><\/td><td colspan='"+parseInt(r.p.colNames.length-1-h,10)+"' class='ui-widget-content subgrid-data'><div id="+o+"_"+u+" class='tablediv'>";n(this).parent().after(l+"<\/div><\/td><\/tr>");n.isFunction(r.p.subGridRowExpanded)?r.p.subGridRowExpanded(o+"_"+u,u):y(e);n(this).html("<a href='javascript:void(0);'><span class='ui-icon ui-icon-minus'><\/span><\/a>").removeClass("sgcollapsed").addClass("sgexpanded")}else if(n(this).hasClass("sgexpanded")){if(f=!0,n.isFunction(r.p.subGridRowColapsed)&&(e=n(this).parent(),u=n(e).attr("id"),f=r.p.subGridRowColapsed(o+"_"+u,u)),f===!1)return!1;n(this).parent().next().remove(".ui-subgrid");n(this).html("<a href='javascript:void(0);'><span class='ui-icon ui-icon-plus'><\/span><\/a>").removeClass("sgexpanded").addClass("sgcollapsed")}return!1});var y=function(t){var f,i,u,e;if(f=n(t).attr("id"),i={nd_:(new Date).getTime()},i[r.p.prmNames.subgridid]=f,!r.p.subGridModel[0])return!1;if(r.p.subGridModel[0].params)for(e=0;e<r.p.subGridModel[0].params.length;e++)for(u=0;u<r.p.colModel.length;u++)r.p.colModel[u].name==r.p.subGridModel[0].params[e]&&(i[r.p.colModel[u].name]=n("td:eq("+u+")",t).text().replace(/\&#160\;/ig,""));if(!r.grid.hDiv.loading){r.grid.hDiv.loading=!0;n("#load_"+r.p.id).show();r.p.subgridtype||(r.p.subgridtype=r.p.datatype);n.isFunction(r.p.subgridtype)?r.p.subgridtype(i):r.p.subgridtype=r.p.subgridtype.toLowerCase();switch(r.p.subgridtype){case"xml":case"json":n.ajax(n.extend({type:r.p.mtype,url:r.p.subGridUrl,dataType:r.p.subgridtype,data:n.isFunction(r.p.serializeSubGridData)?r.p.serializeSubGridData(i):i,complete:function(t){r.p.subgridtype=="xml"?a(t.responseXML,f):v(n.jgrid.parse(t.responseText),f);t=null}},n.jgrid.ajaxOptions,r.p.ajaxSubgridOptions||{}))}}return!1},s=function(t,i,u){var f=n("<td align='"+r.p.subGridModel[0].align[u]+"'><\/td>").html(i);n(t).append(f)},a=function(t,i){for(var o,e,h=n("<table cellspacing='0' cellpadding='0' border='0'><tbody><\/tbody><\/table>"),f=n("<tr><\/tr>"),c,u=0;u<r.p.subGridModel[0].name.length;u++)o=n("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'><\/th>"),n(o).html(r.p.subGridModel[0].name[u]),n(o).width(r.p.subGridModel[0].width[u]),n(f).append(o);return n(h).append(f),t&&(e=r.p.xmlReader.subgrid,n(e.root+" "+e.row,t).each(function(){if(f=n("<tr class='ui-widget-content ui-subtblcell'><\/tr>"),e.repeatitems===!0)n(e.cell,this).each(function(t){s(f,n(this).text()||"&#160;",t)});else{var t=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(t)for(u=0;u<t.length;u++)s(f,n(t[u],this).text()||"&#160;",u)}n(h).append(f)})),c=n("table:first",r.grid.bDiv).attr("id")+"_",n("#"+c+i).append(h),r.grid.hDiv.loading=!1,n("#load_"+r.p.id).hide(),!1},v=function(t,i){for(var c,l,e,h,u,v=n("<table cellspacing='0' cellpadding='0' border='0'><tbody><\/tbody><\/table>"),o=n("<tr><\/tr>"),a,y,f=0;f<r.p.subGridModel[0].name.length;f++)c=n("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'><\/th>"),n(c).html(r.p.subGridModel[0].name[f]),n(c).width(r.p.subGridModel[0].width[f]),n(o).append(c);if(n(v).append(o),t&&(h=r.p.jsonReader.subgrid,l=t[h.root],typeof l!="undefined"))for(f=0;f<l.length;f++){if(e=l[f],o=n("<tr class='ui-widget-content ui-subtblcell'><\/tr>"),h.repeatitems===!0)for(h.cell&&(e=e[h.cell]),u=0;u<e.length;u++)s(o,e[u]||"&#160;",u);else if(a=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name,a.length)for(u=0;u<a.length;u++)s(o,e[a[u]]||"&#160;",u);n(v).append(o)}return y=n("table:first",r.grid.bDiv).attr("id")+"_",n("#"+y+i).append(v),r.grid.hDiv.loading=!1,n("#load_"+r.p.id).hide(),!1};r.subGridXml=function(n,t){a(n,t)};r.subGridJson=function(n,t){v(n,t)}}})},expandSubGridRow:function(t){return this.each(function(){var u=this,i,r;(u.grid||t)&&u.p.subGrid===!0&&(i=n(this).jqGrid("getInd",t,!0),i&&(r=n("td.sgcollapsed",i)[0],r&&n(r).trigger("click")))})},collapseSubGridRow:function(t){return this.each(function(){var u=this,i,r;(u.grid||t)&&u.p.subGrid===!0&&(i=n(this).jqGrid("getInd",t,!0),i&&(r=n("td.sgexpanded",i)[0],r&&n(r).trigger("click")))})},toggleSubGridRow:function(t){return this.each(function(){var u=this,r,i;(u.grid||t)&&u.p.subGrid===!0&&(r=n(this).jqGrid("getInd",t,!0),r&&(i=n("td.sgcollapsed",r)[0],i?n(i).trigger("click"):(i=n("td.sgexpanded",r)[0],i&&n(i).trigger("click"))))})}})}(jQuery),function(n){n.jgrid.extend({setTreeNode:function(t,i){return this.each(function(){var r=this,f,o,s,u;if(r.grid&&r.p.treeGrid){var l=r.p.expColInd,h=r.p.treeReader.expanded_field,e=r.p.treeReader.leaf_field,c=r.p.treeReader.level_field;i.level=t[c];r.p.treeGridModel=="nested"?(i.lft=t[r.p.treeReader.left_field],i.rgt=t[r.p.treeReader.right_field],t[e]||(t[e]=parseInt(i.rgt,10)===parseInt(i.lft,10)+1?"true":"false")):i.parent_id=t[r.p.treeReader.parent_id_field];f=parseInt(i.level,10);r.p.tree_root_level===0?(o=f+1,s=f):(o=f,s=f-1);u="<div class='tree-wrap tree-wrap-"+r.p.direction+"' style='width:"+o*18+"px;'>";u+="<div style='"+(r.p.direction=="rtl"?"right:":"left:")+s*18+"px;' class='ui-icon ";t[e]=="true"||t[e]===!0?(u+=r.p.treeIcons.leaf+" tree-leaf'",i.isLeaf=!0):(t[h]=="true"||t[h]===!0?(u+=r.p.treeIcons.minus+" tree-minus treeclick'",i.expanded=!0):(u+=r.p.treeIcons.plus+" tree-plus treeclick'",i.expanded=!1),i.isLeaf=!1);u+="<\/div><\/div>";parseInt(t[c],10)!==parseInt(r.p.tree_root_level,10)&&(n(r).jqGrid("isVisibleNode",i)||n(i).css("display","none"));n("td:eq("+l+")",i).wrapInner("<span><\/span>").prepend(u);n(".treeclick",i).bind("click",function(t){var u=t.target||t.srcElement,i=n(u,r.rows).parents("tr.jqgrow")[0].rowIndex;return r.rows[i].isLeaf||(r.rows[i].expanded?(n(r).jqGrid("collapseRow",r.rows[i]),n(r).jqGrid("collapseNode",r.rows[i])):(n(r).jqGrid("expandRow",r.rows[i]),n(r).jqGrid("expandNode",r.rows[i]))),!1});r.p.ExpandColClick===!0&&n("span",i).css("cursor","pointer").bind("click",function(t){var u=t.target||t.srcElement,i=n(u,r.rows).parents("tr.jqgrow")[0].rowIndex;return r.rows[i].isLeaf||(r.rows[i].expanded?(n(r).jqGrid("collapseRow",r.rows[i]),n(r).jqGrid("collapseNode",r.rows[i])):(n(r).jqGrid("expandRow",r.rows[i]),n(r).jqGrid("expandNode",r.rows[i]))),n(r).jqGrid("setSelection",r.rows[i].id),!1})}})},setTreeGrid:function(){return this.each(function(){var t=this,r=0,u,i;if(t.p.treeGrid){t.p.treedatatype||n.extend(t.p,{treedatatype:t.p.datatype});t.p.subGrid=!1;t.p.altRows=!1;t.p.pgbuttons=!1;t.p.pginput=!1;t.p.multiselect=!1;t.p.rowList=[];u="ui-icon-triangle-1-"+(t.p.direction=="rtl"?"w":"e");t.p.treeIcons=n.extend({plus:u,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},t.p.treeIcons||{});t.p.treeGridModel=="nested"?t.p.treeReader=n.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded"},t.p.treeReader):t.p.treeGridModel=="adjacency"&&(t.p.treeReader=n.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded"},t.p.treeReader));for(i in t.p.colModel)if(t.p.colModel.hasOwnProperty(i)){if(t.p.colModel[i].name==t.p.ExpandColumn){t.p.expColInd=r;break}r++}t.p.expColInd||(t.p.expColInd=0);n.each(t.p.treeReader,function(n,i){i&&(t.p.colNames.push(i),t.p.colModel.push({name:i,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(t){this.each(function(){var i=this,r;i.grid&&i.p.treeGrid&&(r=n(i).jqGrid("getNodeChildren",t),n(r).each(function(){n(this).css("display","");this.expanded&&n(i).jqGrid("expandRow",this)}))})},collapseRow:function(t){this.each(function(){var i=this,r;i.grid&&i.p.treeGrid&&(r=n(i).jqGrid("getNodeChildren",t),n(r).each(function(){n(this).css("display","none");this.expanded&&n(i).jqGrid("collapseRow",this)}))})},getRootNodes:function(){var t=[];return this.each(function(){var i=this,r;if(i.grid&&i.p.treeGrid)switch(i.p.treeGridModel){case"nested":r=i.p.treeReader.level_field;n(i.rows).each(function(){parseInt(this[r],10)===parseInt(i.p.tree_root_level,10)&&t.push(this)});break;case"adjacency":n(i.rows).each(function(){(this.parent_id===null||String(this.parent_id).toLowerCase()=="null")&&t.push(this)})}}),t},getNodeDepth:function(t){var i=null;return this.each(function(){var r=this;if(this.grid&&this.p.treeGrid)switch(r.p.treeGridModel){case"nested":i=parseInt(t.level,10)-parseInt(this.p.tree_root_level,10);break;case"adjacency":i=n(r).jqGrid("getNodeAncestors",t).length}}),i},getNodeParent:function(t){var i=null;return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var u=parseInt(t.lft,10),f=parseInt(t.rgt,10),e=parseInt(t.level,10);n(this.rows).each(function(){if(parseInt(this.level,10)===e-1&&parseInt(this.lft,10)<u&&parseInt(this.rgt,10)>f)return i=this,!1});break;case"adjacency":n(this.rows).each(function(){if(this.id==t.parent_id)return i=this,!1})}}),i},getNodeChildren:function(t){var i=[];return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var u=parseInt(t.lft,10),f=parseInt(t.rgt,10),e=parseInt(t.level,10);n(this.rows).each(function(){parseInt(this.level,10)===e+1&&parseInt(this.lft,10)>u&&parseInt(this.rgt,10)<f&&i.push(this)});break;case"adjacency":n(this.rows).each(function(){this.parent_id==t.id&&i.push(this)})}}),i},getFullTreeNode:function(t){var i=[];return this.each(function(){var r=this,u;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var f=parseInt(t.lft,10),e=parseInt(t.rgt,10),o=parseInt(t.level,10);n(this.rows).each(function(){parseInt(this.level,10)>=o&&parseInt(this.lft,10)>=f&&parseInt(this.lft,10)<=e&&i.push(this)});break;case"adjacency":i.push(t);n(this.rows).each(function(n){for(u=i.length,n=0;n<u;n++)if(i[n].id==this.parent_id){i.push(this);break}})}}),i},getNodeAncestors:function(t){var i=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var r=n(this).jqGrid("getNodeParent",t);r;)i.push(r),r=n(this).jqGrid("getNodeParent",r)}),i},isVisibleNode:function(t){var i=!0;return this.each(function(){var r=this,u;r.grid&&r.p.treeGrid&&(u=n(r).jqGrid("getNodeAncestors",t),n(u).each(function(){return i=i&&this.expanded,i?void 0:!1}))}),i},isNodeLoaded:function(t){var i;return this.each(function(){var r=this;r.grid&&r.p.treeGrid&&(i=t.loaded!==undefined?t.loaded:t.isLeaf||n(r).jqGrid("getNodeChildren",t).length>0?!0:!1)}),i},expandNode:function(t){return this.each(function(){this.grid&&this.p.treeGrid&&(t.expanded||(n(this).jqGrid("isNodeLoaded",t)?(t.expanded=!0,n("div.treeclick",t).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):(t.expanded=!0,n("div.treeclick",t).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=t.rowIndex,this.p.datatype=this.p.treedatatype,this.p.treeGridModel=="nested"?n(this).jqGrid("setGridParam",{postData:{nodeid:t.id,n_left:t.lft,n_right:t.rgt,n_level:t.level}}):n(this).jqGrid("setGridParam",{postData:{nodeid:t.id,parentid:t.parent_id,n_level:t.level}}),n(this).trigger("reloadGrid"),this.p.treeGridModel=="nested"?n(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):n(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))))})},collapseNode:function(t){return this.each(function(){this.grid&&this.p.treeGrid&&t.expanded&&(t.expanded=!1,n("div.treeclick",t).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"))})},SortTree:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var r,o,u,f=[],e=this,i=n(this).jqGrid("getRootNodes");for(i.sort(function(n,i){return n.sortKey<i.sortKey?-t:n.sortKey>i.sortKey?t:0}),i[0]&&(n("td",i[0]).each(function(t){n(this).css("width",e.grid.headers[t].width+"px")}),e.grid.cols=i[0].cells),r=0,o=i.length;r<o;r++)u=i[r],f.push(u),n(this).jqGrid("collectChildrenSortTree",f,u,t);n.each(f,function(t,i){n("tbody",e.grid.bDiv).append(i);i.sortKey=null})}})},collectChildrenSortTree:function(t,i,r){return this.each(function(){if(this.grid&&this.p.treeGrid){var u,o,f,e=n(this).jqGrid("getNodeChildren",i);for(e.sort(function(n,t){return n.sortKey<t.sortKey?-r:n.sortKey>t.sortKey?r:0}),u=0,o=e.length;u<o;u++)f=e[u],t.push(f),n(this).jqGrid("collectChildrenSortTree",t,f,r)}})},setTreeRow:function(t,i){var r=!1;return this.each(function(){var u=this;u.grid&&u.p.treeGrid&&(r=n(u).jqGrid("setRowData",t,i))}),r},delTreeNode:function(t){return this.each(function(){var i=this,r,u,f;if(i.grid&&i.p.treeGrid&&(r=n(i).jqGrid("getInd",t,!0),r)){if(u=n(i).jqGrid("getNodeChildren",r),u.length>0)for(f=0;f<u.length;f++)n(i).jqGrid("delRowData",u[f].id);n(i).jqGrid("delRowData",r.id)}})}})}(jQuery),function(n){n.jgrid.extend({getColProp:function(n){var r={},u=this[0],i,t;if(u.grid){for(i=u.p.colModel,t=0;t<i.length;t++)if(i[t].name==n){r=i[t];break}return r}},setColProp:function(t,i){return this.each(function(){var u,r;if(this.grid&&i)for(u=this.p.colModel,r=0;r<u.length;r++)if(u[r].name==t){n.extend(this.p.colModel[r],i);break}})},sortGrid:function(n,t,i){return this.each(function(){var r=this,f=-1,u,e;if(r.grid){for(n||(n=r.p.sortname),u=0;u<r.p.colModel.length;u++)if(r.p.colModel[u].index==n||r.p.colModel[u].name==n){f=u;break}f!=-1&&(e=r.p.colModel[f].sortable,typeof e!="boolean"&&(e=!0),typeof t!="boolean"&&(t=!1),e&&r.sortData("jqgh_"+n,f,t,i))}})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&n(this.p.pager).remove();var t=this.id;try{n("#gbox_"+t).remove()}catch(i){}}})},GridUnload:function(){return this.each(function(){var r,t,i;this.grid&&(r={id:n(this).attr("id"),cl:n(this).attr("class")},this.p.pager&&n(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom"),t=document.createElement("table"),n(t).attr({id:r.id}),t.className=r.cl,i=this.id,n(t).removeClass("ui-jqgrid-btable"),n(this.p.pager).parents("#gbox_"+i).length===1?(n(t).insertBefore("#gbox_"+i).show(),n(this.p.pager).insertBefore("#gbox_"+i)):n(t).insertBefore("#gbox_"+i).show(),n("#gbox_"+i).remove())})},setGridState:function(t){return this.each(function(){if(this.grid){var i=this;t=="hidden"?(n(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+i.p.id).slideUp("fast"),i.p.pager&&n(i.p.pager).slideUp("fast"),i.p.toppager&&n(i.p.toppager).slideUp("fast"),i.p.toolbar[0]===!0&&(i.p.toolbar[1]=="both"&&n(i.grid.ubDiv).slideUp("fast"),n(i.grid.uDiv).slideUp("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+i.p.id).slideUp("fast"),n(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),i.p.gridstate="hidden"):t=="visible"&&(n(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+i.p.id).slideDown("fast"),i.p.pager&&n(i.p.pager).slideDown("fast"),i.p.toppager&&n(i.p.toppager).slideDown("fast"),i.p.toolbar[0]===!0&&(i.p.toolbar[1]=="both"&&n(i.grid.ubDiv).slideDown("fast"),n(i.grid.uDiv).slideDown("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+i.p.id).slideDown("fast"),n(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),i.p.gridstate="visible")}})},updateGridRows:function(t,i,r){var f,e=!1,u;return this.each(function(){var o=this,h,c,s,l;if(!o.grid)return!1;i||(i="id");t&&t.length>0&&n(t).each(function(){if(s=this,c=o.rows.namedItem(s[i]),c){if(l=s[i],r===!0&&o.p.jsonReader.repeatitems===!0){o.p.jsonReader.cell&&(s=s[o.p.jsonReader.cell]);for(var t=0;t<s.length;t++)h=o.formatter(l,s[t],t,s,"edit"),u=o.p.colModel[t].title?{title:n.jgrid.stripHtml(h)}:{},o.p.treeGrid===!0&&f==o.p.ExpandColumn?n("td:eq("+t+") > span:first",c).html(h).attr(u):n("td:eq("+t+")",c).html(h).attr(u);return e=!0,!0}n(o.p.colModel).each(function(t){f=r===!0?this.jsonmap||this.name:this.name;s[f]!==undefined&&(h=o.formatter(l,s[f],t,s,"edit"),u=this.title?{title:n.jgrid.stripHtml(h)}:{},o.p.treeGrid===!0&&f==o.p.ExpandColumn?n("td:eq("+t+") > span:first",c).html(h).attr(u):n("td:eq("+t+")",c).html(h).attr(u),e=!0)})}})}),e},filterGrid:function(t,i){return i=n.extend({gridModel:!1,gridNames:!1,gridToolbar:!1,filterModel:[],formtype:"horizontal",autosearch:!0,formclass:"filterform",tableclass:"filtertable",buttonclass:"filterbutton",searchButton:"Search",clearButton:"Clear",enableSearch:!1,enableClear:!1,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,url:"",marksearched:!0},i||{}),this.each(function(){var r=this,u,s,e;if(this.p=i,this.p.filterModel.length===0&&this.p.gridModel===!1){alert("No filter is set");return}if(!t){alert("No target grid is set!");return}if(this.p.gridid=t.indexOf("#")!=-1?t:"#"+t,u=n(this.p.gridid).jqGrid("getGridParam","colModel"),u)this.p.gridModel===!0?(s=n(this.p.gridid)[0],n.each(u,function(n){var t=[];this.search=this.search===!1?!1:!0;e=this.editrules&&this.editrules.searchhidden===!0?!0:this.hidden===!0?!1:!0;this.search===!0&&e===!0&&(t.label=r.p.gridNames===!0?s.p.colNames[n]:"",t.name=this.name,t.index=this.index||this.name,t.stype=this.edittype||"text",t.stype!="select"&&(t.stype="text"),t.defval=this.defval||"",t.surl=this.surl||"",t.sopt=this.editoptions||{},t.width=this.width,r.p.filterModel.push(t))})):n.each(r.p.filterModel,function(){for(var n=0;n<u.length;n++)if(this.name==u[n].name){this.index=u[n].index||this.name;break}this.index||(this.index=this.name)});else{alert("Could not get grid colModel");return}var f=function(){var f={},e=0,i,t=n(r.p.gridid)[0],u,s,o;t.p.searchdata={};n.isFunction(r.p.beforeSearch)&&r.p.beforeSearch();n.each(r.p.filterModel,function(){u=this.index;switch(this.stype){case"select":if(i=n("select[name="+u+"]",r).val(),i)f[u]=i,r.p.marksearched&&n("#jqgh_"+this.name,t.grid.hDiv).addClass("dirty-cell"),e++;else{r.p.marksearched&&n("#jqgh_"+this.name,t.grid.hDiv).removeClass("dirty-cell");try{delete t.p.postData[this.index]}catch(o){}}break;default:if(i=n("input[name="+u+"]",r).val(),i)f[u]=i,r.p.marksearched&&n("#jqgh_"+this.name,t.grid.hDiv).addClass("dirty-cell"),e++;else{r.p.marksearched&&n("#jqgh_"+this.name,t.grid.hDiv).removeClass("dirty-cell");try{delete t.p.postData[this.index]}catch(o){}}}});s=e>0?!0:!1;n.extend(t.p.postData,f);r.p.url&&(o=n(t).jqGrid("getGridParam","url"),n(t).jqGrid("setGridParam",{url:r.p.url}));n(t).jqGrid("setGridParam",{search:s}).trigger("reloadGrid",[{page:1}]);o&&n(t).jqGrid("setGridParam",{url:o});n.isFunction(r.p.afterSearch)&&r.p.afterSearch()},h=function(){var f={},i,e=0,t=n(r.p.gridid)[0],u,s,o;n.isFunction(r.p.beforeClear)&&r.p.beforeClear();n.each(r.p.filterModel,function(){u=this.index;i=this.defval?this.defval:"";this.stype||(this.stype="text");switch(this.stype){case"select":var o;if(n("select[name="+u+"] option",r).each(function(t){return t===0&&(this.selected=!0),n(this).text()==i?(this.selected=!0,o=n(this).val(),!1):void 0}),o)f[u]=o,r.p.marksearched&&n("#jqgh_"+this.name,t.grid.hDiv).addClass("dirty-cell"),e++;else{r.p.marksearched&&n("#jqgh_"+this.name,t.grid.hDiv).removeClass("dirty-cell");try{delete t.p.postData[this.index]}catch(s){}}break;case"text":if(n("input[name="+u+"]",r).val(i),i)f[u]=i,r.p.marksearched&&n("#jqgh_"+this.name,t.grid.hDiv).addClass("dirty-cell"),e++;else{r.p.marksearched&&n("#jqgh_"+this.name,t.grid.hDiv).removeClass("dirty-cell");try{delete t.p.postData[this.index]}catch(s){}}}});s=e>0?!0:!1;n.extend(t.p.postData,f);r.p.url&&(o=n(t).jqGrid("getGridParam","url"),n(t).jqGrid("setGridParam",{url:r.p.url}));n(t).jqGrid("setGridParam",{search:s}).trigger("reloadGrid",[{page:1}]);o&&n(t).jqGrid("setGridParam",{url:o});n.isFunction(r.p.afterClear)&&r.p.afterClear()},l=function(){var u=document.createElement("tr"),i,s,c,e,t;r.p.formtype=="horizontal"&&n(o).append(u);n.each(r.p.filterModel,function(s){var h,l,a,w,y,c,p,v,b;e=document.createElement("td");n(e).append("<label for='"+this.name+"'>"+this.label+"<\/label>");t=document.createElement("td");h=this;this.stype||(this.stype="text");switch(this.stype){case"select":if(this.surl)n(t).load(this.surl,function(){h.defval&&n("select",this).val(h.defval);n("select",this).attr({name:h.index||h.name,id:"sg_"+h.name});h.sopt&&n("select",this).attr(h.sopt);r.p.gridToolbar===!0&&h.width&&n("select",this).width(h.width);r.p.autosearch===!0&&n("select",this).change(function(){return f(),!1})});else if(h.sopt.value){if(l=h.sopt.value,a=document.createElement("select"),n(a).attr({name:h.index||h.name,id:"sg_"+h.name}).attr(h.sopt),typeof l=="string")for(w=l.split(";"),p=0;p<w.length;p++)y=w[p].split(":"),c=document.createElement("option"),c.value=y[0],c.innerHTML=y[1],y[1]==h.defval&&(c.selected="selected"),a.appendChild(c);else if(typeof l=="object")for(v in l)l.hasOwnProperty(v)&&(s++,c=document.createElement("option"),c.value=v,c.innerHTML=l[v],l[v]==h.defval&&(c.selected="selected"),a.appendChild(c));r.p.gridToolbar===!0&&h.width&&n(a).width(h.width);n(t).append(a);r.p.autosearch===!0&&n(a).change(function(){return f(),!1})}break;case"text":b=this.defval?this.defval:"";n(t).append("<input type='text' name='"+(this.index||this.name)+"' id='sg_"+this.name+"' value='"+b+"'/>");h.sopt&&n("input",t).attr(h.sopt);r.p.gridToolbar===!0&&h.width&&(n.browser.msie?n("input",t).width(h.width-4):n("input",t).width(h.width-2));r.p.autosearch===!0&&n("input",t).keypress(function(n){var t=n.charCode?n.charCode:n.keyCode?n.keyCode:0;return t==13?(f(),!1):this})}r.p.formtype=="horizontal"?(r.p.gridToolbar===!0&&r.p.gridNames===!1?n(u).append(t):n(u).append(e).append(t),n(u).append(t)):(i=document.createElement("tr"),n(i).append(e).append(t),n(o).append(i))});t=document.createElement("td");r.p.enableSearch===!0&&(s="<input type='button' id='sButton' class='"+r.p.buttonclass+"' value='"+r.p.searchButton+"'/>",n(t).append(s),n("input#sButton",t).click(function(){return f(),!1}));r.p.enableClear===!0&&(c="<input type='button' id='cButton' class='"+r.p.buttonclass+"' value='"+r.p.clearButton+"'/>",n(t).append(c),n("input#cButton",t).click(function(){return h(),!1}));(r.p.enableClear===!0||r.p.enableSearch===!0)&&(r.p.formtype=="horizontal"?n(u).append(t):(i=document.createElement("tr"),n(i).append("<td>&#160;<\/td>").append(t),n(o).append(i)))},c=n("<form name='SearchForm' style=display:inline;' class='"+this.p.formclass+"'><\/form>"),o=n("<table class='"+this.p.tableclass+"' cellspacing='0' cellpading='0' border='0'><tbody><\/tbody><\/table>");n(c).append(o);l();n(this).append(c);this.triggerSearch=f;this.clearSearch=h})},filterToolbar:function(t){return t=n.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND"},t||{}),this.each(function(){function u(t,i){var r=n(t);r[0]&&jQuery.each(i,function(){this.data!==undefined?r.bind(this.type,this.data,this.fn):r.bind(this.type,this.fn)})}var i=this,r=function(){var e={},o=0,f,r,s={},a,u,h,c,l;n.each(i.p.colModel,function(){r=this.index||this.name;var t=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"bw";switch(this.stype){case"select":if(f=n("select[name="+r+"]",i.grid.hDiv).val(),f)e[r]=f,s[r]=t,o++;else try{delete i.p.postData[r]}catch(u){}break;case"text":if(f=n("input[name="+r+"]",i.grid.hDiv).val(),f)e[r]=f,s[r]=t,o++;else try{delete i.p.postData[r]}catch(u){}}});a=o>0?!0:!1;t.stringResult?(u='{"groupOp":"'+t.groupOp+'","rules":[',h=0,n.each(e,function(n,t){h>0&&(u+=",");u+='{"field":"'+n+'",';u+='"op":"'+s[n]+'",';u+='"data":"'+t+'"}';h++}),u+="]}",n.extend(i.p.postData,{filters:u})):n.extend(i.p.postData,e);i.p.searchurl&&(c=i.p.url,n(i).jqGrid("setGridParam",{url:i.p.searchurl}));l=!1;n.isFunction(t.beforeSearch)&&(l=t.beforeSearch.call(i));l||n(i).jqGrid("setGridParam",{search:a}).trigger("reloadGrid",[{page:1}]);c&&n(i).jqGrid("setGridParam",{url:c});n.isFunction(t.afterSearch)&&t.afterSearch()},o=function(r){var o={},e,s=0,u,a,f,h,c,l;r=typeof r!="boolean"?!0:r;n.each(i.p.colModel,function(){e=this.searchoptions&&this.searchoptions.defaultValue?this.searchoptions.defaultValue:"";u=this.index||this.name;switch(this.stype){case"select":var t;if(n("select[name="+u+"] option",i.grid.hDiv).each(function(i){return i===0&&(this.selected=!0),n(this).text()==e?(this.selected=!0,t=n(this).val(),!1):void 0}),t)o[u]=t,s++;else try{delete i.p.postData[u]}catch(r){}break;case"text":if(n("input[name="+u+"]",i.grid.hDiv).val(e),e)o[u]=e,s++;else try{delete i.p.postData[u]}catch(r){}}});a=s>0?!0:!1;t.stringResult?(f='{"groupOp":"'+t.groupOp+'","rules":[',h=0,n.each(o,function(n,t){h>0&&(f+=",");f+='{"field":"'+n+'",';f+='"op":"eq",';f+='"data":"'+t+'"}';h++}),f+="]}",n.extend(i.p.postData,{filters:f})):n.extend(i.p.postData,o);i.p.searchurl&&(c=i.p.url,n(i).jqGrid("setGridParam",{url:i.p.searchurl}));l=!1;n.isFunction(t.beforeClear)&&(l=t.beforeClear.call(i));l||r&&n(i).jqGrid("setGridParam",{search:a}).trigger("reloadGrid",[{page:1}]);c&&n(i).jqGrid("setGridParam",{url:c});n.isFunction(t.afterClear)&&t.afterClear()},s=function(){var t=n("tr.ui-search-toolbar",i.grid.hDiv);t.css("display")=="none"?t.show():t.hide()},e=n("<tr class='ui-search-toolbar' role='rowheader'><\/tr>"),f;n.each(i.p.colModel,function(){var s=this,c,y,o,b,l,a,h,k,d,v,p,w,g;if(y=n("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+i.p.direction+"'><\/th>"),c=n("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'><\/div>"),this.hidden===!0&&n(y).css("display","none"),this.search=this.search===!1?!1:!0,typeof this.stype=="undefined"&&(this.stype="text"),o=n.extend({},this.searchoptions||{}),this.search)switch(this.stype){case"select":if(b=this.surl||o.dataUrl,b)l=c,n.ajax(n.extend({url:b,dataType:"html",complete:function(i){if(o.buildSelect!==undefined){var f=o.buildSelect(i);f&&n(l).append(f)}else n(l).append(i.responseText);o.defaultValue&&n("select",l).val(o.defaultValue);n("select",l).attr({name:s.index||s.name,id:"gs_"+s.name});o.attr&&n("select",l).attr(o.attr);n("select",l).css({width:"100%"});o.dataInit!==undefined&&o.dataInit(n("select",l)[0]);o.dataEvents!==undefined&&u(n("select",l)[0],o.dataEvents);t.autosearch===!0&&n("select",l).change(function(){return r(),!1});i=null}},n.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));else if(s.searchoptions&&s.searchoptions.value?a=s.searchoptions.value:s.editoptions&&s.editoptions.value&&(a=s.editoptions.value),a){if(h=document.createElement("select"),h.style.width="100%",n(h).attr({name:s.index||s.name,id:"gs_"+s.name}),typeof a=="string")for(k=a.split(";"),p=0;p<k.length;p++)d=k[p].split(":"),v=document.createElement("option"),v.value=d[0],v.innerHTML=d[1],h.appendChild(v);else if(typeof a=="object")for(w in a)a.hasOwnProperty(w)&&(v=document.createElement("option"),v.value=w,v.innerHTML=a[w],h.appendChild(v));o.defaultValue&&n(h).val(o.defaultValue);o.attr&&n(h).attr(o.attr);o.dataInit!==undefined&&o.dataInit(h);o.dataEvents!==undefined&&u(h,o.dataEvents);n(c).append(h);t.autosearch===!0&&n(h).change(function(){return r(),!1})}break;case"text":g=o.defaultValue?o.defaultValue:"";n(c).append("<input type='text' style='width:95%;padding:0px;' name='"+(s.index||s.name)+"' id='gs_"+s.name+"' value='"+g+"'/>");o.attr&&n("input",c).attr(o.attr);o.dataInit!==undefined&&o.dataInit(n("input",c)[0]);o.dataEvents!==undefined&&u(n("input",c)[0],o.dataEvents);t.autosearch===!0&&(t.searchOnEnter?n("input",c).keypress(function(n){var t=n.charCode?n.charCode:n.keyCode?n.keyCode:0;return t==13?(r(),!1):this}):n("input",c).keydown(function(n){var t=n.which;switch(t){case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:f&&clearTimeout(f);f=setTimeout(function(){r()},500)}}))}n(y).append(c);n(e).append(y)});n("table thead",i.grid.hDiv).append(e);this.triggerToolbar=r;this.clearToolbar=o;this.toggleToolbar=s})}})}(jQuery),function(n){n.jgrid.extend({getPostData:function(){var n=this[0];if(n.grid)return n.p.postData},setPostData:function(n){var t=this[0];t.grid&&(typeof n=="object"?t.p.postData=n:alert("Error: cannot add a non-object postData value. postData unchanged."))},appendPostData:function(t){var i=this[0];i.grid&&(typeof t=="object"?n.extend(i.p.postData,t):alert("Error: cannot append a non-object postData value. postData unchanged."))},setPostDataItem:function(n,t){var i=this[0];i.grid&&(i.p.postData[n]=t)},getPostDataItem:function(n){var t=this[0];if(t.grid)return t.p.postData[n]},removePostDataItem:function(n){var t=this[0];t.grid&&delete t.p.postData[n]},getUserData:function(){var n=this[0];if(n.grid)return n.p.userData},getUserDataItem:function(n){var t=this[0];if(t.grid)return t.p.userData[n]}})}(jQuery),function(n){n.jgrid.extend({setColumns:function(t){return t=n.extend({top:0,left:0,width:200,height:"auto",dataheight:"auto",modal:!1,drag:!0,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:!0,ShrinkToFit:!1,jqModal:!1,saveicon:[!0,"left","ui-icon-disk"],closeicon:[!0,"left","ui-icon-close"],onClose:null,colnameview:!0,closeAfterSubmit:!0,updateAfterCheck:!1,recreateForm:!1},n.jgrid.col,t||{}),this.each(function(){var r=this,c,o,l,a;if(r.grid){var s=typeof t.beforeShowForm=="function"?!0:!1,h=typeof t.afterShowForm=="function"?!0:!1,v=typeof t.afterSubmitForm=="function"?!0:!1,f=r.p.id,u="ColTbl_"+f,e={themodal:"colmod"+f,modalhead:"colhd"+f,modalcontent:"colcnt"+f,scrollelm:u};if(t.recreateForm===!0&&n("#"+e.themodal).html()!=null&&n("#"+e.themodal).remove(),n("#"+e.themodal).html()!=null)s&&t.beforeShowForm(n("#"+u)),viewModal("#"+e.themodal,{gbox:"#gbox_"+f,jqm:t.jqModal,jqM:!1,modal:t.modal}),h&&t.afterShowForm(n("#"+u));else{for(c=isNaN(t.dataheight)?t.dataheight:t.dataheight+"px",o="<div id='"+u+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+c+";'>",o+="<table class='ColTable' cellspacing='1' cellpading='2' border='0'><tbody>",i=0;i<this.p.colNames.length;i++)r.p.colModel[i].hidedlg||(o+="<tr><td style='white-space: pre;'><input type='checkbox' style='margin-right:5px;' id='col_"+this.p.colModel[i].name+"' class='cbox' value='T' "+(this.p.colModel[i].hidden===!1?"checked":"")+"/><label for='col_"+this.p.colModel[i].name+"'>"+this.p.colNames[i]+(t.colnameview?" ("+this.p.colModel[i].name+")":"")+"<\/label><\/td><\/tr>");o+="<\/tbody><\/table><\/div>";l=t.updateAfterCheck?"":"<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+t.bSubmit+"<\/a>";a="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+t.bCancel+"<\/a>";o+="<table border='0' class='EditTable' id='"+u+"_2'><tbody><tr style='display:block;height:3px;'><td><\/td><\/tr><tr><td class='DataTD ui-widget-content'><\/td><\/tr><tr><td class='ColButton EditButton'>"+l+"&#160;"+a+"<\/td><\/tr><\/tbody><\/table>";t.gbox="#gbox_"+f;createModal(e,o,t,"#gview_"+r.p.id,n("#gview_"+r.p.id)[0]);t.saveicon[0]==!0&&n("#dData","#"+u+"_2").addClass(t.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+t.saveicon[2]+"'><\/span>");t.closeicon[0]==!0&&n("#eData","#"+u+"_2").addClass(t.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+t.closeicon[2]+"'><\/span>");t.updateAfterCheck?n(":input","#"+u).click(function(){var i=this.id.substr(4);return i&&(this.checked?n(r).jqGrid("showCol",i):n(r).jqGrid("hideCol",i),t.ShrinkToFit===!0&&n(r).jqGrid("setGridWidth",r.grid.width-.001,!0)),this}):n("#dData","#"+u+"_2").click(function(){for(i=0;i<r.p.colModel.length;i++)if(!r.p.colModel[i].hidedlg){var o=r.p.colModel[i].name.replace(".","\\.");n("#col_"+o,"#"+u).attr("checked")?(n(r).jqGrid("showCol",r.p.colModel[i].name),n("#col_"+o,"#"+u).attr("defaultChecked",!0)):(n(r).jqGrid("hideCol",r.p.colModel[i].name),n("#col_"+o,"#"+u).attr("defaultChecked",""))}return t.ShrinkToFit===!0&&n(r).jqGrid("setGridWidth",r.grid.width-.001,!0),t.closeAfterSubmit&&hideModal("#"+e.themodal,{gb:"#gbox_"+f,jqm:t.jqModal,onClose:t.onClose}),v&&t.afterSubmitForm(n("#"+u)),!1});n("#eData","#"+u+"_2").click(function(){return hideModal("#"+e.themodal,{gb:"#gbox_"+f,jqm:t.jqModal,onClose:t.onClose}),!1});n("#dData, #eData","#"+u+"_2").hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")});s&&t.beforeShowForm(n("#"+u));viewModal("#"+e.themodal,{gbox:"#gbox_"+f,jqm:t.jqModal,jqM:!0,modal:t.modal});h&&t.afterShowForm(n("#"+u))}}})}})}(jQuery),function(n){n.jgrid.extend({jqGridImport:function(t){return t=n.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{}),this.each(function(){var r=this,u=function(t,i){var s=n(i.xmlGrid.config,t)[0],h=n(i.xmlGrid.data,t)[0],u,f,e,o;if(xmlJsonClass.xml2json&&n.jgrid.parse){u=xmlJsonClass.xml2json(s," ");u=n.jgrid.parse(u);for(e in u)u.hasOwnProperty(e)&&(f=u[e]);h?(o=u.grid.datatype,u.grid.datatype="xmlstring",u.grid.datastr=t,n(r).jqGrid(f).jqGrid("setGridParam",{datatype:o})):n(r).jqGrid(f);u=null;f=null}else alert("xml2json or parse are not present")},f=function(t,i){var o;if(t&&typeof t=="string"){var f=n.jgrid.parse(t),u=f[i.jsonGrid.config],e=f[i.jsonGrid.data];e?(o=u.datatype,u.datatype="jsonstring",u.datastr=e,n(r).jqGrid(u).jqGrid("setGridParam",{datatype:o})):n(r).jqGrid(u)}},i;switch(t.imptype){case"xml":n.ajax(n.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(i,r){r=="success"&&(u(i.responseXML,t),n.isFunction(t.importComplete)&&t.importComplete(i));i=null}},t.ajaxOptions));break;case"xmlstring":t.impstring&&typeof t.impstring=="string"&&(i=n.jgrid.stringToDoc(t.impstring),i&&(u(i,t),n.isFunction(t.importComplete)&&t.importComplete(i),t.impstring=null),i=null);break;case"json":n.ajax(n.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(i,r){r=="success"&&(f(i.responseText,t),n.isFunction(t.importComplete)&&t.importComplete(i));i=null}},t.ajaxOptions));break;case"jsonstring":t.impstring&&typeof t.impstring=="string"&&(f(t.impstring,t),n.isFunction(t.importComplete)&&t.importComplete(t.impstring),t.impstring=null)}})},jqGridExport:function(t){t=n.extend({exptype:"xmlstring",root:"grid",ident:"\t"},t||{});var i=null;return this.each(function(){var r,u;if(this.grid){if(r=n.extend({},n(this).jqGrid("getGridParam")),r.rownumbers&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.multiselect&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.subGrid&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.knv=null,r.treeGrid)for(u in r.treeReader)r.treeReader.hasOwnProperty(u)&&(r.colNames.splice(r.colNames.length-1),r.colModel.splice(r.colModel.length-1));switch(t.exptype){case"xmlstring":i="<"+t.root+">"+xmlJsonClass.json2xml(r,t.ident)+"<\/"+t.root+">";break;case"jsonstring":i="{"+xmlJsonClass.toJson(r,t.root,t.ident)+"}";r.postData.filters!==undefined&&(i=i.replace(/filters":"/,'filters":'),i=i.replace(/}]}"/,"}]}"))}}}),i},excelExport:function(t){return t=n.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each(function(){var i,r;($t=this,this.grid)&&t.exptype=="remote"&&(i=n.extend({},this.p.postData),i[t.oper]=t.tag,r=jQuery.param(i),window.location=t.url+"?"+r)})}})}(jQuery),function(n){function t(t,i,r,u,f){var e=i;return n.fn.fmatter[t]&&(e=n.fn.fmatter[t](i,r,u,f)),e}n.fmatter={};n.fn.fmatter=function(i,r,u,f,e){return u=n.extend({},n.jgrid.formatter,u),t(i,r,u,f,e)};n.fmatter.util={NumberFormat:function(n,t){var o,s,c,u,h,f;if(isNumber(n)||(n*=1),isNumber(n)){var l=n<0,i=n+"",e=t.decimalSeparator?t.decimalSeparator:".",r;if(isNumber(t.decimalPlaces)&&(o=t.decimalPlaces,s=Math.pow(10,o),i=Math.round(n*s)/s+"",r=i.lastIndexOf("."),o>0))for(r<0?(i+=e,r=i.length-1):e!=="."&&(i=i.replace(".",e));i.length-1-r<o;)i+="0";if(t.thousandsSeparator){for(c=t.thousandsSeparator,r=i.lastIndexOf(e),r=r>-1?r:i.length,u=i.substring(r),h=-1,f=r;f>0;f--)h++,h%3==0&&f!==r&&(!l||f>1)&&(u=c+u),u=i.charAt(f-1)+u;i=u}return i=t.prefix?t.prefix+i:i,t.suffix?i+t.suffix:i}return n},DateFormat:function(t,i,r,u){var h=function(n,t){for(n=String(n),t=parseInt(t,10)||2;n.length<t;)n="0"+n;return n},f={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},e=0,s,o,g,c=["i18n"],a;if(c.i18n={dayNames:u.dayNames,monthNames:u.monthNames},t in u.masks&&(t=u.masks[t]),i.constructor===Date)e=i;else{for(i=i.split(/[\\\/:_;.\t\T\s-]/),t=t.split(/[\\\/:_;.\t\T\s-]/),o=0,g=t.length;o<g;o++)t[o]=="M"&&(s=n.inArray(i[o],c.i18n.monthNames),s!==-1&&s<12&&(i[o]=s+1)),t[o]=="F"&&(s=n.inArray(i[o],c.i18n.monthNames),s!==-1&&s>11&&(i[o]=s+1-12)),f[t[o].toLowerCase()]=parseInt(i[o],10);f.m=parseInt(f.m,10)-1;a=f.y;a>=70&&a<=99?f.y=1900+f.y:a>=0&&a<=69&&(f.y=2e3+f.y);e=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u)}r in u.masks?r=u.masks[r]:r||(r="Y-m-d");var l=e.getHours(),tt=e.getMinutes(),p=e.getDate(),v=e.getMonth()+1,k=e.getTimezoneOffset(),it=e.getSeconds(),rt=e.getMilliseconds(),w=e.getDay(),y=e.getFullYear(),b=(w+6)%7+1,d=(new Date(y,v-1,p)-new Date(y,0,1))/864e5,nt={d:h(p),D:c.i18n.dayNames[w],j:p,l:c.i18n.dayNames[w+7],N:b,S:u.S(p),w:w,z:d,W:b<5?Math.floor((d+b-1)/7)+1:Math.floor((d+b-1)/7)||((new Date(y-1,0,1).getDay()+6)%7<4?53:52),F:c.i18n.monthNames[v- -11],m:h(v),M:c.i18n.monthNames[v-1],n:v,t:"?",L:"?",o:"?",Y:y,y:String(y).substring(2),a:l<12?u.AmPm[0]:u.AmPm[1],A:l<12?u.AmPm[2]:u.AmPm[3],B:"?",g:l%12||12,G:l,h:h(l%12||12),H:h(l),i:h(tt),s:h(it),u:rt,e:"?",I:"?",O:(k>0?"-":"+")+h(Math.floor(Math.abs(k)/60)*100+Math.abs(k)%60,4),P:"?",T:(String(e).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(e/1e3)};return r.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(n){return n in nt?nt[n]:n.substring(1)})}};n.fn.fmatter.defaultFormat=function(n,t){return isValue(n)&&n!==""?n:t.defaultValue?t.defaultValue:"&#160;"};n.fn.fmatter.email=function(t,i){return isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):'<a href="mailto:'+t+'">'+t+"<\/a>"};n.fn.fmatter.checkbox=function(t,i){var r=n.extend({},i.checkbox),u,f;return isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),u=r.disabled===!0?"disabled":"",(isEmpty(t)||isUndefined(t))&&(t=n.fn.fmatter.defaultFormat(t,r)),t=t+"",t=t.toLowerCase(),f=t.search(/(false|0|no|off)/i)<0?" checked='checked' ":"",'<input type="checkbox" '+f+' value="'+t+'" offval="no" '+u+"/>"};n.fn.fmatter.link=function(t,i){var r={target:i.target},u="";return isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(u="target="+r.target),isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):"<a "+u+' href="'+t+'">'+t+"<\/a>"};n.fn.fmatter.showlink=function(t,i){var r={baseLinkUrl:i.baseLinkUrl,showAction:i.showAction,addParam:i.addParam||"",target:i.target,idName:i.idName},u="",f;return isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(u="target="+r.target),f=r.baseLinkUrl+r.showAction+"?"+r.idName+"="+i.rowId+r.addParam,isString(t)?"<a "+u+' href="'+f+'">'+t+"<\/a>":n.fn.fmatter.defaultFormat(t,i)};n.fn.fmatter.integer=function(t,i){var r=n.extend({},i.integer);return(isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.number=function(t,i){var r=n.extend({},i.number);return(isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.currency=function(t,i){var r=n.extend({},i.currency);return(isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.date=function(t,i,r,u){var f=n.extend({},i.date);return isUndefined(i.colModel.formatoptions)||(f=n.extend({},f,i.colModel.formatoptions)),f.reformatAfterEdit||u!="edit"?isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):n.fmatter.util.DateFormat(f.srcformat,t,f.newformat,f):n.fn.fmatter.defaultFormat(t,i)};n.fn.fmatter.select=function(t,i){var r,f,o,e,u,h,c,s;if(t=t+"",r=!1,f=[],isUndefined(i.colModel.editoptions)||(r=i.colModel.editoptions.value),r)if(o=i.colModel.editoptions.multiple===!0?!0:!1,e=[],o&&(e=t.split(","),e=n.map(e,function(t){return n.trim(t)})),isString(r)){for(h=r.split(";"),c=0,s=0;s<h.length;s++)if(u=h[s].split(":"),u.length>2&&(u[1]=jQuery.map(u,function(n,t){if(t>0)return n}).join(":")),o)jQuery.inArray(u[0],e)>-1&&(f[c]=u[1],c++);else if(n.trim(u[0])==n.trim(t)){f[0]=u[1];break}}else isObject(r)&&(o?f=jQuery.map(e,function(n){return r[n]}):f[0]=r[t]||"");return t=f.join(", "),t==""?n.fn.fmatter.defaultFormat(t,i):t};n.fn.fmatter.rowactions=function(t,i,r,u){switch(r){case"edit":var f=function(){n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i).show();n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i).hide()};n("#"+i).jqGrid("editRow",t,u,null,null,null,{oper:"edit"},f,null,f);n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i).hide();n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i).show();break;case"save":n("#"+i).jqGrid("saveRow",t,null,null);n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i).show();n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i).hide();break;case"cancel":n("#"+i).jqGrid("restoreRow",t);n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i).show();n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i).hide()}};n.fn.fmatter.actions=function(t,i){var e={keys:!1,editbutton:!0,delbutton:!0},f,r,u;return(isUndefined(i.colModel.formatoptions)||(e=n.extend(e,i.colModel.formatoptions)),f=i.rowId,r="",typeof f=="undefined"||isEmpty(f))?"":(e.editbutton&&(u="onclick=$.fn.fmatter.rowactions('"+f+"','"+i.gid+"','edit',"+e.keys+");",r=r+"<div style='margin-left:8px;'><div title='"+n.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+u+"><span class='ui-icon ui-icon-pencil'><\/span><\/div>"),e.delbutton&&(u="onclick=jQuery('#"+i.gid+"').jqGrid('delGridRow','"+f+"');",r=r+"<div title='"+n.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+u+"><span class='ui-icon ui-icon-trash'><\/span><\/div>"),u="onclick=$.fn.fmatter.rowactions('"+f+"','"+i.gid+"','save',false);",r=r+"<div title='"+n.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save'><span class='ui-icon ui-icon-disk' "+u+"><\/span><\/div>",u="onclick=$.fn.fmatter.rowactions('"+f+"','"+i.gid+"','cancel',false);",r+"<div title='"+n.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel'><span class='ui-icon ui-icon-cancel' "+u+"><\/span><\/div><\/div>")};n.unformat=function(t,i,r,u){var e,h=i.colModel.formatter,f=i.colModel.formatoptions||{},o,l=/([\.\*\_\'\(\)\{\}\+\?\\])/g,c,s,a;if(unformatFunc=i.colModel.unformat||n.fn.fmatter[h]&&n.fn.fmatter[h].unformat,typeof unformatFunc!="undefined"&&isFunction(unformatFunc))e=unformatFunc(n(t).text(),i,t);else if(typeof h!="undefined"&&isString(h)){c=n.jgrid.formatter||{};switch(h){case"integer":f=n.extend({},c.integer,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text().replace(s,"");break;case"number":f=n.extend({},c.number,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text().replace(s,"").replace(f.decimalSeparator,".");break;case"currency":f=n.extend({},c.currency,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text().replace(s,"").replace(f.decimalSeparator,".").replace(f.prefix,"").replace(f.suffix,"");break;case"checkbox":a=i.colModel.editoptions?i.colModel.editoptions.value.split(":"):["Yes","No"];e=n("input",t).attr("checked")?a[0]:a[1];break;case"select":e=n.unformat.select(t,i,r,u);break;case"actions":return"";default:e=n(t).text()}}return e?e:u===!0?n(t).text():n.jgrid.htmlDecode(n(t).html())};n.unformat.select=function(t,i,r,u){var s=[],e=n(t).text(),h,v,y,l;if(u===!0)return e;if(h=n.extend({},i.colModel.editoptions),h.value){var c=h.value,a=h.multiple===!0?!0:!1,f=[],o;if(a&&(f=e.split(","),f=n.map(f,function(t){return n.trim(t)})),isString(c)){for(v=c.split(";"),y=0,l=0;l<v.length;l++)if(o=v[l].split(":"),a)jQuery.inArray(o[1],f)>-1&&(s[y]=o[0],y++);else if(n.trim(o[1])==n.trim(e)){s[0]=o[0];break}}else isObject(c)&&(a||(f[0]=e),s=jQuery.map(f,function(t){var i;return n.each(c,function(n,r){if(r==t)return i=n,!1}),i?i:void 0}));return s.join(", ")}return e||""};isValue=function(n){return isObject(n)||isString(n)||isNumber(n)||isBoolean(n)};isBoolean=function(n){return typeof n=="boolean"};isNull=function(n){return n===null};isNumber=function(n){return typeof n=="number"&&isFinite(n)};isString=function(n){return typeof n=="string"};isEmpty=function(t){return!isString(t)&&isValue(t)?!1:isValue(t)?(t=n.trim(t).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),t===""):!0};isUndefined=function(n){return typeof n=="undefined"};isObject=function(n){return n&&(typeof n=="object"||isFunction(n))||!1};isFunction=function(n){return typeof n=="function"}}(jQuery),function($){if($.browser.msie&&$.browser.version==8&&($.expr[":"].hidden=function(n){return n.offsetWidth===0||n.offsetHeight===0||n.style.display=="none"}),$.jgrid._multiselect=!1,$.ui&&$.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var n=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(t,i){var u=n.call(this,t,i),r;return i&&this.selectedList&&(r=this.element,this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(r)})),u}}$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();$.Widget===undefined?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)});$.jgrid._multiselect=!0}$.jgrid.extend({sortableColumns:function(n){return this.each(function(){function r(){t.p.disableClick=!0}var t=this,i={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_cb,#jqgh_rn,#jqgh_subgrid),:hidden)",placeholder:{element:function(n){return $(document.createElement(n[0].nodeName)).addClass(n[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(n,t){t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10));t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}},update:function(n,i){var f=$(i.item).parent(),e=$(">th",f),o=t.p.colModel,u={},r;$.each(o,function(n){u[this.name]=n});r=[];e.each(function(){var n=$(">div",this).get(0).id.replace(/^jqgh_/,"");n in u&&r.push(u[n])});$(t).jqGrid("remapColumns",r,!0,!0);$.isFunction(t.p.sortable.update)&&t.p.sortable.update(r);setTimeout(function(){t.p.disableClick=!1},50)}},u;t.p.sortable.options?$.extend(i,t.p.sortable.options):$.isFunction(t.p.sortable)&&(t.p.sortable={update:t.p.sortable});i.start?(u=i.start,i.start=function(n,t){r();u.call(this,n,t)}):i.start=r;t.p.sortable.exclude&&(i.items+=":not("+t.p.sortable.exclude+")");n.sortable(i).data("sortable").floating=!0})},columnChooser:function(n){function l(n,t,i){if(t>=0){var r=n.slice(),u=r.splice(t,Math.max(n.length-t,t));return t>n.length&&(t=n.length),r[t]=i,r.concat(u)}}function f(n,t){n&&(typeof n=="string"?$.fn[n]&&$.fn[n].apply(t,$.makeArray(arguments).slice(2)):$.isFunction(n)&&n.apply(t,$.makeArray(arguments).slice(2)))}var t=this,r,i,o,s;if(!$("#colchooser_"+t[0].p.id).length){if(r=$('<div id="colchooser_'+t[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"><\/select><\/div><\/div>'),i=$("select",r),n=$.extend({width:420,height:240,classname:null,done:function(n){n&&t.jqGrid("remapColumns",n,!0)},msel:"multiselect",dlog:"dialog",dlog_opts:function(n){var t={};return t[n.bSubmit]=function(){n.apply_perm();n.cleanup(!1)},t[n.bCancel]=function(){n.cleanup(!0)},{buttons:t,close:function(){n.cleanup(!0)},modal:!1,resizable:!1,width:n.width+20}},apply_perm:function(){$("option",i).each(function(){this.selected?t.jqGrid("showCol",u[this.value].name):t.jqGrid("hideCol",u[this.value].name)});var r=[];$("option[selected]",i).each(function(){r.push(parseInt(this.value,10))});$.each(r,function(){delete e[u[parseInt(this,10)].name]});$.each(e,function(){var n=parseInt(this,10);r=l(r,n,n)});n.done&&n.done.call(t,r)},cleanup:function(u){f(n.dlog,r,"destroy");f(n.msel,i,"destroy");r.remove();u&&n.done&&n.done.call(t)},msel_opts:{}},$.jgrid.col,n||{}),$.ui&&$.ui.multiselect&&n.msel=="multiselect"){if(!$.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}n.msel_opts=$.extend($.ui.multiselect.defaults,n.msel_opts)}n.caption&&r.attr("title",n.caption);n.classname&&(r.addClass(n.classname),i.addClass(n.classname));n.width&&($(">div",r).css({width:n.width,margin:"0 auto"}),i.css("width",n.width));n.height&&($(">div",r).css("height",n.height),i.css("height",n.height-10));var u=t.jqGrid("getGridParam","colModel"),h=t.jqGrid("getGridParam","colNames"),e={},c=[];i.empty();$.each(u,function(n){if(e[this.name]=n,this.hidedlg){this.hidden||c.push(n);return}i.append("<option value='"+n+"' "+(this.hidden?"":"selected='selected'")+">"+h[n]+"<\/option>")});o=$.isFunction(n.dlog_opts)?n.dlog_opts.call(t,n):n.dlog_opts;f(n.dlog,r,o);s=$.isFunction(n.msel_opts)?n.msel_opts.call(t,n):n.msel_opts;f(n.msel,i,s)}},sortableRows:function(n){return this.each(function(){var t=this;t.grid&&(t.p.treeGrid||$.fn.sortable&&(n=$.extend({cursor:"move",axis:"y",items:".jqgrow"},n||{}),n.start&&$.isFunction(n.start)?(n._start_=n.start,delete n.start):n._start_=!1,n.update&&$.isFunction(n.update)?(n._update_=n.update,delete n.update):n._update_=!1,n.start=function(i,r){if($(r.item).css("border-width","0px"),$("td",r.item).each(function(n){this.style.width=t.grid.cols[n].style.width}),t.p.subGrid){var u=$(r.item).attr("id");try{$(t).jqGrid("collapseSubGridRow",u)}catch(f){}}n._start_&&n._start_.apply(this,[i,r])},n.update=function(i,r){$(r.item).css("border-width","");t.updateColumns();t.p.rownumbers===!0&&$("td.jqgrid-rownum",t.rows).each(function(n){$(this).html(n+1)});n._update_&&n._update_.apply(this,[i,r])},$("tbody:first",t).sortable(n),$("tbody:first",t).disableSelection()))})},gridDnD:function(n){return this.each(function(){function r(){var n=$.data(t,"dnd");$("tr.jqgrow:not(.ui-draggable)",t).draggable($.isFunction(n.drag)?n.drag.call($(t),n):n.drag)}var t=this,u,i,f;if(t.grid&&!t.p.treeGrid&&$.fn.draggable&&$.fn.droppable){if(u="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'><\/table>",$("#jqgrid_dnd").html()===null&&$("body").append(u),typeof n=="string"&&n=="updateDnD"&&t.p.jqgdnd===!0){r();return}if(n=$.extend({drag:function(n){return $.extend({start:function(i,r){var f,u;if(t.p.subGrid){f=$(r.helper).attr("id");try{$(t).jqGrid("collapseSubGridRow",f)}catch(e){}}for(u=0;u<$.data(t,"dnd").connectWith.length;u++)$($.data(t,"dnd").connectWith[u]).jqGrid("getGridParam","reccount")=="0"&&$($.data(t,"dnd").connectWith[u]).jqGrid("addRowData","jqg_empty_row",{});r.helper.addClass("ui-state-highlight");$("td",r.helper).each(function(n){this.style.width=t.grid.headers[n].width+"px"});n.onstart&&$.isFunction(n.onstart)&&n.onstart.call($(t),i,r)},stop:function(i,r){var f,u;for(r.helper.dropped&&(f=$(r.helper).attr("id"),$(t).jqGrid("delRowData",f)),u=0;u<$.data(t,"dnd").connectWith.length;u++)$($.data(t,"dnd").connectWith[u]).jqGrid("delRowData","jqg_empty_row");n.onstop&&$.isFunction(n.onstop)&&n.onstop.call($(t),i,r)}},n.drag_opts||{})},drop:function(n){return $.extend({accept:function(n){var t=$(n).closest("table.ui-jqgrid-btable"),i;return $.data(t[0],"dnd")!==undefined?(i=$.data(t[0],"dnd").connectWith,$.inArray("#"+this.id,i)!=-1?!0:!1):n},drop:function(i,r){var a=$(r.draggable).attr("id"),u=$("#"+t.id).jqGrid("getRowData",a),s,f,e;if(!n.dropbyname){var o=0,h={},c,l=$("#"+this.id).jqGrid("getGridParam","colModel");try{for(s in u)u.hasOwnProperty(s)&&l[o]&&(c=l[o].name,h[c]=u[s]),o++;u=h}catch(v){}}r.helper.dropped=!0;n.beforedrop&&$.isFunction(n.beforedrop)&&(f=n.beforedrop.call(this,i,r,u,$("#"+t.id),$(this)),typeof f!="undefined"&&f!==null&&typeof f=="object"&&(u=f));r.helper.dropped&&(n.autoid&&($.isFunction(n.autoid)?e=n.autoid.call(this,u):(e=Math.ceil(Math.random()*1e3),e=n.autoidprefix+e)),$("#"+this.id).jqGrid("addRowData",e,u,n.droppos));n.ondrop&&$.isFunction(n.ondrop)&&n.ondrop.call(this,i,r,u)}},n.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},n||{}),n.connectWith)for(n.connectWith=n.connectWith.split(","),n.connectWith=$.map(n.connectWith,function(n){return $.trim(n)}),$.data(t,"dnd",n),t.p.reccount=="0"||t.p.jqgdnd||r(),t.p.jqgdnd=!0,i=0;i<n.connectWith.length;i++)f=n.connectWith[i],$(f).droppable($.isFunction(n.drop)?n.drop.call($(t),n):n.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this,optstest;$t.grid&&$.fn.resizable&&(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(n,t){$($t).jqGrid("setGridParam",{height:$("#gview_"+$t.p.id+" .ui-jqgrid-bdiv").height()});$($t).jqGrid("setGridWidth",t.size.width,opts.shrinkToFit);opts._stop_&&opts._stop_.call($t,n,t)},opts._alsoResize_?(optstest="{'#gview_"+$t.p.id+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}",opts.alsoResize=eval("("+optstest+")")):opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+$t.p.id),delete opts._alsoResize_,$("#gbox_"+$t.p.id).resizable(opts))})}})}(jQuery);jQuery.fn.searchFilter=function(n,t){function i(n,t,i){var nt,l;if(this.$=n,this.add=function(t){return t==null?n.find(".ui-add-last").click():n.find(".sf:eq("+t+") .ui-add").click(),this},this.del=function(t){return t==null?n.find(".sf:last .ui-del").click():n.find(".sf:eq("+t+") .ui-del").click(),this},this.search=function(){return n.find(".ui-search").click(),this},this.reset=function(){return n.find(".ui-reset").click(),this},this.close=function(){return n.find(".ui-closer").click(),this},t!=null){function w(){return jQuery(this).toggleClass("ui-state-hover"),!1}function b(n){return jQuery(this).toggleClass("ui-state-active",n.type=="mousedown"),!1}function u(n,t){return"<option value='"+n+"'>"+t+"<\/option>"}function a(n,t,i){return"<select class='"+n+"'"+(i?" style='display:none;'":"")+">"+t+"<\/select>"}function k(t,i){var r=n.find("tr.sf td.data "+t);r[0]!=null&&i(r)}function d(t,i){var r=n.find("tr.sf td.data "+t);r[0]!=null&&jQuery.each(i,function(){this.data!=null?r.bind(this.type,this.data,this.fn):r.bind(this.type,this.fn)})}var r=jQuery.extend({},jQuery.fn.searchFilter.defaults,i),f=-1,s="";jQuery.each(r.groupOps,function(){s+=u(this.op,this.text)});s="<select name='groupOp'>"+s+"<\/select>";n.html("").addClass("ui-searchFilter").append("<div class='ui-widget-overlay' style='z-index: -1'>&#160;<\/div><table class='ui-widget-content ui-corner-all'><thead><tr><td colspan='5' class='ui-widget-header ui-corner-all' style='line-height: 18px;'><div class='ui-closer ui-state-default ui-corner-all ui-helper-clearfix' style='float: right;'><span class='ui-icon ui-icon-close'><\/span><\/div>"+r.windowTitle+"<\/td><\/tr><\/thead><tbody><tr class='sf'><td class='fields'><\/td><td class='ops'><\/td><td class='data'><\/td><td><div class='ui-del ui-state-default ui-corner-all'><span class='ui-icon ui-icon-minus'><\/span><\/div><\/td><td><div class='ui-add ui-state-default ui-corner-all'><span class='ui-icon ui-icon-plus'><\/span><\/div><\/td><\/tr><tr><td colspan='5' class='divider'><div>&#160;<\/div><\/td><\/tr><\/tbody><tfoot><tr><td colspan='3'><span class='ui-reset ui-state-default ui-corner-all' style='display: inline-block; float: left;'><span class='ui-icon ui-icon-arrowreturnthick-1-w' style='float: left;'><\/span><span style='line-height: 18px; padding: 0 7px 0 3px;'>"+r.resetText+"<\/span><\/span><span class='ui-search ui-state-default ui-corner-all' style='display: inline-block; float: right;'><span class='ui-icon ui-icon-search' style='float: left;'><\/span><span style='line-height: 18px; padding: 0 7px 0 3px;'>"+r.searchText+"<\/span><\/span><span class='matchText'>"+r.matchText+"<\/span> "+s+" <span class='rulesText'>"+r.rulesText+"<\/span><\/td><td>&#160;<\/td><td><div class='ui-add-last ui-state-default ui-corner-all'><span class='ui-icon ui-icon-plusthick'><\/span><\/div><\/td><\/tr><\/tfoot><\/table>");var v=n.find("tr.sf"),g=v.find("td.fields"),y=v.find("td.ops"),e=v.find("td.data"),h="";jQuery.each(r.operators,function(){h+=u(this.op,this.text)});h=a("default",h,!0);y.append(h);nt="<input type='text' class='default' style='display:none;' />";e.append(nt);var c="",p=!1,o=!1;jQuery.each(t,function(t){var h=t,s,i;if(c+=u(this.itemval,this.text),this.ops!=null&&(p=!0,s="",jQuery.each(this.ops,function(){s+=u(this.op,this.text)}),s=a("field"+h,s,!0),y.append(s)),this.dataUrl!=null){t>f&&(f=t);o=!0;var l=this.dataEvents,v=this.dataInit,w=this.buildSelect;jQuery.ajax(jQuery.extend({url:this.dataUrl,complete:function(i){var r;r=w!=null?jQuery("<div />").append(w(i)):jQuery("<div />").append(i.responseText);r.find("select").addClass("field"+h).hide();e.append(r.html());v&&k(".field"+t,v);l&&d(".field"+t,l);t==f&&n.find("tr.sf td.fields select[name='field']").change()}},r.ajaxSelectOptions))}else this.dataValues!=null?(o=!0,i="",jQuery.each(this.dataValues,function(){i+=u(this.value,this.text)}),i=a("field"+h,i,!0),e.append(i)):(this.dataEvents!=null||this.dataInit!=null)&&(o=!0,i="<input type='text' class='field"+h+"' />",e.append(i));this.dataInit!=null&&t!=f&&k(".field"+t,this.dataInit);this.dataEvents!=null&&t!=f&&d(".field"+t,this.dataEvents)});c="<select name='field'>"+c+"<\/select>";g.append(c);l=g.find("select[name='field']");p?l.change(function(n){var r=n.target.selectedIndex,i=jQuery(n.target).parents("tr.sf").find("td.ops"),t;i.find("select").removeAttr("name").hide();t=i.find(".field"+r);t[0]==null&&(t=i.find(".default"));t.attr("name","op").show()}):y.find(".default").attr("name","op").show();o?l.change(function(n){var r=n.target.selectedIndex,i=jQuery(n.target).parents("tr.sf").find("td.data"),t;i.find("select,input").removeClass("vdata").hide();t=i.find(".field"+r);t[0]==null&&(t=i.find(".default"));t.show().addClass("vdata")}):e.find(".default").show().addClass("vdata");(p||o)&&l.change();n.find(".ui-state-default").hover(w,w).mousedown(b).mouseup(b);n.find(".ui-closer").click(function(){r.onClose(jQuery(n.selector));return!1});n.find(".ui-del").click(function(n){var t=jQuery(n.target).parents(".sf");return t.siblings(".sf").length>0?(r.datepickerFix===!0&&jQuery.fn.datepicker!==undefined&&t.find(".hasDatepicker").datepicker("destroy"),t.remove()):(t.find("select[name='field']")[0].selectedIndex=0,t.find("select[name='op']")[0].selectedIndex=0,t.find(".data input").val(""),t.find(".data select").each(function(){this.selectedIndex=0}),t.find("select[name='field']").change()),!1});n.find(".ui-add").click(function(n){var i=jQuery(n.target).parents(".sf"),t=i.clone(!0).insertAfter(i),f,u;return t.find(".ui-state-default").removeClass("ui-state-hover ui-state-active"),r.clone?(t.find("select[name='field']")[0].selectedIndex=i.find("select[name='field']")[0].selectedIndex,f=t.find("select[name='op']")[0]==null,f||(t.find("select[name='op']").focus()[0].selectedIndex=i.find("select[name='op']")[0].selectedIndex),u=t.find("select.vdata"),u[0]!=null&&(u[0].selectedIndex=i.find("select.vdata")[0].selectedIndex)):(t.find(".data input").val(""),t.find("select[name='field']").focus()),r.datepickerFix===!0&&jQuery.fn.datepicker!==undefined&&i.find(".hasDatepicker").each(function(){var n=jQuery.data(this,"datepicker").settings;t.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(n)}),t.find("select[name='field']").change(),!1});n.find(".ui-search").click(function(){var i=jQuery(n.selector),t,u=i.find("select[name='groupOp'] :selected").val();t=r.stringResult?'{"groupOp":"'+u+'","rules":[':{groupOp:u,rules:[]};i.find(".sf").each(function(n){var u=jQuery(this).find("select[name='field'] :selected").val(),f=jQuery(this).find("select[name='op'] :selected").val(),i=jQuery(this).find("input.vdata,select.vdata :selected").val();i+="";i=i.replace(/\\/g,"\\\\").replace(/\"/g,'\\"');r.stringResult?(n>0&&(t+=","),t+='{"field":"'+u+'",',t+='"op":"'+f+'",',t+='"data":"'+i+'"}'):t.rules.push({field:u,op:f,data:i})});r.stringResult&&(t+="]}");r.onSearch(t);return!1});n.find(".ui-reset").click(function(){var t=jQuery(n.selector);return t.find(".ui-del").click(),t.find("select[name='groupOp']")[0].selectedIndex=0,r.onReset(),!1});n.find(".ui-add-last").click(function(){var i=jQuery(n.selector+" .sf:last"),t=i.clone(!0).insertAfter(i);return t.find(".ui-state-default").removeClass("ui-state-hover ui-state-active"),t.find(".data input").val(""),t.find("select[name='field']").focus(),r.datepickerFix===!0&&jQuery.fn.datepicker!==undefined&&i.find(".hasDatepicker").each(function(){var n=jQuery.data(this,"datepicker").settings;t.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(n)}),t.find("select[name='field']").change(),!1});this.setGroupOp=function(n){selDOMobj=this.$.find("select[name='groupOp']")[0];for(var i={},r=selDOMobj.options.length,t=0;t<r;t++)i[selDOMobj.options[t].value]=t;selDOMobj.selectedIndex=i[n];$(selDOMobj).change()};this.setFilter=function(n){var r=n.sfref,h=n.filter,o=[],t,u,p,c,l,f={},e,a,s,v,y;for(selDOMobj=r.find("select[name='field']")[0],t=0,p=selDOMobj.options.length;t<p;t++)f[selDOMobj.options[t].value]={index:t,ops:{}},o.push(selDOMobj.options[t].value);for(t=0,l=o.length;t<l;t++){if(selDOMobj=r.find(".ops > select[class='field"+t+"']")[0],selDOMobj)for(u=0,c=selDOMobj.options.length;u<c;u++)f[o[t]].ops[selDOMobj.options[u].value]=u;if(selDOMobj=r.find(".data > select[class='field"+t+"']")[0],selDOMobj)for(f[o[t]].data={},u=0,c=selDOMobj.options.length;u<c;u++)f[o[t]].data[selDOMobj.options[u].value]=u}if(e=h.field,f[e]&&(a=f[e].index),a!=null){if(s=f[e].ops[h.op],s===undefined)for(t=0,l=i.operators.length;t<l;t++)if(i.operators[t].op==h.op){s=t;break}v=h.data;y=f[e].data==null?-1:f[e].data[v]}return a!=null&&s!=null&&y!=null?(r.find("select[name='field']")[0].selectedIndex=a,r.find("select[name='field']").change(),r.find("select[name='op']")[0].selectedIndex=s,r.find("input.vdata").val(v),r=r.find("select.vdata")[0],r&&(r.selectedIndex=y),!0):!1}}}return new i(this,n,t)};jQuery.fn.searchFilter.version="1.2.9";jQuery.fn.searchFilter.defaults={clone:!0,datepickerFix:!0,onReset:function(n){alert("Reset Clicked. Data Returned: "+n)},onSearch:function(n){alert("Search Clicked. Data Returned: "+n)},onClose:function(n){n.hide()},groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],operators:[{op:"eq",text:"is equal to"},{op:"ne",text:"is not equal to"},{op:"lt",text:"is less than"},{op:"le",text:"is less or equal to"},{op:"gt",text:"is greater than"},{op:"ge",text:"is greater or equal to"},{op:"in",text:"is in"},{op:"ni",text:"is not in"},{op:"bw",text:"begins with"},{op:"bn",text:"does not begin with"},{op:"ew",text:"ends with"},{op:"en",text:"does not end with"},{op:"cn",text:"contains"},{op:"nc",text:"does not contain"}],matchText:"match",rulesText:"rules",resetText:"Reset",searchText:"Search",stringResult:!0,windowTitle:"Search Rules",ajaxSelectOptions:{}},function(n){n.fn.jqDrag=function(n){return e(this,n,"d")};n.fn.jqResize=function(n,t){return e(this,n,"r",t)};n.jqDnR={dnr:{},e:0,drag:function(n){return t.k=="d"?i.css({left:t.X+n.pageX-t.pX,top:t.Y+n.pageY-t.pY}):(i.css({width:Math.max(n.pageX-t.pX+t.W,0),height:Math.max(n.pageY-t.pY+t.H,0)}),M1&&r.css({width:Math.max(n.pageX-M1.pX+M1.W,0),height:Math.max(n.pageY-M1.pY+M1.H,0)})),!1},stop:function(){n(document).unbind("mousemove",u.drag).unbind("mouseup",u.stop)}};var u=n.jqDnR,t=u.dnr,i=u.e,r,e=function(u,e,o,s){return u.each(function(){e=e?n(e,u):u;e.bind("mousedown",{e:u,k:o},function(u){var o=u.data,e={};if(i=o.e,r=s?n(s):!1,i.css("position")!="relative")try{i.position(e)}catch(h){}return t={X:e.left||f("left")||0,Y:e.top||f("top")||0,W:f("width")||i[0].scrollWidth||0,H:f("height")||i[0].scrollHeight||0,pX:u.pageX,pY:u.pageY,k:o.k},M1=r&&o.k!="d"?{X:e.left||f1("left")||0,Y:e.top||f1("top")||0,W:r[0].offsetWidth||f1("width")||0,H:r[0].offsetHeight||f1("height")||0,pX:u.pageX,pY:u.pageY,k:o.k}:!1,n(document).mousemove(n.jqDnR.drag).mouseup(n.jqDnR.stop),!1})})},f=function(n){return parseInt(i.css(n))||!1};f1=function(n){return parseInt(r.css(n))||!1}}(jQuery),function(n){n.fn.jqm=function(r){var f={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:t,ajaxText:"",target:t,modal:t,toTop:t,onShow:t,onHide:t,onLoad:t};return this.each(function(){if(this._jqm)return i[this._jqm].c=n.extend({},i[this._jqm].c,r);u++;this._jqm=u;i[u]={c:n.extend(f,n.jqm.params,r),a:t,w:n(this).addClass("jqmID"+u),s:u};f.trigger&&n(this).jqmAddTrigger(f.trigger)})};n.fn.jqmAddClose=function(n){return c(this,n,"jqmHide")};n.fn.jqmAddTrigger=function(n){return c(this,n,"jqmShow")};n.fn.jqmShow=function(t){return this.each(function(){n.jqm.open(this._jqm,t)})};n.fn.jqmHide=function(t){return this.each(function(){n.jqm.close(this._jqm,t)})};n.jqm={hash:{},open:function(u,f){var s=i[u],c=s.c,p="."+c.closeClass,y=parseInt(s.w.css("z-index")),l,w,a,v;if(y=y>0?y:3e3,l=n("<div><\/div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":y-1,opacity:c.overlay/100}),s.a)return t;if(s.t=f,s.a=!0,s.w.css("z-index",y),c.modal?(r[0]||setTimeout(function(){h("bind")},1),r.push(u)):c.overlay>0?c.closeoverlay&&s.w.jqmAddClose(l):l=t,s.o=l?l.addClass(c.overlayClass).prependTo("body"):t,e&&(n("html,body").css({height:"100%",width:"100%"}),l)){l=l.css({position:"absolute"})[0];for(w in{Top:1,Left:1})l.style.setExpression(w.toLowerCase(),"(_=(document.documentElement.scroll"+w+" || document.body.scroll"+w+"))+'px'")}return c.ajax?(a=c.target||s.w,v=c.ajax,a=typeof a=="string"?n(a,s.w):n(a),v=v.substr(0,1)=="@"?n(f).attr(v.substring(1)):v,a.html(c.ajaxText).load(v,function(){c.onLoad&&c.onLoad.call(this,s);p&&s.w.jqmAddClose(n(p,s.w));o(s)})):p&&s.w.jqmAddClose(n(p,s.w)),c.toTop&&s.o&&s.w.before('<span id="jqmP'+s.w[0]._jqm+'"><\/span>').insertAfter(s.o),c.onShow?c.onShow(s):s.w.show(),o(s),t},close:function(u){var f=i[u];if(!f.a)return t;if(f.a=t,r[0]&&(r.pop(),r[0]||h("unbind")),f.c.toTop&&f.o&&n("#jqmP"+f.w[0]._jqm).after(f.w).remove(),f.c.onHide)f.c.onHide(f);else f.w.hide(),f.o&&f.o.remove();return t},params:{}};var u=0,i=n.jqm.hash,r=[],e=n.browser.msie&&n.browser.version=="6.0",t=!1,o=function(t){var i=n('<iframe src="javascript:false;document.write(\'\');" class="jqm"><\/iframe>').css({opacity:0});e&&(t.o?t.o.html('<p style="width:100%;height:100%"/>').prepend(i):n("iframe.jqm",t.w)[0]||t.w.prepend(i));s(t)},s=function(t){try{n(":input:visible",t.w)[0].focus()}catch(i){}},h=function(t){n(document)[t]("keypress",f)[t]("keydown",f)[t]("mousedown",f)},f=function(t){var u=i[r[r.length-1]],f=!n(t.target).parents(".jqmID"+u.s)[0];return f&&s(u),!f},c=function(r,u,f){return r.each(function(){var r=this._jqm;n(u).each(function(){this[f]||(this[f]=[],n(this).click(function(){var n,r;for(n in{jqmShow:1,jqmHide:1})for(r in this[n])i[this[n][r]]&&i[this[n][r]].w[n](this);return t}));this[f].push(r)})})}}(jQuery);xmlJsonClass={xml2json:function(n,t){n.nodeType===9&&(n=n.documentElement);var r=this.removeWhite(n),u=this.toObj(r),i=this.toJson(u,n.nodeName,"\t");return"{\n"+t+(t?i.replace(/\t/g,t):i.replace(/\t|\n/g,""))+"\n}"},json2xml:function(n,t){var i=function(n,t,r){var f="",e,s,h,o,u;if(n instanceof Array)if(n.length===0)f+=r+"<"+t+">__EMPTY_ARRAY_<\/"+t+">\n";else for(e=0,s=n.length;e<s;e+=1)h=r+i(n[e],t,r+"\t")+"\n",f+=h;else if(typeof n=="object"){o=!1;f+=r+"<"+t;for(u in n)n.hasOwnProperty(u)&&(u.charAt(0)==="@"?f+=" "+u.substr(1)+'="'+n[u].toString()+'"':o=!0);if(f+=o?">":"/>",o){for(u in n)n.hasOwnProperty(u)&&(u==="#text"?f+=n[u]:u==="#cdata"?f+="<![CDATA["+n[u]+"]\]>":u.charAt(0)!=="@"&&(f+=i(n[u],u,r+"\t")));f+=(f.charAt(f.length-1)==="\n"?r:"")+"<\/"+t+">"}}else f+=typeof n=="function"?r+"<"+t+"><![CDATA["+n+"]\]><\/"+t+">":n.toString()==='""'||n.toString().length===0?r+"<"+t+">__EMPTY_STRING_<\/"+t+">":r+"<"+t+">"+n.toString()+"<\/"+t+">";return f},r="";for(var u in n)n.hasOwnProperty(u)&&(r+=i(n[u],u,""));return t?r.replace(/\t/g,t):r.replace(/\t|\n/g,"")},toObj:function(n){var i={},e=/function/i,r;if(n.nodeType===1){if(n.attributes.length)for(r=0;r<n.attributes.length;r+=1)i["@"+n.attributes[r].nodeName]=(n.attributes[r].nodeValue||"").toString();if(n.firstChild){for(var f=0,u=0,o=!1,t=n.firstChild;t;t=t.nextSibling)t.nodeType===1?o=!0:t.nodeType===3&&t.nodeValue.match(/[^ \f\n\r\t\v]/)?f+=1:t.nodeType===4&&(u+=1);if(o)if(f<2&&u<2)for(this.removeWhite(n),t=n.firstChild;t;t=t.nextSibling)t.nodeType===3?i["#text"]=this.escape(t.nodeValue):t.nodeType===4?e.test(t.nodeValue)?i[t.nodeName]=[i[t.nodeName],t.nodeValue]:i["#cdata"]=this.escape(t.nodeValue):i[t.nodeName]?i[t.nodeName]instanceof Array?i[t.nodeName][i[t.nodeName].length]=this.toObj(t):i[t.nodeName]=[i[t.nodeName],this.toObj(t)]:i[t.nodeName]=this.toObj(t);else n.attributes.length?i["#text"]=this.escape(this.innerXml(n)):i=this.escape(this.innerXml(n));else if(f)n.attributes.length?i["#text"]=this.escape(this.innerXml(n)):(i=this.escape(this.innerXml(n)),i==="__EMPTY_ARRAY_"?i="[]":i==="__EMPTY_STRING_"&&(i=""));else if(u)if(u>1)i=this.escape(this.innerXml(n));else for(t=n.firstChild;t;t=t.nextSibling)if(e.test(n.firstChild.nodeValue)){i=n.firstChild.nodeValue;break}else i["#cdata"]=this.escape(t.nodeValue)}n.attributes.length||n.firstChild||(i=null)}else n.nodeType===9?i=this.toObj(n.documentElement):alert("unhandled node type: "+n.nodeType);return i},toJson:function(n,t,i){var r=t?'"'+t+'"':"",h,f,e,u,s;if(n==="[]")r+=t?":[]":"[]";else if(n instanceof Array){for(e=[],f=0,h=n.length;f<h;f+=1)e[f]=this.toJson(n[f],"",i+"\t");r+=(t?":[":"[")+(e.length>1?"\n"+i+"\t"+e.join(",\n"+i+"\t")+"\n"+i:e.join(""))+"]"}else if(n===null)r+=(t&&":")+"null";else if(typeof n=="object"){u=[];for(s in n)n.hasOwnProperty(s)&&(u[u.length]=this.toJson(n[s],s,i+"\t"));r+=(t?":{":"{")+(u.length>1?"\n"+i+"\t"+u.join(",\n"+i+"\t")+"\n"+i:u.join(""))+"}"}else if(typeof n=="string"){var o=n.toString();r+=/(^-?\d+\.?\d*$)/.test(o)||/function/i.test(o)||o==="false"||o==="true"?(t&&":")+o:(t&&":")+'"'+n+'"'}else r+=(t&&":")+n.toString();return r},innerXml:function(n){var i="",r,t;if("innerHTML"in n)i=n.innerHTML;else for(r=function(n){var t="",i,u;if(n.nodeType===1){for(t+="<"+n.nodeName,i=0;i<n.attributes.length;i+=1)t+=" "+n.attributes[i].nodeName+'="'+(n.attributes[i].nodeValue||"").toString()+'"';if(n.firstChild){for(t+=">",u=n.firstChild;u;u=u.nextSibling)t+=r(u);t+="<\/"+n.nodeName+">"}else t+="/>"}else n.nodeType===3?t+=n.nodeValue:n.nodeType===4&&(t+="<![CDATA["+n.nodeValue+"]\]>");return t},t=n.firstChild;t;t=t.nextSibling)i+=r(t);return i},escape:function(n){return n.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(n){var t,i;for(n.normalize(),t=n.firstChild;t;)t.nodeType===3?t.nodeValue.match(/[^ \f\n\r\t\v]/)?t=t.nextSibling:(i=t.nextSibling,n.removeChild(t),t=i):t.nodeType===1?(this.removeWhite(t),t=t.nextSibling):t=t.nextSibling;return n}};
//# sourceMappingURL=jquery.jqGrid.min.js.map
